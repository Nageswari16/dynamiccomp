import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { DynamicSearchURL } from '../urls/dynamic-search-url.config';
import * as i0 from "@angular/core";
import * as i1 from "./platform-data-store.service";
export class DynamicsearchService {
    _storeservice;
    port;
    port_communication;
    port_document;
    port_searchinput;
    port_report;
    onChangePageEventData;
    onChangePageEventId;
    onChangePageUserData;
    onChangePersonId;
    onChangeConfigData;
    inputFieldId;
    personTabName;
    personHealthTabName;
    personFinanceTabName;
    clickedId;
    rowData;
    caseNumberAfterApproval;
    _httpService;
    isPageDesign = new BehaviorSubject(false);
    observePage = this.isPageDesign.asObservable();
    data = new BehaviorSubject(false);
    sourceId = new BehaviorSubject('');
    sourceIdService = new BehaviorSubject('');
    id = new BehaviorSubject('');
    pageId = new BehaviorSubject('');
    moduleid = new BehaviorSubject('');
    purposeid = new BehaviorSubject('');
    workFlowDesign = new BehaviorSubject(null);
    workFlowStatus = new BehaviorSubject('');
    result = new BehaviorSubject('');
    constructor(_storeservice) {
        this._storeservice = _storeservice;
        this._storeservice.currentStore.subscribe((res) => {
            if (res) {
                this._httpService = res['HTTPSERVICE'];
            }
        });
        // constructor(private _httpService:HttpService){
        this.port = 'workflow';
        this.port_communication = 'communication';
        this.port_document = 'document';
        this.port_searchinput = 'searchinput';
        this.port_report = 'report';
    }
    //This Method for to set httpfile from independent service calls from web component
    SetHttpService(httpService) {
        this._httpService = httpService;
    }
    set clickableData(data) {
        this.inputFieldId = data;
    }
    get clickableData() {
        return this.inputFieldId;
    }
    set personTabNameData(data) {
        this.personTabName = data;
    }
    get personTabNameData() {
        return this.personTabName;
    }
    set personHealthTabNameData(data) {
        this.personHealthTabName = data;
    }
    get personHealthTabNameData() {
        return this.personHealthTabName;
    }
    set personFinanceTabNameData(data) {
        this.personFinanceTabName = data;
    }
    get personFinanceTabNameData() {
        return this.personFinanceTabName;
    }
    set clickedIdData(data) {
        this.clickedId = data;
    }
    get clickedIdData() {
        return this.clickedId;
    }
    set caseNumberAfterApprovalData(data) {
        this.caseNumberAfterApproval = data;
    }
    get caseNumberAfterApprovalData() {
        return this.caseNumberAfterApproval;
    }
    set clickedRowData(data) {
        this.rowData = data;
    }
    get clickedRowData() {
        return this.rowData;
    }
    getGridUserPreference(id) {
        return this._httpService.get(DynamicSearchURL.EndPoints.userConfig.getUserConfig + id);
    }
    getStaticGridConfig(id) {
        return this._httpService.get(DynamicSearchURL.EndPoints.userConfig.getStaticGridConfig.replace('{id}', id));
    }
    saveGridUserPreference(data) {
        return this._httpService.post(DynamicSearchURL.EndPoints.userConfig.saveUserConfig, data);
    }
    sendMail(data) {
        return this._httpService.post(DynamicSearchURL.EndPoints.notification.sendMail, data);
    }
    generateDocument(data, typeCheck) {
        const url = typeCheck
            ? DynamicSearchURL.EndPoints.documents.generateExcel
            : DynamicSearchURL.EndPoints.documents.generatePDF;
        return this._httpService.post(url, data);
    }
    exportData(data, link) {
        return this._httpService.post(link, data);
    }
    saveSearchCriteria(data) {
        return this._httpService.post(DynamicSearchURL.EndPoints.pageConfig.postApiurl, data);
    }
    startScheduling(data, url) {
        return this._httpService.post(url, data);
    }
    startSchedulingNoUrl(data, id) {
        return this._httpService.post(DynamicSearchURL.EndPoints.report.schedulertrigger + id, data);
    }
    getTemplate(formId) {
        return this._httpService.get(DynamicSearchURL.EndPoints.pageConfig.pageVersion + '/' + formId + '?applyPermissions=true');
    }
    // Remove Permission For Page-Designer View
    getTemplateView(formId) {
        return this._httpService.get(DynamicSearchURL.EndPoints.pageConfig.pageVersion + '/' + formId + '?applyPermissions=false');
    }
    getPageTabs(pageId) {
        return this._httpService.get(DynamicSearchURL.EndPoints.pageConfig.page + '/' + pageId);
    }
    changePage(page) {
        this.isPageDesign.next(page);
    }
    getFormResponse(pageId) {
        return this._httpService.get(DynamicSearchURL.EndPoints.formResponse.get.replace('{pageid}', pageId)).toPromise();
    }
    getProviderData(providerid) {
        return this._httpService.get(DynamicSearchURL.EndPoints.provider.providerData + '?userid=' + providerid);
    }
    saveCriteriaByPageId(data) {
        return this._httpService.post(DynamicSearchURL.EndPoints.criteria.save, data);
    }
    getCriteriaByPageId(pageId) {
        return this._httpService.get(DynamicSearchURL.EndPoints.criteria.getByPageId.replace('{pageId}', pageId));
    }
    rowVersion(data) {
        return this._httpService.post(DynamicSearchURL.EndPoints.rowversion.copy, data);
    }
    checkDeleteStatus(pageid, id, primarytable) {
        return this._httpService.get(DynamicSearchURL.EndPoints.formResponse.checkDeleteStatus.replace('{id}', id).replace('{pageid}', pageid).replace('{primaryobject}', primarytable));
    }
    checkEditStatus(pageid, id) {
        return this._httpService.get(DynamicSearchURL.EndPoints.formResponse.checkEditStatus.replace('{id}', id).replace('{pageid}', pageid));
    }
    checkRulesInWorkflow(pageData) {
        return this._httpService.post(DynamicSearchURL.EndPoints.checkRules.rules, pageData);
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DynamicsearchService, deps: [{ token: i1.PlatformDataStoreService }], target: i0.ɵɵFactoryTarget.Injectable });
    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DynamicsearchService, providedIn: 'root' });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DynamicsearchService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.PlatformDataStoreService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pY3NlYXJjaC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGljcy1jb3JlL2R5bmFtaWMvc3JjL2xpYi9waWNzLWR5bmFtaWMvQGNvcmUvc2VydmljZS9keW5hbWljc2VhcmNoLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1DQUFtQyxDQUFDOzs7QUFNckUsTUFBTSxPQUFPLG9CQUFvQjtJQStCWDtJQTlCcEIsSUFBSSxDQUFTO0lBQ2Isa0JBQWtCLENBQVM7SUFDM0IsYUFBYSxDQUFTO0lBQ3RCLGdCQUFnQixDQUFTO0lBQ3pCLFdBQVcsQ0FBUztJQUNiLHFCQUFxQixDQUFNO0lBQzNCLG1CQUFtQixDQUFNO0lBQ3pCLG9CQUFvQixDQUFNO0lBQzFCLGdCQUFnQixDQUFNO0lBQ3RCLGtCQUFrQixDQUFNO0lBQy9CLFlBQVksQ0FBTTtJQUNsQixhQUFhLENBQU07SUFDbkIsbUJBQW1CLENBQU07SUFDekIsb0JBQW9CLENBQU07SUFDMUIsU0FBUyxDQUFNO0lBQ2YsT0FBTyxDQUFNO0lBQ2IsdUJBQXVCLENBQU07SUFDN0IsWUFBWSxDQUFLO0lBQ1QsWUFBWSxHQUFHLElBQUksZUFBZSxDQUFVLEtBQUssQ0FBQyxDQUFDO0lBQzNELFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3hDLElBQUksR0FBeUIsSUFBSSxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDeEQsUUFBUSxHQUF5QixJQUFJLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN6RCxlQUFlLEdBQXlCLElBQUksZUFBZSxDQUFDLEVBQUUs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TUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUE7SUFDbEwsQ0FBQztJQUVELGVBQWUsQ0FBQyxNQUFNLEVBQUUsRUFBRTtRQUN4QixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFBO0lBQ3ZJLENBQUM7SUFFRCxvQkFBb0IsQ0FBQyxRQUFRO1FBQzNCLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUMsUUFBUSxDQUFDLENBQUE7SUFDckYsQ0FBQzt3R0E3TFUsb0JBQW9COzRHQUFwQixvQkFBb0IsY0FGbkIsTUFBTTs7NEZBRVAsb0JBQW9CO2tCQUhoQyxVQUFVO21CQUFDO29CQUNWLFVBQVUsRUFBRSxNQUFNO2lCQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IER5bmFtaWNTZWFyY2hVUkwgfSBmcm9tICcuLi91cmxzL2R5bmFtaWMtc2VhcmNoLXVybC5jb25maWcnO1xyXG5pbXBvcnQgeyBQbGF0Zm9ybURhdGFTdG9yZVNlcnZpY2UgfSBmcm9tICcuL3BsYXRmb3JtLWRhdGEtc3RvcmUuc2VydmljZSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEeW5hbWljc2VhcmNoU2VydmljZSB7XHJcbiAgcG9ydDogc3RyaW5nO1xyXG4gIHBvcnRfY29tbXVuaWNhdGlvbjogc3RyaW5nO1xyXG4gIHBvcnRfZG9jdW1lbnQ6IHN0cmluZztcclxuICBwb3J0X3NlYXJjaGlucHV0OiBzdHJpbmc7XHJcbiAgcG9ydF9yZXBvcnQ6IHN0cmluZztcclxuICBwdWJsaWMgb25DaGFuZ2VQYWdlRXZlbnREYXRhOiBhbnk7XHJcbiAgcHVibGljIG9uQ2hhbmdlUGFnZUV2ZW50SWQ6IGFueTtcclxuICBwdWJsaWMgb25DaGFuZ2VQYWdlVXNlckRhdGE6IGFueTtcclxuICBwdWJsaWMgb25DaGFuZ2VQZXJzb25JZDogYW55O1xyXG4gIHB1YmxpYyBvbkNoYW5nZUNvbmZpZ0RhdGE6IGFueTtcclxuICBpbnB1dEZpZWxkSWQ6IGFueTtcclxuICBwZXJzb25UYWJOYW1lOiBhbnk7XHJcbiAgcGVyc29uSGVhbHRoVGFiTmFtZTogYW55O1xyXG4gIHBlcnNvbkZpbmFuY2VUYWJOYW1lOiBhbnk7XHJcbiAgY2xpY2tlZElkOiBhbnk7XHJcbiAgcm93RGF0YTogYW55O1xyXG4gIGNhc2VOdW1iZXJBZnRlckFwcHJvdmFsOiBhbnk7XHJcbiAgX2h0dHBTZXJ2aWNlOmFueTtcclxuICBwcml2YXRlIGlzUGFnZURlc2lnbiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xyXG4gIG9ic2VydmVQYWdlID0gdGhpcy5pc1BhZ2VEZXNpZ24uYXNPYnNlcnZhYmxlKCk7XHJcbiAgcHVibGljIGRhdGE6IEJlaGF2aW9yU3ViamVjdDxhbnk+ID0gbmV3IEJlaGF2aW9yU3ViamVjdChmYWxzZSk7XHJcbiAgcHVibGljIHNvdXJjZUlkOiBCZWhhdmlvclN1YmplY3Q8YW55PiA9IG5ldyBCZWhhdmlvclN1YmplY3QoJycpO1xyXG4gIHB1YmxpYyBzb3VyY2VJZFNlcnZpY2U6IEJlaGF2aW9yU3ViamVjdDxhbnk+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCgnJyk7XHJcbiAgcHVibGljIGlkOiBCZWhhdmlvclN1YmplY3Q8YW55PiA9IG5ldyBCZWhhdmlvclN1YmplY3QoJycpO1xyXG4gIHB1YmxpYyBwYWdlSWQ6IEJlaGF2aW9yU3ViamVjdDxhbnk+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCgnJyk7XHJcbiAgcHVibGljIG1vZHVsZWlkOiBCZWhhdmlvclN1YmplY3Q8YW55PiA9IG5ldyBCZWhhdmlvclN1YmplY3QoJycpO1xyXG4gIHB1YmxpYyBwdXJwb3NlaWQ6IEJlaGF2aW9yU3ViamVjdDxhbnk+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCgnJyk7XHJcbiAgcHVibGljIHdvcmtGbG93RGVzaWduOiBCZWhhdmlvclN1YmplY3Q8YW55PiA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XHJcbiAgcHVibGljIHdvcmtGbG93U3RhdHVzOiBCZWhhdmlvclN1YmplY3Q8YW55PiA9IG5ldyBCZWhhdmlvclN1YmplY3QoJycpO1xyXG4gIHB1YmxpYyByZXN1bHQ6IEJlaGF2aW9yU3ViamVjdDxhbnk+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCgnJyk7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfc3RvcmVzZXJ2aWNlOiBQbGF0Zm9ybURhdGFTdG9yZVNlcnZpY2UpIHtcclxuICAgIHRoaXMuX3N0b3Jlc2VydmljZS5jdXJyZW50U3RvcmUuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgdGhpcy5faHR0cFNlcnZpY2UgPSByZXNbJ0hUVFBTRVJWSUNFJ11cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAvLyBjb25zdHJ1Y3Rvcihwcml2YXRlIF9odHRwU2VydmljZTpIdHRwU2VydmljZSl7XHJcbiAgICB0aGlzLnBvcnQgPSAnd29ya2Zsb3cnO1xyXG4gICAgdGhpcy5wb3J0X2NvbW11bmljYXRpb24gPSAnY29tbXVuaWNhdGlvbic7XHJcbiAgICB0aGlzLnBvcnRfZG9jdW1lbnQgPSAnZG9jdW1lbnQnO1xyXG4gICAgdGhpcy5wb3J0X3NlYXJjaGlucHV0ID0gJ3NlYXJjaGlucHV0JztcclxuICAgIHRoaXMucG9ydF9yZXBvcnQgPSAncmVwb3J0JztcclxuICB9XHJcbiAgLy9UaGlzIE1ldGhvZCBmb3IgdG8gc2V0IGh0dHBmaWxlIGZyb20gaW5kZXBlbmRlbnQgc2VydmljZSBjYWxscyBmcm9tIHdlYiBjb21wb25lbnRcclxuICBTZXRIdHRwU2VydmljZShodHRwU2VydmljZTphbnkpe1xyXG4gICAgdGhpcy5faHR0cFNlcnZpY2UgPSBodHRwU2VydmljZTtcclxuICB9XHJcblxyXG4gIHNldCBjbGlja2FibGVEYXRhKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5pbnB1dEZpZWxkSWQgPSBkYXRhO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNsaWNrYWJsZURhdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnB1dEZpZWxkSWQ7XHJcbiAgfVxyXG4gIHNldCBwZXJzb25UYWJOYW1lRGF0YShkYXRhOiBhbnkpIHtcclxuICAgIHRoaXMucGVyc29uVGFiTmFtZSA9IGRhdGE7XHJcbiAgfVxyXG5cclxuICBnZXQgcGVyc29uVGFiTmFtZURhdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wZXJzb25UYWJOYW1lO1xyXG4gIH1cclxuICBzZXQgcGVyc29uSGVhbHRoVGFiTmFtZURhdGEoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLnBlcnNvbkhlYWx0aFRhYk5hbWUgPSBkYXRhO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHBlcnNvbkhlYWx0aFRhYk5hbWVEYXRhKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGVyc29uSGVhbHRoVGFiTmFtZTtcclxuICB9XHJcblxyXG4gIHNldCBwZXJzb25GaW5hbmNlVGFiTmFtZURhdGEoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLnBlcnNvbkZpbmFuY2VUYWJOYW1lID0gZGF0YTtcclxuICB9XHJcblxyXG4gIGdldCBwZXJzb25GaW5hbmNlVGFiTmFtZURhdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wZXJzb25GaW5hbmNlVGFiTmFtZTtcclxuICB9XHJcblxyXG4gIHNldCBjbGlja2VkSWREYXRhKGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5jbGlja2VkSWQgPSBkYXRhO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNsaWNrZWRJZERhdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jbGlja2VkSWQ7XHJcbiAgfVxyXG4gIHNldCBjYXNlTnVtYmVyQWZ0ZXJBcHByb3ZhbERhdGEoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLmNhc2VOdW1iZXJBZnRlckFwcHJvdmFsID0gZGF0YTtcclxuICB9XHJcblxyXG4gIGdldCBjYXNlTnVtYmVyQWZ0ZXJBcHByb3ZhbERhdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYXNlTnVtYmVyQWZ0ZXJBcHByb3ZhbDtcclxuICB9XHJcblxyXG4gIHNldCBjbGlja2VkUm93RGF0YShkYXRhOiBhbnkpIHtcclxuICAgIHRoaXMucm93RGF0YSA9IGRhdGE7XHJcbiAgfVxyXG5cclxuICBnZXQgY2xpY2tlZFJvd0RhdGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yb3dEYXRhO1xyXG4gIH1cclxuXHJcbiAgZ2V0R3JpZFVzZXJQcmVmZXJlbmNlKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UuZ2V0KER5bmFtaWNTZWFyY2hVUkwuRW5kUG9pbnRzLnVzZXJDb25maWcuZ2V0VXNlckNvbmZpZyArIGlkKTtcclxuICB9XHJcblxyXG4gIGdldFN0YXRpY0dyaWRDb25maWcoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9odHRwU2VydmljZS5nZXQoRHluYW1pY1NlYXJjaFVSTC5FbmRQb2ludHMudXNlckNvbmZpZy5nZXRTdGF0aWNHcmlkQ29uZmlnLnJlcGxhY2UoJ3tpZH0nLCBpZCkpO1xyXG4gIH1cclxuXHJcbiAgc2F2ZUdyaWRVc2VyUHJlZmVyZW5jZShkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UucG9zdChEeW5hbWljU2VhcmNoVVJMLkVuZFBvaW50cy51c2VyQ29uZmlnLnNhdmVVc2VyQ29uZmlnLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIHNlbmRNYWlsKGRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl9odHRwU2VydmljZS5wb3N0KER5bmFtaWNTZWFyY2hVUkwuRW5kUG9pbnRzLm5vdGlmaWNhdGlvbi5zZW5kTWFpbCwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZURvY3VtZW50KGRhdGEsIHR5cGVDaGVjaykge1xyXG4gICAgY29uc3QgdXJsID0gdHlwZUNoZWNrXHJcbiAgICAgID8gRHluYW1pY1NlYXJjaFVSTC5FbmRQb2ludHMuZG9jdW1lbnRzLmdlbmVyYXRlRXhjZWxcclxuICAgICAgOiBEeW5hbWljU2VhcmNoVVJMLkVuZFBvaW50cy5kb2N1bWVudHMuZ2VuZXJhdGVQREY7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UucG9zdCh1cmwsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0RGF0YShkYXRhLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UucG9zdChsaW5rLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIHNhdmVTZWFyY2hDcml0ZXJpYShkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UucG9zdChEeW5hbWljU2VhcmNoVVJMLkVuZFBvaW50cy5wYWdlQ29uZmlnLnBvc3RBcGl1cmwsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgc3RhcnRTY2hlZHVsaW5nKGRhdGEsIHVybCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBTZXJ2aWNlLnBvc3QodXJsLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIHN0YXJ0U2NoZWR1bGluZ05vVXJsKGRhdGEsIGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UucG9zdChEeW5hbWljU2VhcmNoVVJMLkVuZFBvaW50cy5yZXBvcnQuc2NoZWR1bGVydHJpZ2dlciArIGlkLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldFRlbXBsYXRlKGZvcm1JZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBTZXJ2aWNlLmdldChcclxuICAgICAgRHluYW1pY1NlYXJjaFVSTC5FbmRQb2ludHMucGFnZUNvbmZpZy5wYWdlVmVyc2lvbiArICcvJyArIGZvcm1JZCArICc/YXBwbHlQZXJtaXNzaW9ucz10cnVlJ1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIFJlbW92ZSBQZXJtaXNzaW9uIEZvciBQYWdlLURlc2lnbmVyIFZpZXdcclxuICBnZXRUZW1wbGF0ZVZpZXcoZm9ybUlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UuZ2V0KFxyXG4gICAgICBEeW5hbWljU2VhcmNoVVJMLkVuZFBvaW50cy5wYWdlQ29uZmlnLnBhZ2VWZXJzaW9uICsgJy8nICsgZm9ybUlkICsgJz9hcHBseVBlcm1pc3Npb25zPWZhbHNlJ1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldFBhZ2VUYWJzKHBhZ2VJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBTZXJ2aWNlLmdldChEeW5hbWljU2VhcmNoVVJMLkVuZFBvaW50cy5wYWdlQ29uZmlnLnBhZ2UgKyAnLycgKyBwYWdlSWQpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlUGFnZShwYWdlKSB7XHJcbiAgICB0aGlzLmlzUGFnZURlc2lnbi5uZXh0KHBhZ2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rm9ybVJlc3BvbnNlKHBhZ2VJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UuZ2V0KER5bmFtaWNTZWFyY2hVUkwuRW5kUG9pbnRzLmZvcm1SZXNwb25zZS5nZXQucmVwbGFjZSgne3BhZ2VpZH0nLCBwYWdlSWQpKS50b1Byb21pc2UoKTtcclxuICB9XHJcbiAgZ2V0UHJvdmlkZXJEYXRhKHByb3ZpZGVyaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9odHRwU2VydmljZS5nZXQoRHluYW1pY1NlYXJjaFVSTC5FbmRQb2ludHMucHJvdmlkZXIucHJvdmlkZXJEYXRhICsgJz91c2VyaWQ9JyArIHByb3ZpZGVyaWQpO1xyXG4gIH1cclxuXHJcbiAgc2F2ZUNyaXRlcmlhQnlQYWdlSWQoZGF0YSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBTZXJ2aWNlLnBvc3QoRHluYW1pY1NlYXJjaFVSTC5FbmRQb2ludHMuY3JpdGVyaWEuc2F2ZSwgZGF0YSk7XHJcbiAgfVxyXG4gIGdldENyaXRlcmlhQnlQYWdlSWQocGFnZUlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UuZ2V0KER5bmFtaWNTZWFyY2hVUkwuRW5kUG9pbnRzLmNyaXRlcmlhLmdldEJ5UGFnZUlkLnJlcGxhY2UoJ3twYWdlSWR9JywgcGFnZUlkKSk7XHJcbiAgfVxyXG4gIHJvd1ZlcnNpb24oZGF0YTphbnkpIHtcclxuICAgIHJldHVybiB0aGlzLl9odHRwU2VydmljZS5wb3N0KER5bmFtaWNTZWFyY2hVUkwuRW5kUG9pbnRzLnJvd3ZlcnNpb24uY29weSwgZGF0YSk7XHJcbiAgfVxyXG4gIFxyXG4gIGNoZWNrRGVsZXRlU3RhdHVzKHBhZ2VpZCwgaWQsIHByaW1hcnl0YWJsZSl7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFNlcnZpY2UuZ2V0KER5bmFtaWNTZWFyY2hVUkwuRW5kUG9pbnRzLmZvcm1SZXNwb25zZS5jaGVja0RlbGV0ZVN0YXR1cy5yZXBsYWNlKCd7aWR9JywgaWQpLnJlcGxhY2UoJ3twYWdlaWR9JywgcGFnZWlkKS5yZXBsYWNlKCd7cHJpbWFyeW9iamVjdH0nLCBwcmltYXJ5dGFibGUpKVxyXG4gIH1cclxuXHJcbiAgY2hlY2tFZGl0U3RhdHVzKHBhZ2VpZCwgaWQpe1xyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBTZXJ2aWNlLmdldChEeW5hbWljU2VhcmNoVVJMLkVuZFBvaW50cy5mb3JtUmVzcG9uc2UuY2hlY2tFZGl0U3RhdHVzLnJlcGxhY2UoJ3tpZH0nLCBpZCkucmVwbGFjZSgne3BhZ2VpZH0nLCBwYWdlaWQpKVxyXG4gIH1cclxuXHJcbiAgY2hlY2tSdWxlc0luV29ya2Zsb3cocGFnZURhdGEpe1xyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBTZXJ2aWNlLnBvc3QoRHluYW1pY1NlYXJjaFVSTC5FbmRQb2ludHMuY2hlY2tSdWxlcy5ydWxlcyxwYWdlRGF0YSlcclxuICB9XHJcbn1cclxuIl19
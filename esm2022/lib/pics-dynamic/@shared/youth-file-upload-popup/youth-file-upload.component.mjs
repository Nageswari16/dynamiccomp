import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { Validators } from '@angular/forms';
import moment from 'moment/moment';
import { LoaderService } from '../../@core/service/loader.service';
import { AlertService } from '../../@core/service/alert.service';
import * as i0 from "@angular/core";
import * as i1 from "../../@core/service/local.service";
import * as i2 from "@angular/forms";
import * as i3 from "../../@core/service/http.service";
import * as i4 from "../../@core/service/data-store.service";
const today = new Date();
const currentDate = today.getDate();
const month = today.getMonth();
const year = today.getFullYear();
const currentDay = new Date(year, month, currentDate);
const DATE_FORMAT = 'YYYY-MM-DD';
export class YouthFileUploadWrapperComponent {
    localStoreService;
    formBuilder;
    httpService;
    _storeservice;
    value; // Value from the form
    label; // Label for the custom component
    valueChange = new EventEmitter(); // Output to send data back to form
    formioEvent = new EventEmitter();
    fileInput;
    display = false;
    photoTypeList;
    documentUploadForm;
    alertService;
    imageHeight;
    imageWidth;
    fileName = '';
    fileSize = 0;
    isImageUploaded = false;
    fileNamePath;
    imgUrl;
    imgUrl2;
    loaderService;
    fileSizeRaw;
    youthId;
    setDescirptionText = "";
    isViewMode = false;
    sharedInfo = {};
    youthPhotoService;
    authService;
    maxDate;
    constructor(injector, localStoreService, formBuilder, httpService, _storeservice) {
        this.localStoreService = localStoreService;
        this.formBuilder = formBuilder;
        this.httpService = httpService;
        this._storeservice = _storeservice;
        this._storeservice.currentStore.subscribe((res) => {
            if (res) {
                this.authService = res['AUTHSERVICE'];
                this.youthPhotoService = res['YOUTHPHOTOSERVICE'];
            }
        });
        this.sharedInfo = this.authService.getSharedMessage();
        this.photoTypeList = [
            { value: 'SCR', label: 'Scar, Mark or Tattoo' }
        ];
        this.alertService = injector.get(AlertService);
        this.loaderService = injector.get(LoaderService);
        this.maxDate = new Date();
    }
    disabled;
    ngOnInit() {
        if (sessionStorage.getItem('gridAction') === 'view') {
            this.isViewMode = true;
        }
    }
    ngAfterViewChecked() {
    }
    async showPopup() {
        this.formioEvent.emit({ eventName: 'customEvent', data: { value: {}, type: 'youthfileupload' } });
        const valuecheck = this.authService.getSharedMessage();
        if (valuecheck && valuecheck) {
            const getValue = valuecheck?.dataGridComponent[0];
            this.youthId = valuecheck?.youth_id;
            const lookupMark = await this.youthPhotoService.getPhysicalMarkDescription('MARK').toPromise().then(response => { return response["data"]; });
            const lookupSide = await this.youthPhotoService.getPhysicalMarkDescription('SIDE').toPromise().then(response => { return response["data"]; });
            const lookupPart = await this.youthPhotoService.getPhysicalMarkDescription('PART').toPromise().then(response => { return response["data"]; });
            let markDescription = [];
            let sideDescription = [];
            let partDescription = [];
            if (lookupMark.length || lookupSide.length || lookupPart.length) {
                markDescription = lookupMark.filter(value => value.code === getValue?._data?.physicalmark?.mark_type_code);
                sideDescription = lookupSide.filter(value => value.code === getValue?._data?.physicalmark?.body_side_code);
                partDescription = lookupPart.filter(value => value.code === getValue?._data?.physicalmark?.body_part_code);
            }
            const descriptions = [
                markDescription.length ? markDescription[0].description : "",
                partDescription.length ? partDescription[0].description : "",
                sideDescription.length ? sideDescription[0].description : "",
                getValue?._data?.physicalmark?.design || ""
            ].filter(Boolean); // Filter out empty strings
            this.setDescirptionText = descriptions.join('; ');
        }
        this.display = !this.display;
        console.log("valuecheck", valuecheck);
        this.initializeDocumentUploadForm();
    }
    initializeDocumentUploadForm() {
        const currentDate = new Date();
        const username = JSON.parse(this.localStoreService.getItem('user'));
        const userId = this.localStoreService.getItem('id');
        this.documentUploadForm = this.formBuilder.group({
            entered_date: [{ value: currentDate, disabled: true }, Validators.required],
            type_code: [{ value: 'SCR', disabled: true }, Validators.required],
            photo_date: [currentDate, Validators.required],
            entered_by_worker_name: [{ value: `${username.lastname}, ${username.firstname}${username.middlename ? ' ' + username.middlename : ''}`, disabled: true }],
            entered_by_worker_id: [`${userId}`],
            description: [{ value: this.setDescirptionText, disabled: true }, Validators.required],
            url_pic: ['', Validators.required]
        });
    }
    uploadFile(fileValue) {
        const file = fileValue[0];
        this.validateDocument(file).then(isValid => {
            if (isValid) {
                const imageData = {
                    contentType: fileValue[0].type,
                    fileName: this.fileNamePath
                };
                this.youthPhotoService.uploadKey(imageData).subscribe((res) => {
                    this.documentUploadForm.patchValue({ url_pic: this.fileNamePath });
                    this.httpService.putUpload(res.data, file, file.type).subscribe((resp) => {
                        this.imgUrl2 = res.data;
                        this.isImageUploaded = true;
                    });
                }, (_error) => {
                    this.alertService.error('Something went wrong.');
                });
            }
        });
    }
    validateDocument(file) {
        return new Promise((resolve, reject) => {
            const fileSize = Number(file.size) / 1024;
            const filetype = file.type.split('/')[1];
            const fileNameLength = file.name.length;
            const reader = new FileReader();
            this.loaderService.show();
            reader.onload = (e) => {
                this.loaderService.hide();
                if (filetype !== 'jpg' && filetype !== 'jpeg' && filetype !== 'png' && filetype !== 'jfif') {
                    this.fileInput.nativeElement.value = "";
                    this.alertService.error(`JPG, JPEG, PNG & JFIF are supported.`);
                    this.clearImage();
                    resolve(false);
                    return;
                }
                else if (fileNameLength > 100) {
                    this.alertService.warn('The filename is too long.');
                    resolve(false);
                    return;
                }
                const img = new Image();
                img.src = e.target.result;
                img.onload = () => {
                    this.imageWidth = img.width;
                    this.imageHeight = img.height;
                    if (fileSize <= 3072) {
                        this.fileName = file.name;
                        this.fileSizeRaw = parseFloat(fileSize.toFixed(1));
                        this.fileSize = this.getFileSize(parseFloat(fileSize.toFixed(1)));
                        this.fileNamePath = `youth-photo/${this.youthId}/${moment().valueOf()}-${this.fileName.replaceAll(' ', '')}`;
                        resolve(true);
                    }
                    else {
                        this.fileInput.nativeElement.value = "";
                        this.alertService.warn('File size exceeds 3MB limit.');
                        resolve(false);
                    }
                };
            };
            reader.readAsDataURL(file);
        });
    }
    resetData() {
        this.documentUploadForm.reset();
        this.fileSize = 0;
        this.fileSizeRaw = 0;
        this.fileName = '';
        this.isImageUploaded = false;
        this.fileNamePath = '';
    }
    getFileSize(fileSize) {
        if (fileSize > 1024) {
            fileSize = fileSize / 1024;
            return `${fileSize.toFixed(2)} MB`;
        }
        else {
            return `${fileSize.toFixed(2)} KB`;
        }
    }
    clearImage() {
        this.documentUploadForm.patchValue({ url_pic: '' });
        this.fileName = '';
        this.fileSize = 0;
        this.fileSizeRaw = 0;
        this.isImageUploaded = false;
        // this.isEditMode = false;
        this.imgUrl2 = '';
    }
    sendDocument() {
        try {
            const documentUploadForm = this.documentUploadForm.getRawValue();
            this.value = documentUploadForm;
            this.valueChange.emit(documentUploadForm);
            this.formioEvent.emit({ eventName: 'customEvent', data: { value: { documentUploadForm }, type: 'setYouthFileUploadData' } });
            this.display = false;
        }
        catch (e) {
            console.log(`Error in send document: ${e}`);
        }
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: YouthFileUploadWrapperComponent, deps: [{ token: i0.Injector }, { token: i1.LocalService }, { token: i2.FormBuilder }, { token: i3.HttpService }, { token: i4.DataStoreService }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: YouthFileUploadWrapperComponent, selector: "app-youth-file-upload-wrapper", inputs: { value: "value", label: "label" }, outputs: { valueChange: "valueChange", formioEvent: "formioEvent" }, viewQueries: [{ propertyName: "fileInput", first: true, predicate: ["file"], descendants: true }], ngImport: i0, template: "<div>\r\n    <div *ngIf=\"display\" class=\"overlay\">\r\n        <div id=\"myModal\" class=\"modal uploadPopup\">\r\n          <div class=\"modal-dialog modal-xl\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-6 col-lg-4 col-xl-4 mb-2\">\r\n                        <div class=\"uploaded-files mb-3\">\r\n                            <div class=\"upload-sec\">\r\n                                <div class=\"block drop-container\" [hidden]=\"isImageUploaded\" #file\r\n                                    (ngxf-drop)=\"uploadFile($event)\" (ngxf-select)=\"uploadFile($event)\"\r\n                                    drop-class=\"drop\" [ngxf-validate]=\"{ size: { min: 5 } }\" multiple>\r\n                                    <i class=\"fa fa-cloud-upload mb-2\" aria-hidden=\"true\"></i>\r\n                                    <p>Drag and Drop or <a href=\"javascript:;\">Browse</a></p>\r\n                                    <p class=\"mt-5\">Max file size 3MB <br> Supported formats: JPG, JPEG, PNG, JFIF</p>\r\n                                </div>\r\n                                <div [hidden]=\"!isImageUploaded\">\r\n                                    <img class=\"upload-image-preview\" [src]=\"imgUrl2\" alt=\"Youth Image\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"progress-wrap\">\r\n                            <div class=\"d-flex justify-content-between mb-1\">\r\n                                <h6>{{fileName}}</h6>\r\n                                <span [hidden]=\"isEditMode\">{{fileSize}}/3MB</span>\r\n                                <a href=\"javascript:;\" class=\"progress-close\" (click)=\"clearImage()\">\r\n                                    <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n                                </a>\r\n                            </div>\r\n                            <div class=\"progress\">\r\n                                <div class=\"progress-bar bg-info\" role=\"progressbar\"\r\n                                    [style.width.%]=\"fileSizeRaw / 3072 * 100\" [attr.aria-valuenow]=\"fileSizeRaw\"\r\n                                    aria-valuemin=\"0\" aria-valuemax=\"3072\"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-lg-8 col-md-6 col-xl-8\">\r\n                        <div class=\"upload-wrap dd-overflow-inherit\" [formGroup]=\"documentUploadForm\">\r\n                            <div class=\"uploaded-form\">\r\n                                <div class=\"p-fluid p-formgrid row\">\r\n                                    <div class=\"p-field col-lg-4 col-sm-4 col-md-12 col-12\">\r\n                                        <label for=\"fname\" class=\"referral-form-labels\">\r\n                                            Entered Date\r\n                                            <span class=\"requiredfield text-danger\">*</span>\r\n                                        </label>\r\n                                        <p-calendar type=\"date\" formControlName=\"entered_date\"\r\n                                            placeholder=\"[current date]\" [selectOtherMonths]=\"true\" [showIcon]=\"true\"\r\n                                            [showOnFocus]=\"false\"></p-calendar>\r\n                                    </div>\r\n                                    <div class=\"p-field col-lg-4 col-sm-4 col-md-12 col-12\">\r\n                                        <div>\r\n                                            <label for=\"fname\" class=\"referral-form-labels\">\r\n                                                Photo Date\r\n                                                <span class=\"requiredfield text-danger\">*</span>\r\n                                            </label>\r\n                                            <p-calendar type=\"date\" formControlName=\"photo_date\"\r\n                                                placeholder=\"MM/DD/YYYY\" [selectOtherMonths]=\"true\" [showIcon]=\"true\"\r\n                                                [maxDate]=\"maxDate\" [showOnFocus]=\"false\"></p-calendar>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                    <div class=\"p-field col-lg-4 col-sm-4 col-md-12 col-12\">\r\n                                        <label for=\"fname\" class=\"referral-form-labels\">\r\n                                            Type\r\n                                            <span class=\"requiredfield text-danger\">*</span>\r\n                                        </label>\r\n                                        <p-dropdown [disabled]=\"'true'\" [options]=\"photoTypeList\" inputId=\"role\" placeholder=\"Please Select\"\r\n                                            styleClass=\"w-100\" optionLabel=\"label\" optionValue=\"value\" [filter]=\"true\"\r\n                                            formControlName=\"type_code\"\r\n                                            ariaFilterLabel=\"null\" [showClear]=\"true\">\r\n                                            <ng-template let-item pTemplate=\"selectedItem\">\r\n                                                <div pTooltip=\"{{item?.label}}\" tooltipPosition=\"top\"\r\n                                                    class=\"text-truncate\"> {{ item?.label }}</div>\r\n                                            </ng-template>\r\n                                            <ng-template let-object pTemplate=\"item\">\r\n                                                {{ object.label }}\r\n                                            </ng-template>\r\n                                        </p-dropdown>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div class=\"p-fluid p-formgrid row\">\r\n                                    <div class=\"p-field col-lg-6 col-sm-4 col-md-12 col-12\">\r\n                                        <div>\r\n                                            <label for=\"fname\" class=\"referral-form-labels\">\r\n                                                Entered By\r\n                                                <span class=\"requiredfield text-danger\">*</span>\r\n                                            </label>\r\n                                            <input type=\"text\" pInputText placeholder=\"[current user]\"\r\n                                                formControlName=\"entered_by_worker_name\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"p-fluid p-formgrid row\">\r\n                                    <div class=\"p-field col-lg-6 col-sm-4 col-md-12 col-12\">\r\n                                        <label for=\"fname\" class=\"referral-form-labels\">\r\n                                            Description\r\n                                            <span class=\"requiredfield text-danger\">*</span>\r\n                                        </label>\r\n                                        <input type=\"text\" pInputText placeholder=\"Other\"\r\n                                            formControlName=\"description\" />\r\n                                        <div *ngIf=\"description?.errors?.maxlength\">\r\n                                            <div class=\"p-error block mt-1\">Description cannot be more than 100\r\n                                                characters.</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"mt-3\">\r\n                                    <button class=\"pull-right btn btn-primary btncommon\"\r\n                                        [disabled]=\"documentUploadForm.invalid\" (click)=\"sendDocument()\">Save</button>\r\n                                    <button (click)=\"showPopup()\"\r\n                                        class=\"pull-right mr-2 btn btn-white border border-1 border-primary text-primary btncancel\">\r\n                                        {{ isButtonShowHide ? 'Cancel Changes' : 'Cancel' }}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <button class=\"btn btn-primary addImage\" type=\"button\" (click)=\"showPopup()\" [disabled]=\"isViewMode\">+ Add Image</button>\r\n</div>\r\n", styles: [".modal-action-button{width:100px;margin:15px}#myModal{display:block}.modal-content{background-color:#fefefe;margin:auto;padding:10px;border:1px solid #888}.modal-action-button-container{display:inline}.close{font-size:19px!important;position:absolute;top:20px;right:30px;transition:all .2s;font-weight:700;text-decoration:none;color:#333;opacity:.7}.close:hover,.close:focus{text-decoration:none;cursor:pointer}.modal-close{margin-bottom:30px}.overlay{position:fixed;inset:0;background:#0000008f;transition:opacity .5s;z-index:1000}.overlay:target{visibility:visible;opacity:1}.modal{display:block;top:30%;margin:30px auto;width:90%;position:relative;transition:all 5s ease-in-out}p{text-align:center;font-weight:600;margin:20px 0}.doc .drop-container{background:var(--white);border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}.doc .drop-container p{font-size:16px;font-weight:400;color:#c0c4c7}.doc .drop-container p .upload-button{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.doc .drop-container p .upload-button input{display:none}.wizard .nav-tabs>li{width:calc(50% - 5px);padding:10px;background:#585858}.wizard .nav-tabs>li.active{background:#1bbc9b}.wizard .nav-tabs>li:first-child{margin-right:10px}.uploaded-files{overflow:hidden;display:block}.uploaded-form{background:var(--primary-chat-light);padding:0 0 0 5px;margin-bottom:0;border-radius:2px}.uploaded-form .form-control{padding:5px;border:1px solid #ccc;border-radius:3px;margin-bottom:6px;font-size:12px;height:30px}.uploaded-form textarea.form-control{height:115px!important;margin-bottom:0}.uploaded-files h4{margin:15px 0;font-size:15px;text-transform:uppercase;color:#f97054}.uploaded-files .media-body h4{color:var(--black);font-size:12px;margin:4px 0;text-transform:none;font-weight:700}.uploaded-form .progress{height:5px}.uploaded-form a>span{font-size:25px}.uploaded-files .btn-bs-file{position:relative;margin-bottom:0}.uploaded-files .btn-bs-file input[type=file]{position:absolute;top:-9999999;filter:alpha(opacity=0);opacity:0;width:0;height:0;outline:none;cursor:inherit}.uploaded-files .remove-upld{text-align:center;position:relative;min-height:75px}.uploaded-files .remove-upld span{display:inline-block;width:26px;padding:2px 0;border:1px solid #555;border-radius:100%;color:#555;position:absolute;left:28%;cursor:pointer;top:38%}.upload-wrap{max-height:unset;overflow:unset}h6.upldr-name{font-size:11px;margin:0;color:#777;display:inline-block;padding-right:8px}h6.upldr-name:first-child{border-right:1px solid #ccc}.upldr-name span{color:var(--black);font-size:12px;margin-top:3px;display:block}.no-file h6{margin:0;font-size:14px;font-weight:600}.upload-number{text-align:center}:host ::ng-deep .p-component:disabled{opacity:1}.upload-number span{display:inline-block;width:25px;height:25px;padding-top:2px;border:1px solid #777;color:#777;font-size:13px;font-weight:900;border-radius:100%}.block.drop-container{background:#fff;border:2px dashed #585858;padding:15px 0}.block.drop-container p{margin-bottom:0}i.fa.fa-cloud-upload{font-size:30px;cursor:pointer}.btn-bs-file{cursor:pointer}.Persons-Involved h4.modal-header{margin:0 0 5px;padding:0;font-size:15px;border-bottom:0}.uploaded-form .media{margin-top:0}.mh-450{min-height:450px}.required{position:relative}.required:after{color:#d00;content:\"*\";margin-left:5px;top:0;right:3px;position:absolute}.media-heading{display:flex;padding:11px}.media-left{margin:auto}.clsInputDesign{padding:5px;border:1px solid #ccc;border-radius:3px;margin-bottom:6px;font-size:12px;height:30px;white-space:nowrap;background:#fff;overflow:hidden;text-overflow:ellipsis}.photo-upload-title{background:var(--menu-highlight);color:var(--bg-light);padding:10px 15px;text-transform:uppercase;font-weight:500}i.fa.fa-question-circle{color:var(--primary);font-size:11px}.progress-wrap{position:relative}.progress-wrap h6{margin-bottom:0}.progress-wrap span{padding-right:30px;text-align:right}.progress-wrap h6,.progress-wrap span{font-size:14px;font-weight:400;width:60%;word-wrap:break-word}.progress-wrap a.progress-close{position:absolute;right:0;color:red;top:-2px}.progress-wrap .progress{height:5px;background-color:#d9d9d9;border-radius:0}.progress-wrap .progress .bg-info{background-color:#1b7bb7}.upload-image-preview{width:100%;height:285px;max-height:285px;object-fit:contain;object-position:center center;background-color:#f9f9f9}.mtc-2{margin-top:2rem!important}.g-checkbox input[type=checkbox]:disabled:before{display:none}\n"] });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: YouthFileUploadWrapperComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-youth-file-upload-wrapper', template: "<div>\r\n    <div *ngIf=\"display\" class=\"overlay\">\r\n        <div id=\"myModal\" class=\"modal uploadPopup\">\r\n          <div class=\"modal-dialog modal-xl\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-6 col-lg-4 col-xl-4 mb-2\">\r\n                        <div class=\"uploaded-files mb-3\">\r\n                            <div class=\"upload-sec\">\r\n                                <div class=\"block drop-container\" [hidden]=\"isImageUploaded\" #file\r\n                                    (ngxf-drop)=\"uploadFile($event)\" (ngxf-select)=\"uploadFile($event)\"\r\n                                    drop-class=\"drop\" [ngxf-validate]=\"{ size: { min: 5 } }\" multiple>\r\n                                    <i class=\"fa fa-cloud-upload mb-2\" aria-hidden=\"true\"></i>\r\n                                    <p>Drag and Drop or <a href=\"javascript:;\">Browse</a></p>\r\n                                    <p class=\"mt-5\">Max file size 3MB <br> Supported formats: JPG, JPEG, PNG, JFIF</p>\r\n                                </div>\r\n                                <div [hidden]=\"!isImageUploaded\">\r\n                                    <img class=\"upload-image-preview\" [src]=\"imgUrl2\" alt=\"Youth Image\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"progress-wrap\">\r\n                            <div class=\"d-flex justify-content-between mb-1\">\r\n                                <h6>{{fileName}}</h6>\r\n                                <span [hidden]=\"isEditMode\">{{fileSize}}/3MB</span>\r\n                                <a href=\"javascript:;\" class=\"progress-close\" (click)=\"clearImage()\">\r\n                                    <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n                                </a>\r\n                            </div>\r\n                            <div class=\"progress\">\r\n                                <div class=\"progress-bar bg-info\" role=\"progressbar\"\r\n                                    [style.width.%]=\"fileSizeRaw / 3072 * 100\" [attr.aria-valuenow]=\"fileSizeRaw\"\r\n                                    aria-valuemin=\"0\" aria-valuemax=\"3072\"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-lg-8 col-md-6 col-xl-8\">\r\n                        <div class=\"upload-wrap dd-overflow-inherit\" [formGroup]=\"documentUploadForm\">\r\n                            <div class=\"uploaded-form\">\r\n                                <div class=\"p-fluid p-formgrid row\">\r\n                                    <div class=\"p-field col-lg-4 col-sm-4 col-md-12 col-12\">\r\n                                        <label for=\"fname\" class=\"referral-form-labels\">\r\n                                            Entered Date\r\n                                            <span class=\"requiredfield text-danger\">*</span>\r\n                                        </label>\r\n                                        <p-calendar type=\"date\" formControlName=\"entered_date\"\r\n                                            placeholder=\"[current date]\" [selectOtherMonths]=\"true\" [showIcon]=\"true\"\r\n                                            [showOnFocus]=\"false\"></p-calendar>\r\n                                    </div>\r\n                                    <div class=\"p-field col-lg-4 col-sm-4 col-md-12 col-12\">\r\n                                        <div>\r\n                                            <label for=\"fname\" class=\"referral-form-labels\">\r\n                                                Photo Date\r\n                                                <span class=\"requiredfield text-danger\">*</span>\r\n                                            </label>\r\n                                            <p-calendar type=\"date\" formControlName=\"photo_date\"\r\n                                                placeholder=\"MM/DD/YYYY\" [selectOtherMonths]=\"true\" [showIcon]=\"true\"\r\n                                                [maxDate]=\"maxDate\" [showOnFocus]=\"false\"></p-calendar>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                    <div class=\"p-field col-lg-4 col-sm-4 col-md-12 col-12\">\r\n                                        <label for=\"fname\" class=\"referral-form-labels\">\r\n                                            Type\r\n                                            <span class=\"requiredfield text-danger\">*</span>\r\n                                        </label>\r\n                                        <p-dropdown [disabled]=\"'true'\" [options]=\"photoTypeList\" inputId=\"role\" placeholder=\"Please Select\"\r\n                                            styleClass=\"w-100\" optionLabel=\"label\" optionValue=\"value\" [filter]=\"true\"\r\n                                            formControlName=\"type_code\"\r\n                                            ariaFilterLabel=\"null\" [showClear]=\"true\">\r\n                                            <ng-template let-item pTemplate=\"selectedItem\">\r\n                                                <div pTooltip=\"{{item?.label}}\" tooltipPosition=\"top\"\r\n                                                    class=\"text-truncate\"> {{ item?.label }}</div>\r\n                                            </ng-template>\r\n                                            <ng-template let-object pTemplate=\"item\">\r\n                                                {{ object.label }}\r\n                                            </ng-template>\r\n                                        </p-dropdown>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div class=\"p-fluid p-formgrid row\">\r\n                                    <div class=\"p-field col-lg-6 col-sm-4 col-md-12 col-12\">\r\n                                        <div>\r\n                                            <label for=\"fname\" class=\"referral-form-labels\">\r\n                                                Entered By\r\n                                                <span class=\"requiredfield text-danger\">*</span>\r\n                                            </label>\r\n                                            <input type=\"text\" pInputText placeholder=\"[current user]\"\r\n                                                formControlName=\"entered_by_worker_name\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"p-fluid p-formgrid row\">\r\n                                    <div class=\"p-field col-lg-6 col-sm-4 col-md-12 col-12\">\r\n                                        <label for=\"fname\" class=\"referral-form-labels\">\r\n                                            Description\r\n                                            <span class=\"requiredfield text-danger\">*</span>\r\n                                        </label>\r\n                                        <input type=\"text\" pInputText placeholder=\"Other\"\r\n                                            formControlName=\"description\" />\r\n                                        <div *ngIf=\"description?.errors?.maxlength\">\r\n                                            <div class=\"p-error block mt-1\">Description cannot be more than 100\r\n                                                characters.</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"mt-3\">\r\n                                    <button class=\"pull-right btn btn-primary btncommon\"\r\n                                        [disabled]=\"documentUploadForm.invalid\" (click)=\"sendDocument()\">Save</button>\r\n                                    <button (click)=\"showPopup()\"\r\n                                        class=\"pull-right mr-2 btn btn-white border border-1 border-primary text-primary btncancel\">\r\n                                        {{ isButtonShowHide ? 'Cancel Changes' : 'Cancel' }}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <button class=\"btn btn-primary addImage\" type=\"button\" (click)=\"showPopup()\" [disabled]=\"isViewMode\">+ Add Image</button>\r\n</div>\r\n", styles: [".modal-action-button{width:100px;margin:15px}#myModal{display:block}.modal-content{background-color:#fefefe;margin:auto;padding:10px;border:1px solid #888}.modal-action-button-container{display:inline}.close{font-size:19px!important;position:absolute;top:20px;right:30px;transition:all .2s;font-weight:700;text-decoration:none;color:#333;opacity:.7}.close:hover,.close:focus{text-decoration:none;cursor:pointer}.modal-close{margin-bottom:30px}.overlay{position:fixed;inset:0;background:#0000008f;transition:opacity .5s;z-index:1000}.overlay:target{visibility:visible;opacity:1}.modal{display:block;top:30%;margin:30px auto;width:90%;position:relative;transition:all 5s ease-in-out}p{text-align:center;font-weight:600;margin:20px 0}.doc .drop-container{background:var(--white);border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}.doc .drop-container p{font-size:16px;font-weight:400;color:#c0c4c7}.doc .drop-container p .upload-button{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.doc .drop-container p .upload-button input{display:none}.wizard .nav-tabs>li{width:calc(50% - 5px);padding:10px;background:#585858}.wizard .nav-tabs>li.active{background:#1bbc9b}.wizard .nav-tabs>li:first-child{margin-right:10px}.uploaded-files{overflow:hidden;display:block}.uploaded-form{background:var(--primary-chat-light);padding:0 0 0 5px;margin-bottom:0;border-radius:2px}.uploaded-form .form-control{padding:5px;border:1px solid #ccc;border-radius:3px;margin-bottom:6px;font-size:12px;height:30px}.uploaded-form textarea.form-control{height:115px!important;margin-bottom:0}.uploaded-files h4{margin:15px 0;font-size:15px;text-transform:uppercase;color:#f97054}.uploaded-files .media-body h4{color:var(--black);font-size:12px;margin:4px 0;text-transform:none;font-weight:700}.uploaded-form .progress{height:5px}.uploaded-form a>span{font-size:25px}.uploaded-files .btn-bs-file{position:relative;margin-bottom:0}.uploaded-files .btn-bs-file input[type=file]{position:absolute;top:-9999999;filter:alpha(opacity=0);opacity:0;width:0;height:0;outline:none;cursor:inherit}.uploaded-files .remove-upld{text-align:center;position:relative;min-height:75px}.uploaded-files .remove-upld span{display:inline-block;width:26px;padding:2px 0;border:1px solid #555;border-radius:100%;color:#555;position:absolute;left:28%;cursor:pointer;top:38%}.upload-wrap{max-height:unset;overflow:unset}h6.upldr-name{font-size:11px;margin:0;color:#777;display:inline-block;padding-right:8px}h6.upldr-name:first-child{border-right:1px solid #ccc}.upldr-name span{color:var(--black);font-size:12px;margin-top:3px;display:block}.no-file h6{margin:0;font-size:14px;font-weight:600}.upload-number{text-align:center}:host ::ng-deep .p-component:disabled{opacity:1}.upload-number span{display:inline-block;width:25px;height:25px;padding-top:2px;border:1px solid #777;color:#777;font-size:13px;font-weight:900;border-radius:100%}.block.drop-container{background:#fff;border:2px dashed #585858;padding:15px 0}.block.drop-container p{margin-bottom:0}i.fa.fa-cloud-upload{font-size:30px;cursor:pointer}.btn-bs-file{cursor:pointer}.Persons-Involved h4.modal-header{margin:0 0 5px;padding:0;font-size:15px;border-bottom:0}.uploaded-form .media{margin-top:0}.mh-450{min-height:450px}.required{position:relative}.required:after{color:#d00;content:\"*\";margin-left:5px;top:0;right:3px;position:absolute}.media-heading{display:flex;padding:11px}.media-left{margin:auto}.clsInputDesign{padding:5px;border:1px solid #ccc;border-radius:3px;margin-bottom:6px;font-size:12px;height:30px;white-space:nowrap;background:#fff;overflow:hidden;text-overflow:ellipsis}.photo-upload-title{background:var(--menu-highlight);color:var(--bg-light);padding:10px 15px;text-transform:uppercase;font-weight:500}i.fa.fa-question-circle{color:var(--primary);font-size:11px}.progress-wrap{position:relative}.progress-wrap h6{margin-bottom:0}.progress-wrap span{padding-right:30px;text-align:right}.progress-wrap h6,.progress-wrap span{font-size:14px;font-weight:400;width:60%;word-wrap:break-word}.progress-wrap a.progress-close{position:absolute;right:0;color:red;top:-2px}.progress-wrap .progress{height:5px;background-color:#d9d9d9;border-radius:0}.progress-wrap .progress .bg-info{background-color:#1b7bb7}.upload-image-preview{width:100%;height:285px;max-height:285px;object-fit:contain;object-position:center center;background-color:#f9f9f9}.mtc-2{margin-top:2rem!important}.g-checkbox input[type=checkbox]:disabled:before{display:none}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: i1.LocalService }, { type: i2.FormBuilder }, { type: i3.HttpService }, { type: i4.DataStoreService }]; }, propDecorators: { value: [{
                type: Input
            }], label: [{
                type: Input
            }], valueChange: [{
                type: Output
            }], formioEvent: [{
                type: Output
            }], fileInput: [{
                type: ViewChild,
                args: ['file']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieW91dGgtZmlsZS11cGxvYWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGljcy1jb3JlL2R5bmFtaWMvc3JjL2xpYi9waWNzLWR5bmFtaWMvQHNoYXJlZC95b3V0aC1maWxlLXVwbG9hZC1wb3B1cC95b3V0aC1maWxlLXVwbG9hZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9waWNzLWNvcmUvZHluYW1pYy9zcmMvbGliL3BpY3MtZHluYW1pYy9Ac2hhcmVkL3lvdXRoLWZpbGUtdXBsb2FkLXBvcHVwL3lvdXRoLWZpbGUtdXBsb2FkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBb0IsU0FBUyxFQUFjLFlBQVksRUFBWSxLQUFLLEVBQVUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsSSxPQUFPLEVBQWlDLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRzNFLE9BQU8sTUFBTSxNQUFNLGVBQWUsQ0FBQztBQUVuQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDbkUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1DQUFtQyxDQUFDOzs7Ozs7QUFhakUsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN6QixNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDcEMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQy9CLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNqQyxNQUFNLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3RELE1BQU0sV0FBVyxHQUFHLFlB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RyxLQUFLLENBQUM7U0FFeEI7UUFDRCxPQUFPLENBQUMsRUFBRTtZQUNOLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDL0M7SUFDTCxDQUFDO3dHQTVOUSwrQkFBK0I7NEZBQS9CLCtCQUErQix5UkNoQzVDLDJ6UkE2SEE7OzRGRDdGYSwrQkFBK0I7a0JBTDNDLFNBQVM7K0JBQ0ksK0JBQStCOzZNQU1oQyxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csS0FBSztzQkFBYixLQUFLO2dCQUNJLFdBQVc7c0JBQXBCLE1BQU07Z0JBRVAsV0FBVztzQkFEVixNQUFNO2dCQUdQLFNBQVM7c0JBRFIsU0FBUzt1QkFBQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3Q2hlY2tlZCwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEluamVjdG9yLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGb3JtQnVpbGRlciwgVW50eXBlZEZvcm1Hcm91cCwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgRm9ybWlvQ3VzdG9tQ29tcG9uZW50LCBGb3JtaW9FdmVudCB9IGZyb20gJy4uLy4uL0BzaGFyZWQvY3VzdG9tLWNvbXBvbmVudC9lbGVtZW50cy5jb21tb24nO1xyXG5pbXBvcnQgeyBMb2NhbFNlcnZpY2UgfSBmcm9tICcuLi8uLi9AY29yZS9zZXJ2aWNlL2xvY2FsLnNlcnZpY2UnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudC9tb21lbnQnOyBcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICcuLi8uLi9AY29yZS9zZXJ2aWNlL2h0dHAuc2VydmljZSc7XHJcbmltcG9ydCB7IExvYWRlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9AY29yZS9zZXJ2aWNlL2xvYWRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQWxlcnRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vQGNvcmUvc2VydmljZS9hbGVydC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRm9ybWlvLCBGb3JtaW9CYXNlQ29tcG9uZW50IH0gZnJvbSAnYW5ndWxhci1mb3JtaW8nO1xyXG5pbXBvcnQgeyBBdXRoU2VydmljZSB9IGZyb20gJy4uLy4uL0Bjb3JlL3NlcnZpY2UvYXV0aC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29tcG9uZW50cyB9IGZyb20gJ2Zvcm1pb2pzJztcclxuaW1wb3J0IHsgRGF0YVN0b3JlU2VydmljZSB9IGZyb20gJy4uLy4uL0Bjb3JlL3NlcnZpY2UvZGF0YS1zdG9yZS5zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGF0ZVJhbmdlIHtcclxuICAgIHN0YXJ0RGF0ZUtleTogc3RyaW5nO1xyXG4gICAgc3RhcnREYXRlOiBzdHJpbmc7XHJcbiAgICBlbmREYXRlS2V5OiBzdHJpbmc7XHJcbiAgICBlbmREYXRlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuY29uc3QgY3VycmVudERhdGUgPSB0b2RheS5nZXREYXRlKCk7XHJcbmNvbnN0IG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKTtcclxuY29uc3QgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XHJcbmNvbnN0IGN1cnJlbnREYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgY3VycmVudERhdGUpO1xyXG5jb25zdCBEQVRFX0ZPUk1BVCA9ICdZWVlZLU1NLUREJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdhcHAteW91dGgtZmlsZS11cGxvYWQtd3JhcHBlcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4veW91dGgtZmlsZS11cGxvYWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4veW91dGgtZmlsZS11cGxvYWQuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgWW91dGhGaWxlVXBsb2FkV3JhcHBlckNvbXBvbmVudCBpbXBsZW1lbnRzIEZvcm1pb0N1c3RvbUNvbXBvbmVudDxhbnk+LCBPbkluaXQsIEFmdGVyVmlld0NoZWNrZWQge1xyXG5cclxuICAgIEBJbnB1dCgpIHZhbHVlOiBhbnk7IC8vIFZhbHVlIGZyb20gdGhlIGZvcm1cclxuICAgIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmc7IC8vIExhYmVsIGZvciB0aGUgY3VzdG9tIGNvbXBvbmVudFxyXG4gICAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpOyAvLyBPdXRwdXQgdG8gc2VuZCBkYXRhIGJhY2sgdG8gZm9ybVxyXG4gICAgQE91dHB1dCgpXHJcbiAgICBmb3JtaW9FdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8Rm9ybWlvRXZlbnQ+KCk7XHJcbiAgICBAVmlld0NoaWxkKCdmaWxlJylcclxuICAgIGZpbGVJbnB1dDogRWxlbWVudFJlZjtcclxuICAgIGRpc3BsYXkgPSBmYWxzZTtcclxuICAgIHBob3RvVHlwZUxpc3Q6IGFueTtcclxuICAgIGRvY3VtZW50VXBsb2FkRm9ybTogVW50eXBlZEZvcm1Hcm91cDtcclxuICAgIGFsZXJ0U2VydmljZTogQWxlcnRTZXJ2aWNlO1xyXG4gICAgaW1hZ2VIZWlnaHQ6IG51bWJlcjtcclxuICAgIGltYWdlV2lkdGg6IG51bWJlcjtcclxuICAgIGZpbGVOYW1lOiBhbnkgPSAnJztcclxuICAgIGZpbGVTaXplOiBhbnkgPSAwO1xyXG4gICAgaXNJbWFnZVVwbG9hZGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBmaWxlTmFtZVBhdGg6IHN0cmluZztcclxuICAgIGltZ1VybDogYW55O1xyXG4gICAgaW1nVXJsMjogYW55O1xyXG4gICAgbG9hZGVyU2VydmljZTogTG9hZGVyU2VydmljZTtcclxuICAgIGZpbGVTaXplUmF3OiBudW1iZXI7XHJcbiAgICB5b3V0aElkOiBzdHJpbmc7XHJcbiAgICBzZXREZXNjaXJwdGlvblRleHQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBpc1ZpZXdNb2RlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBzaGFyZWRJbmZvOiBhbnkgPSB7fTtcclxuICAgIHlvdXRoUGhvdG9TZXJ2aWNlOmFueTtcclxuICAgIGF1dGhTZXJ2aWNlOmFueVxyXG4gICAgbWF4RGF0ZTogYW55XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICAgICAgcHJpdmF0ZSBsb2NhbFN0b3JlU2VydmljZTogTG9jYWxTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyLFxyXG4gICAgICAgIHByaXZhdGUgaHR0cFNlcnZpY2U6IEh0dHBTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgX3N0b3Jlc2VydmljZTpEYXRhU3RvcmVTZXJ2aWNlXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLl9zdG9yZXNlcnZpY2UuY3VycmVudFN0b3JlLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoU2VydmljZSA9IHJlc1snQVVUSFNFUlZJQ0UnXTtcclxuICAgICAgICAgICAgICAgIHRoaXMueW91dGhQaG90b1NlcnZpY2UgPSByZXNbJ1lPVVRIUEhPVE9TRVJWSUNFJ10gICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnNoYXJlZEluZm8gPSB0aGlzLmF1dGhTZXJ2aWNlLmdldFNoYXJlZE1lc3NhZ2UoKTtcclxuICAgICAgICB0aGlzLnBob3RvVHlwZUxpc3QgPSBbXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdTQ1InLCBsYWJlbDogJ1NjYXIsIE1hcmsgb3IgVGF0dG9vJyB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLmFsZXJ0U2VydmljZSA9IGluamVjdG9yLmdldDxBbGVydFNlcnZpY2U+KEFsZXJ0U2VydmljZSk7XHJcbiAgICAgICAgdGhpcy5sb2FkZXJTZXJ2aWNlID0gaW5qZWN0b3IuZ2V0PExvYWRlclNlcnZpY2U+KExvYWRlclNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubWF4RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICB9XHJcbiAgICBkaXNhYmxlZDogYm9vbGVhbjtcclxuXHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZ3JpZEFjdGlvbicpID09PSAndmlldycpe1xyXG4gICAgICAgICAgICB0aGlzLmlzVmlld01vZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhc3luYyBzaG93UG9wdXAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtaW9FdmVudC5lbWl0KHsgZXZlbnROYW1lOiAnY3VzdG9tRXZlbnQnLCBkYXRhOiB7IHZhbHVlOiB7fSwgdHlwZTogJ3lvdXRoZmlsZXVwbG9hZCcgfSB9KTtcclxuICAgICAgICBjb25zdCB2YWx1ZWNoZWNrID0gdGhpcy5hdXRoU2VydmljZS5nZXRTaGFyZWRNZXNzYWdlKCk7XHJcbiAgICAgICAgaWYgKHZhbHVlY2hlY2sgJiYgdmFsdWVjaGVjaykge1xyXG4gICAgICAgICAgICBjb25zdCBnZXRWYWx1ZSA9IHZhbHVlY2hlY2s/LmRhdGFHcmlkQ29tcG9uZW50WzBdO1xyXG4gICAgICAgICAgICB0aGlzLnlvdXRoSWQgPSB2YWx1ZWNoZWNrPy55b3V0aF9pZDtcclxuICAgICAgICAgICAgY29uc3QgbG9va3VwTWFyayA9IGF3YWl0IHRoaXMueW91dGhQaG90b1NlcnZpY2UuZ2V0UGh5c2ljYWxNYXJrRGVzY3JpcHRpb24oJ01BUksnKS50b1Byb21pc2UoKS50aGVuKHJlc3BvbnNlPT57cmV0dXJuIHJlc3BvbnNlW1wiZGF0YVwiXX0pO1xyXG4gICAgICAgICAgICBjb25zdCBsb29rdXBTaWRlID0gYXdhaXQgdGhpcy55b3V0aFBob3RvU2VydmljZS5nZXRQaHlzaWNhbE1hcmtEZXNjcmlwdGlvbignU0lERScpLnRvUHJvbWlzZSgpLnRoZW4ocmVzcG9uc2U9PntyZXR1cm4gcmVzcG9uc2VbXCJkYXRhXCJdfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvb2t1cFBhcnQgPSBhd2FpdCB0aGlzLnlvdXRoUGhvdG9TZXJ2aWNlLmdldFBoeXNpY2FsTWFya0Rlc2NyaXB0aW9uKCdQQVJUJykudG9Qcm9taXNlKCkudGhlbihyZXNwb25zZT0+e3JldHVybiByZXNwb25zZVtcImRhdGFcIl19KTtcclxuICAgICAgICAgICAgbGV0IG1hcmtEZXNjcmlwdGlvbiA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgc2lkZURlc2NyaXB0aW9uID0gW107XHJcbiAgICAgICAgICAgIGxldCBwYXJ0RGVzY3JpcHRpb24gPSBbXTtcclxuICAgICAgICAgICAgaWYobG9va3VwTWFyay5sZW5ndGggfHwgbG9va3VwU2lkZS5sZW5ndGggfHwgbG9va3VwUGFydC5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgbWFya0Rlc2NyaXB0aW9uID0gbG9va3VwTWFyay5maWx0ZXIodmFsdWUgPT4gdmFsdWUuY29kZSA9PT0gZ2V0VmFsdWU/Ll9kYXRhPy5waHlzaWNhbG1hcms/Lm1hcmtfdHlwZV9jb2RlKTtcclxuICAgICAgICAgICAgICAgIHNpZGVEZXNjcmlwdGlvbiA9IGxvb2t1cFNpZGUuZmlsdGVyKHZhbHVlID0+IHZhbHVlLmNvZGUgPT09IGdldFZhbHVlPy5fZGF0YT8ucGh5c2ljYWxtYXJrPy5ib2R5X3NpZGVfY29kZSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0RGVzY3JpcHRpb24gPSBsb29rdXBQYXJ0LmZpbHRlcih2YWx1ZSA9PiB2YWx1ZS5jb2RlID09PSBnZXRWYWx1ZT8uX2RhdGE/LnBoeXNpY2FsbWFyaz8uYm9keV9wYXJ0X2NvZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIG1hcmtEZXNjcmlwdGlvbi5sZW5ndGggPyBtYXJrRGVzY3JpcHRpb25bMF0uZGVzY3JpcHRpb24gOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcGFydERlc2NyaXB0aW9uLmxlbmd0aCA/IHBhcnREZXNjcmlwdGlvblswXS5kZXNjcmlwdGlvbiA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzaWRlRGVzY3JpcHRpb24ubGVuZ3RoID8gc2lkZURlc2NyaXB0aW9uWzBdLmRlc2NyaXB0aW9uIDogXCJcIixcclxuICAgICAgICAgICAgICAgIGdldFZhbHVlPy5fZGF0YT8ucGh5c2ljYWxtYXJrPy5kZXNpZ24gfHwgXCJcIlxyXG4gICAgICAgICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pOyAvLyBGaWx0ZXIgb3V0IGVtcHR5IHN0cmluZ3NcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5zZXREZXNjaXJwdGlvblRleHQgPSBkZXNjcmlwdGlvbnMuam9pbignOyAnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gIXRoaXMuZGlzcGxheTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInZhbHVlY2hlY2tcIiwgdmFsdWVjaGVjaylcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVEb2N1bWVudFVwbG9hZEZvcm0oKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdGlhbGl6ZURvY3VtZW50VXBsb2FkRm9ybSgpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBKU09OLnBhcnNlKHRoaXMubG9jYWxTdG9yZVNlcnZpY2UuZ2V0SXRlbSgndXNlcicpKTtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSB0aGlzLmxvY2FsU3RvcmVTZXJ2aWNlLmdldEl0ZW0oJ2lkJylcclxuICAgICAgICB0aGlzLmRvY3VtZW50VXBsb2FkRm9ybSA9IHRoaXMuZm9ybUJ1aWxkZXIuZ3JvdXAoe1xyXG4gICAgICAgICAgICBlbnRlcmVkX2RhdGU6IFt7IHZhbHVlOiBjdXJyZW50RGF0ZSwgZGlzYWJsZWQ6IHRydWUgfSwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXHJcbiAgICAgICAgICAgIHR5cGVfY29kZTogW3sgdmFsdWU6ICdTQ1InLCBkaXNhYmxlZDogdHJ1ZSB9LCBWYWxpZGF0b3JzLnJlcXVpcmVkXSxcclxuICAgICAgICAgICAgcGhvdG9fZGF0ZTogW2N1cnJlbnREYXRlLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSxcclxuICAgICAgICAgICAgZW50ZXJlZF9ieV93b3JrZXJfbmFtZTogW3sgdmFsdWU6IGAke3VzZXJuYW1lLmxhc3RuYW1lfSwgJHt1c2VybmFtZS5maXJzdG5hbWV9JHt1c2VybmFtZS5taWRkbGVuYW1lID8gJyAnICsgdXNlcm5hbWUubWlkZGxlbmFtZSA6ICcnfWAsIGRpc2FibGVkOiB0cnVlIH1dLFxyXG4gICAgICAgICAgICBlbnRlcmVkX2J5X3dvcmtlcl9pZDogW2Ake3VzZXJJZH1gXSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFt7IHZhbHVlOiB0aGlzLnNldERlc2NpcnB0aW9uVGV4dCwgZGlzYWJsZWQ6IHRydWUgfSwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXHJcbiAgICAgICAgICAgIHVybF9waWM6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGxvYWRGaWxlKGZpbGVWYWx1ZTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IGZpbGVWYWx1ZVswXTtcclxuXHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZURvY3VtZW50KGZpbGUpLnRoZW4oaXNWYWxpZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZpbGVWYWx1ZVswXS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lUGF0aFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMueW91dGhQaG90b1NlcnZpY2UudXBsb2FkS2V5KGltYWdlRGF0YSkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRVcGxvYWRGb3JtLnBhdGNoVmFsdWUoeyB1cmxfcGljOiB0aGlzLmZpbGVOYW1lUGF0aCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmh0dHBTZXJ2aWNlLnB1dFVwbG9hZChyZXMuZGF0YSwgZmlsZSwgZmlsZS50eXBlKS5zdWJzY3JpYmUoKHJlc3A6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1VybDIgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0ltYWdlVXBsb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIChfZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydFNlcnZpY2UuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nLicpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlRG9jdW1lbnQoZmlsZTogYW55KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZVNpemUgPSBOdW1iZXIoZmlsZS5zaXplKSAvIDEwMjQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGV0eXBlID0gZmlsZS50eXBlLnNwbGl0KCcvJylbMV07XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lTGVuZ3RoID0gZmlsZS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZXJTZXJ2aWNlLnNob3coKTtcclxuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVyU2VydmljZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZXR5cGUgIT09ICdqcGcnICYmIGZpbGV0eXBlICE9PSAnanBlZycgJiYgZmlsZXR5cGUgIT09ICdwbmcnICYmIGZpbGV0eXBlICE9PSAnamZpZicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0U2VydmljZS5lcnJvcihgSlBHLCBKUEVHLCBQTkcgJiBKRklGIGFyZSBzdXBwb3J0ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlTmFtZUxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLndhcm4oJ1RoZSBmaWxlbmFtZSBpcyB0b28gbG9uZy4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlV2lkdGggPSBpbWcud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZUhlaWdodCA9IGltZy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVTaXplIDw9IDMwNzIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlTmFtZSA9IGZpbGUubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlU2l6ZVJhdyA9IHBhcnNlRmxvYXQoZmlsZVNpemUudG9GaXhlZCgxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZVNpemUgPSB0aGlzLmdldEZpbGVTaXplKHBhcnNlRmxvYXQoZmlsZVNpemUudG9GaXhlZCgxKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVOYW1lUGF0aCA9IGB5b3V0aC1waG90by8ke3RoaXMueW91dGhJZH0vJHttb21lbnQoKS52YWx1ZU9mKCl9LSR7dGhpcy5maWxlTmFtZS5yZXBsYWNlQWxsKCcgJywgJycpfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlSW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLndhcm4oJ0ZpbGUgc2l6ZSBleGNlZWRzIDNNQiBsaW1pdC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0RGF0YSgpIHtcclxuICAgICAgICB0aGlzLmRvY3VtZW50VXBsb2FkRm9ybS5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuZmlsZVNpemUgPSAwO1xyXG4gICAgICAgIHRoaXMuZmlsZVNpemVSYXcgPSAwO1xyXG4gICAgICAgIHRoaXMuZmlsZU5hbWUgPSAnJztcclxuICAgICAgICB0aGlzLmlzSW1hZ2VVcGxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZmlsZU5hbWVQYXRoID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmlsZVNpemUoZmlsZVNpemUpIHtcclxuICAgICAgICBpZiAoZmlsZVNpemUgPiAxMDI0KSB7XHJcbiAgICAgICAgICAgIGZpbGVTaXplID0gZmlsZVNpemUgLyAxMDI0O1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7ZmlsZVNpemUudG9GaXhlZCgyKX0gTUJgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGAke2ZpbGVTaXplLnRvRml4ZWQoMil9IEtCYFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckltYWdlKCkge1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRVcGxvYWRGb3JtLnBhdGNoVmFsdWUoeyB1cmxfcGljOiAnJyB9KTtcclxuICAgICAgICB0aGlzLmZpbGVOYW1lID0gJyc7XHJcbiAgICAgICAgdGhpcy5maWxlU2l6ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5maWxlU2l6ZVJhdyA9IDA7XHJcbiAgICAgICAgdGhpcy5pc0ltYWdlVXBsb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyB0aGlzLmlzRWRpdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmltZ1VybDIgPSAnJztcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2VuZERvY3VtZW50KCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50VXBsb2FkRm9ybSA9IHRoaXMuZG9jdW1lbnRVcGxvYWRGb3JtLmdldFJhd1ZhbHVlKCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBkb2N1bWVudFVwbG9hZEZvcm07XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChkb2N1bWVudFVwbG9hZEZvcm0pO1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1pb0V2ZW50LmVtaXQoeyBldmVudE5hbWU6ICdjdXN0b21FdmVudCcsIGRhdGE6IHsgdmFsdWU6IHsgZG9jdW1lbnRVcGxvYWRGb3JtIH0sIHR5cGU6ICdzZXRZb3V0aEZpbGVVcGxvYWREYXRhJyB9IH0pO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBpbiBzZW5kIGRvY3VtZW50OiAke2V9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iLCI8ZGl2PlxyXG4gICAgPGRpdiAqbmdJZj1cImRpc3BsYXlcIiBjbGFzcz1cIm92ZXJsYXlcIj5cclxuICAgICAgICA8ZGl2IGlkPVwibXlNb2RhbFwiIGNsYXNzPVwibW9kYWwgdXBsb2FkUG9wdXBcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2cgbW9kYWwteGxcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgY29sLWxnLTQgY29sLXhsLTQgbWItMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidXBsb2FkZWQtZmlsZXMgbWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVwbG9hZC1zZWNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmxvY2sgZHJvcC1jb250YWluZXJcIiBbaGlkZGVuXT1cImlzSW1hZ2VVcGxvYWRlZFwiICNmaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuZ3hmLWRyb3ApPVwidXBsb2FkRmlsZSgkZXZlbnQpXCIgKG5neGYtc2VsZWN0KT1cInVwbG9hZEZpbGUoJGV2ZW50KVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3AtY2xhc3M9XCJkcm9wXCIgW25neGYtdmFsaWRhdGVdPVwieyBzaXplOiB7IG1pbjogNSB9IH1cIiBtdWx0aXBsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1jbG91ZC11cGxvYWQgbWItMlwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+RHJhZyBhbmQgRHJvcCBvciA8YSBocmVmPVwiamF2YXNjcmlwdDo7XCI+QnJvd3NlPC9hPjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJtdC01XCI+TWF4IGZpbGUgc2l6ZSAzTUIgPGJyPiBTdXBwb3J0ZWQgZm9ybWF0czogSlBHLCBKUEVHLCBQTkcsIEpGSUY8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBbaGlkZGVuXT1cIiFpc0ltYWdlVXBsb2FkZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cInVwbG9hZC1pbWFnZS1wcmV2aWV3XCIgW3NyY109XCJpbWdVcmwyXCIgYWx0PVwiWW91dGggSW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLXdyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gbWItMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNj57e2ZpbGVOYW1lfX08L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIFtoaWRkZW5dPVwiaXNFZGl0TW9kZVwiPnt7ZmlsZVNpemV9fS8zTUI8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwicHJvZ3Jlc3MtY2xvc2VcIiAoY2xpY2spPVwiY2xlYXJJbWFnZSgpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyIGJnLWluZm9cIiByb2xlPVwicHJvZ3Jlc3NiYXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc3R5bGUud2lkdGguJV09XCJmaWxlU2l6ZVJhdyAvIDMwNzIgKiAxMDBcIiBbYXR0ci5hcmlhLXZhbHVlbm93XT1cImZpbGVTaXplUmF3XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwiMzA3MlwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbGctOCBjb2wtbWQtNiBjb2wteGwtOFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidXBsb2FkLXdyYXAgZGQtb3ZlcmZsb3ctaW5oZXJpdFwiIFtmb3JtR3JvdXBdPVwiZG9jdW1lbnRVcGxvYWRGb3JtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidXBsb2FkZWQtZm9ybVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLWZsdWlkIHAtZm9ybWdyaWQgcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLWZpZWxkIGNvbC1sZy00IGNvbC1zbS00IGNvbC1tZC0xMiBjb2wtMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJmbmFtZVwiIGNsYXNzPVwicmVmZXJyYWwtZm9ybS1sYWJlbHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbnRlcmVkIERhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlcXVpcmVkZmllbGQgdGV4dC1kYW5nZXJcIj4qPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwLWNhbGVuZGFyIHR5cGU9XCJkYXRlXCIgZm9ybUNvbnRyb2xOYW1lPVwiZW50ZXJlZF9kYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIltjdXJyZW50IGRhdGVdXCIgW3NlbGVjdE90aGVyTW9udGhzXT1cInRydWVcIiBbc2hvd0ljb25dPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Nob3dPbkZvY3VzXT1cImZhbHNlXCI+PC9wLWNhbGVuZGFyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtZmllbGQgY29sLWxnLTQgY29sLXNtLTQgY29sLW1kLTEyIGNvbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZm5hbWVcIiBjbGFzcz1cInJlZmVycmFsLWZvcm0tbGFiZWxzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBob3RvIERhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXF1aXJlZGZpZWxkIHRleHQtZGFuZ2VyXCI+Kjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwLWNhbGVuZGFyIHR5cGU9XCJkYXRlXCIgZm9ybUNvbnRyb2xOYW1lPVwicGhvdG9fZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTU0vREQvWVlZWVwiIFtzZWxlY3RPdGhlck1vbnRoc109XCJ0cnVlXCIgW3Nob3dJY29uXT1cInRydWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWF4RGF0ZV09XCJtYXhEYXRlXCIgW3Nob3dPbkZvY3VzXT1cImZhbHNlXCI+PC9wLWNhbGVuZGFyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtZmllbGQgY29sLWxnLTQgY29sLXNtLTQgY29sLW1kLTEyIGNvbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImZuYW1lXCIgY2xhc3M9XCJyZWZlcnJhbC1mb3JtLWxhYmVsc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlcXVpcmVkZmllbGQgdGV4dC1kYW5nZXJcIj4qPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwLWRyb3Bkb3duIFtkaXNhYmxlZF09XCIndHJ1ZSdcIiBbb3B0aW9uc109XCJwaG90b1R5cGVMaXN0XCIgaW5wdXRJZD1cInJvbGVcIiBwbGFjZWhvbGRlcj1cIlBsZWFzZSBTZWxlY3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlQ2xhc3M9XCJ3LTEwMFwiIG9wdGlvbkxhYmVsPVwibGFiZWxcIiBvcHRpb25WYWx1ZT1cInZhbHVlXCIgW2ZpbHRlcl09XCJ0cnVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJ0eXBlX2NvZGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWFGaWx0ZXJMYWJlbD1cIm51bGxcIiBbc2hvd0NsZWFyXT1cInRydWVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgbGV0LWl0ZW0gcFRlbXBsYXRlPVwic2VsZWN0ZWRJdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgcFRvb2x0aXA9XCJ7e2l0ZW0/LmxhYmVsfX1cIiB0b29sdGlwUG9zaXRpb249XCJ0b3BcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LXRydW5jYXRlXCI+IHt7IGl0ZW0/LmxhYmVsIH19PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgbGV0LW9iamVjdCBwVGVtcGxhdGU9XCJpdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IG9iamVjdC5sYWJlbCB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3AtZHJvcGRvd24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicC1mbHVpZCBwLWZvcm1ncmlkIHJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicC1maWVsZCBjb2wtbGctNiBjb2wtc20tNCBjb2wtbWQtMTIgY29sLTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJmbmFtZVwiIGNsYXNzPVwicmVmZXJyYWwtZm9ybS1sYWJlbHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW50ZXJlZCBCeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlcXVpcmVkZmllbGQgdGV4dC1kYW5nZXJcIj4qPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcElucHV0VGV4dCBwbGFjZWhvbGRlcj1cIltjdXJyZW50IHVzZXJdXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiZW50ZXJlZF9ieV93b3JrZXJfbmFtZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtZmx1aWQgcC1mb3JtZ3JpZCByb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtZmllbGQgY29sLWxnLTYgY29sLXNtLTQgY29sLW1kLTEyIGNvbC0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImZuYW1lXCIgY2xhc3M9XCJyZWZlcnJhbC1mb3JtLWxhYmVsc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXF1aXJlZGZpZWxkIHRleHQtZGFuZ2VyXCI+Kjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwSW5wdXRUZXh0IHBsYWNlaG9sZGVyPVwiT3RoZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImRlc2NyaXB0aW9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJkZXNjcmlwdGlvbj8uZXJyb3JzPy5tYXhsZW5ndGhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicC1lcnJvciBibG9jayBtdC0xXCI+RGVzY3JpcHRpb24gY2Fubm90IGJlIG1vcmUgdGhhbiAxMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVycy48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXQtM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLXByaW1hcnkgYnRuY29tbW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkb2N1bWVudFVwbG9hZEZvcm0uaW52YWxpZFwiIChjbGljayk9XCJzZW5kRG9jdW1lbnQoKVwiPlNhdmU8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAoY2xpY2spPVwic2hvd1BvcHVwKClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJwdWxsLXJpZ2h0IG1yLTIgYnRuIGJ0bi13aGl0ZSBib3JkZXIgYm9yZGVyLTEgYm9yZGVyLXByaW1hcnkgdGV4dC1wcmltYXJ5IGJ0bmNhbmNlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgaXNCdXR0b25TaG93SGlkZSA/ICdDYW5jZWwgQ2hhbmdlcycgOiAnQ2FuY2VsJyB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGFkZEltYWdlXCIgdHlwZT1cImJ1dHRvblwiIChjbGljayk9XCJzaG93UG9wdXAoKVwiIFtkaXNhYmxlZF09XCJpc1ZpZXdNb2RlXCI+KyBBZGQgSW1hZ2U8L2J1dHRvbj5cclxuPC9kaXY+XHJcbiJdfQ==
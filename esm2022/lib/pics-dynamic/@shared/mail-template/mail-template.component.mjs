import { Component, Input } from '@angular/core';
import { Validators } from '@angular/forms';
import { AppConstants } from '../../@core/entities/app-constants';
import { debounceTime } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "./services/mail-template.service";
import * as i2 from "../../@core/service/alert.service";
import * as i3 from "@angular/forms";
import * as i4 from "../../@core/service/auth.service";
import * as i5 from "@angular/common";
import * as i6 from "primeng/inputtext";
import * as i7 from "primeng/checkbox";
import * as i8 from "primeng/dropdown";
export class MailTemplateComponent {
    _mailTemplateService;
    _alertService;
    _formBuilder;
    auth;
    inputData;
    email = '';
    referralId = '';
    convertToZip = false;
    additionalDocuments = false;
    checked = false;
    email_template = '';
    packetId = '';
    document_packet_data = [];
    selectPacketName = '';
    emailTemplate = [];
    selectTemplate = '';
    isValidateRefferalid = false;
    referralAutoSuggestion = false;
    originalRefferalid = '';
    allEmailTemplateCategories = [];
    mailTempalateForm;
    referralAutoList = [];
    mailePacketInput;
    missingCategoryList = [];
    orgSubs;
    orgId;
    pageList = [];
    constructor(_mailTemplateService, _alertService, _formBuilder, auth) {
        this._mailTemplateService = _mailTemplateService;
        this._alertService = _alertService;
        this._formBuilder = _formBuilder;
        this.auth = auth;
        this.getAllEmailTemplateCategories();
        this.getEmailTemplateNewList();
    }
    ngOnInit() {
        this.orgSubs = this.auth.orgInfo.subscribe(o => {
            this.orgId = o;
            console.log(this.orgId, 'mail template component');
        });
        this.inititlize();
        this.getPacketListing();
        this.getAllPages();
    }
    getAllPages() {
        this._mailTemplateService.getallPages(`${this.orgId}`, { pageTypes: ['ATPBDM', 'FFP'] }).subscribe((res) => {
            console.log(res);
            if (res && res.data) {
                this.pageList = res.data;
            }
        });
    }
    changePage(_e) {
        const data = this.mailTempalateForm.getRawValue();
        console.log(this.mailTempalateForm.controls['page'].value, data['page']);
    }
    inititlize() {
        this.mailTempalateForm = this._formBuilder.group({
            email: ['', [Validators.required, Validators.pattern('^[0-9a-zA-Z.-]+[@][0-9a-zA-Z.-]+[.][0-9a-zA-Z]{2,}$')]],
            page: ['', [Validators.required]],
            responseid: ['', [Validators.required]],
            selectPacketName: ['', [Validators.required]],
            selectTemplate: ['', [Validators.required]],
            convertToZip: false,
            additionalDocuments: false
        });
    }
    get mailTempalateFormControl() {
        return this.mailTempalateForm.controls;
    }
    getPacketListing() {
        this._mailTemplateService.getPacketListing().subscribe((res) => {
            if (res) {
                this.document_packet_data = [];
                this.document_packet_data = res.data;
                this.openMailPacket();
            }
        });
    }
    validatePacket() {
        const inputRequest = {
            responseid: this.mailTempalateForm.value.responseid ? this.mailTempalateForm.value.responseid : '',
            packetId: this.packetId,
            pageid: this.mailTempalateForm.value.page
        };
        this.missingCategoryList = [];
        this._mailTemplateService.mailattachmentsValidation(inputRequest).subscribe((res) => {
            if (res && res.data.length > 0) {
                this.missingCategoryList = res.data;
            }
        }, _err => {
            this._alertService.error(AppConstants.errorMessage);
        });
    }
    confirmPacketMail() {
        this.mailePacketInput = {
            responseid: this.mailTempalateForm.value.responseid ? this.mailTempalateForm.value.responseid : '',
            pageid: this.mailTempalateForm.value.page,
            packetId: this.packetId,
            email: this.mailTempalateForm.value.email ? this.mailTempalateForm.value.email : '',
            convertToZip: this.mailTempalateForm.value.convertToZip ? this.mailTempalateForm.value.convertToZip : false,
            additionalDocuments: this.mailTempalateForm.value.additionalDocuments
                ? this.mailTempalateForm.value.additionalDocuments
                : false,
            email_template: this.email_template
        };
        const validate = this.validation();
        if (validate) {
            this.closeMailPacket();
            this._mailTemplateService.mailSent(this.mailePacketInput).subscribe((_res) => {
                this._alertService.success('Mail sent successfully!');
            }, _err => {
                this._alertService.error(AppConstants.errorMessage);
            });
        }
    }
    validation() {
        if (!this.isValidateRefferalid) {
            this._alertService.warn('Please Search And Select Referral Id');
            return false;
        }
        if (this.packetId === '') {
            this._alertService.warn('Please select a packet!');
            return false;
        }
        if (this.mailTempalateForm.value.email === '') {
            this._alertService.warn('Email should not be empty!');
            return false;
        }
        if (this.email_template === '') {
            this._alertService.warn('Please select a email template!');
            return false;
        }
        if (this.mailTempalateForm.invalid) {
            this._alertService.warn('Please enter all required fields!');
            return false;
        }
        this._alertService.warn('Mail triggered successfully,it will take time to delivered!');
        return true;
    }
    checkCondition(data) {
        if (data) {
            return data.length > 0 ? true : false;
        }
        else {
            return false;
        }
    }
    selectMailId(data) {
        this.packetId = data.id;
        if (!this.isValidateRefferalid) {
            this._alertService.warn('Please Search And Select Referral Id');
        }
        else {
            this.validatePacket();
        }
    }
    openMailPacket() {
        $('#mail-packet').modal('show');
        setTimeout(function () {
            $('body').removeClass('modal-open');
            $('.modal-backdrop').hide();
        }, 900);
    }
    closeMailPacket() {
        $('#mail-packet').modal('hide');
    }
    selectedTemp(data) {
        this.email_template = data.id ? data.id : '';
    }
    getAllEmailTemplateCategories() {
        this._mailTemplateService.getAllEmailTemplateCategories().subscribe((res) => {
            if (res) {
                this.allEmailTemplateCategories = [];
                this.allEmailTemplateCategories = res.data;
                this.allEmailTemplateCategories = this.allEmailTemplateCategories.filter(x => x.key === 'REFERRAL');
            }
        });
    }
    getEmailTemplateList() {
        const id = this.allEmailTemplateCategories.length > 0 ? this.allEmailTemplateCategories[0].id : 1;
        this._mailTemplateService.getEmailTemplateList(id).subscribe((res) => {
            if (res) {
                this.emailTemplate = res.data;
            }
        });
    }
    getEmailTemplateNewList() {
        this._mailTemplateService.getEmailTemplateNewList().subscribe((_res) => {
            if (_res) {
                this.emailTemplate = _res.data;
            }
        });
    }
    changeReferral() {
        this.isValidateRefferalid = false;
    }
    onKeyUp($event) {
        if ($event.target.value) {
            const data = {
                responseid: $event.target.value,
                pageid: this.mailTempalateForm.value.page
            };
            if (data.responseid.length > 0 && data.pageid) {
                this._mailTemplateService
                    .getResponseSuggesstions(data)
                    .pipe(debounceTime(2000))
                    .subscribe((res) => {
                    if (res.data) {
                        this.referralAutoList = res.data;
                        this.referralAutoSuggestion = true;
                        this.isValidateRefferalid = false;
                    }
                });
            }
            else {
                this.referralAutoSuggestion = false;
            }
        }
    }
    selectAddrss(data) {
        this.isValidateRefferalid = true;
        this.referralAutoSuggestion = false;
        this.mailTempalateForm.patchValue({
            responseid: data.id
        });
        if (this.packetId !== '') {
            this.validatePacket();
        }
    }
    getCategoryList() {
        const subCat = this.missingCategoryList.filter((x) => x.category);
        return subCat.length > 0 ? subCat : [];
    }
    getSubCategory(subcate) {
        const subCat = this.missingCategoryList.filter((x) => x.category === subcate.category);
        return subCat.length > 0 ? subCat[0].subcategory : [];
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: MailTemplateComponent, deps: [{ token: i1.MailTemplateService }, { token: i2.AlertService }, { token: i3.UntypedFormBuilder }, { token: i4.AuthService }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: MailTemplateComponent, selector: "app-mail-template", inputs: { inputData: "inputData" }, ngImport: i0, template: "<div class=\"modal fade\" id=\"mail-packet\">\r\n  <div class=\"modal-dialog modal-lg border shadow\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-body\">\r\n        <div class=\"messagecont\" [formGroup]=\"mailTempalateForm\">\r\n          <div class=\"p-field p-col mb-0\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacket\" for=\"mailpacket\" class=\"intake-form-labels text-primary\">\r\n                  Page <span class=\"requiredfield text-danger\">*</span>\r\n                </label>\r\n                <div class=\"p-0\">\r\n                  <p-dropdown styleClass=\"w-100\" [options]=\"pageList\" optionLabel=\"activeVersion.pagename\"\r\n                    optionValue=\"id\" formControlName=\"page\" placeholder=\"Select Page\" (onChange)=\"changePage($event)\">\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacketReferral\" for=\"mailpacketReferral\"\r\n                  class=\"intake-form-labels text-primary\">Response id <span\r\n                    class=\"requiredfield text-danger\">*</span></label>\r\n                <div class=\"col p-0\">\r\n                  <div class=\"input-group\">\r\n                    <input id=\"mailpacketReferral\" class=\"form-control\" formControlName=\"responseid\" type=\"text\"\r\n                      maxlength=\"20\" fieldKey=\"DOC_PAC_MAIL_PACKET_REFERRAL_ID\" placeholder=\"Response Id\"\r\n                      (keyup)=\"onKeyUp($event)\" autocomplete=\"off\" pInputText />\r\n                    <ul *ngIf=\"referralAutoSuggestion\" class=\"autosuggest\">\r\n                      <li *ngFor=\"let item of referralAutoList\" (click)=\"selectAddrss(item)\">\r\n                        {{ item?.id }}\r\n                        {{ item?.client ? '-(' + (item?.client.firstName + ', ' + item?.client.lastName) + ')' : '' }}\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                  <small\r\n                    *ngIf=\"mailTempalateFormControl.responseid.invalid && mailTempalateFormControl.responseid.touched\"\r\n                    class=\"p-error block\">Response Id is required</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacketName\" for=\"mailpacketName\"\r\n                  class=\"intake-form-labels text-primary\">Packet Name <span\r\n                    class=\"requiredfield text-danger\">*</span></label>\r\n                <div class=\"col p-0\">\r\n                  <p-dropdown id=\"mailpacketName\" styleClass=\"d-flex\" [options]=\"document_packet_data\"\r\n                    fieldKey=\"DOC_PAC_MAIL_PACKET_SELECT_PACKET_NAME\" optionLabel=\"name\"\r\n                    placeholder=\"Select Packet Name\" formControlName=\"selectPacketName\"\r\n                    (onChange)=\"selectMailId($event.value)\">\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacketEmail\" for=\"mailpacketEmail\" class=\"intake-form-labels\">Email ID <span\r\n                    class=\"requiredfield text-danger\">*</span></label>\r\n                <div class=\"col p-0\">\r\n                  <input id=\"mailpacketEmail\" class=\"form-control\" oninput=\"this.value = this.value.toLowerCase()\"\r\n                    pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\" formControlName=\"email\" type=\"email\"\r\n                    fieldKey=\"DOC_PAC_MAIL_PACKET_EMAIL_ID\" placeholder=\"Enter Email ID\" pInputText />\r\n                  <small *ngIf=\"mailTempalateFormControl.email.invalid && mailTempalateFormControl.email.touched\"\r\n                    class=\"p-error block\">Email ID is required</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-md-3 mb-4\">\r\n                <label aria-labelledby=\"mailpacketMailTemp\" for=\"mailpacketMailTemp\" class=\"intake-form-labels\">\r\n                  Mail Template <span class=\"requiredfield text-danger\">*</span>\r\n                </label>\r\n                <div class=\"col p-0\">\r\n                  <p-dropdown id=\"mailpacketMailTemp\" styleClass=\"d-flex\" fieldKey=\"DOC_PAC_MAIL_PACKET_MAIL_TEMPLATE\"\r\n                    [options]=\"emailTemplate\" optionLabel=\"name\" placeholder=\"Select Template\"\r\n                    formControlName=\"selectTemplate\" (onChange)=\"selectedTemp($event.value)\">\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-lg-3\">\r\n                <label class=\"intake-form-labels d-none d-md-none d-lg-block\">&#160;</label>\r\n                <p-checkbox [binary]=\"true\" formControlName=\"convertToZip\" fieldKey=\"DOC_PAC_MAIL_PACKET_CONVERT_TO_ZIP\"\r\n                  inputId=\"convert\"></p-checkbox>\r\n                <label for=\"convert\" class=\"intake-form-labels pl-2 mb-0\"> Convert To Zip </label>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-lg-3\">\r\n                <label class=\"intake-form-labels d-none d-md-none d-lg-block\">&#160;</label>\r\n                <p-checkbox [binary]=\"true\" formControlName=\"additionalDocuments\"\r\n                  fieldKey=\"DOC_PAC_MAIL_PACKET_CONVERT_TO_ZIP\" inputId=\"additional\">\r\n                </p-checkbox>\r\n                <label for=\"additional\" class=\"intake-form-labels pl-2 mb-0\"> Additional Documents </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div *ngIf=\"missingCategoryList?.length > 0\">\r\n          <ng-container>\r\n            <div class=\"col-md-12 mt-4\">\r\n              <label for=\"client-name\" class=\"intake-form-labels text-danger\">The below category documents missing for\r\n                this Form, Are sure you want to send a mail</label>\r\n            </div>\r\n            <table aria-describedby=\"Category_Table\" class=\"table table-bordered\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Category</th>\r\n                  <th scope=\"col\">Sub Category</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <ng-container *ngFor=\"let cat of getCategoryList(); let i = index\">\r\n                  <tr *ngFor=\"let subcat of getSubCategory(cat); let j = index\">\r\n                    <td>{{ cat?.category ? cat?.category : '' }}</td>\r\n                    <td>{{ subcat ? subcat : '' }}</td>\r\n                  </tr>\r\n                </ng-container>\r\n              </tbody>\r\n            </table>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <div class=\"mt-2\">\r\n          <button class=\"pull-right mb-2 btn btn-primary btncommon text-uppercase\" fieldKey=\"DOC_PAC_MAIL_PACKET_SEND\"\r\n            (click)=\"confirmPacketMail()\">\r\n            Send\r\n          </button>\r\n          <button\r\n            class=\"pull-right mb-2 mr-2 btn btn-white border border-1 border-primary text-primary btncancel text-uppercase\"\r\n            fieldKey=\"DOC_PAC_MAIL_PACKET_CANCEL\" (click)=\"closeMailPacket()\">\r\n            Cancel\r\n          </button>\r\n          <br />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".checkmark:before{content:\"L\";font-family:cursive;transform:scaleX(-1) rotate(-35deg);display:inline-block;vertical-align:top;line-height:1em;width:1em;color:green;height:1em;margin-right:.3em;text-align:center;position:absolute;margin-top:10px;margin-left:-20px}.autosuggest{position:absolute;inset:0 auto auto 0;transform:translate3d(0,38px,0);will-change:transform;float:left;min-width:10rem;padding:.5rem;margin:.125rem 0 0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;z-index:9;width:100%;height:200px;overflow:auto}.autosuggest li{cursor:pointer;font-size:13px;line-height:35px;border-bottom:solid 1px #ccc}.autosuggest li:hover{color:#007cc3}.p-field-radiobutton>label{margin-bottom:1px!important}\n"], dependencies: [{ kind: "directive", type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i6.InputText, selector: "[pInputText]" }, { kind: "component", type: i7.Checkbox, selector: "p-checkbox", inputs: ["value", "name", "disabled", "binary", "label", "ariaLabelledBy", "ariaLabel", "tabindex", "inputId", "style", "styleClass", "labelStyleClass", "formControl", "checkboxIcon", "readonly", "required", "trueValue", "falseValue"], outputs: ["onChange"] }, { kind: "component", type: i8.Dropdown, selector: "p-dropdown", inputs: ["id", "scrollHeight", "filter", "name", "style", "panelStyle", "styleClass", "panelStyleClass", "readonly", "required", "editable", "appendTo", "tabindex", "placeholder", "filterPlaceholder", "filterLocale", "inputId", "dataKey", "filterBy", "filterFields", "autofocus", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "autoDisplayFirst", "group", "showClear", "emptyFilterMessage", "emptyMessage", "lazy", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "overlayOptions", "ariaFilterLabel", "ariaLabel", "ariaLabelledBy", "filterMatchMode", "maxlength", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "focusOnHover", "selectOnFocus", "autoOptionFocus", "autofocusFilter", "disabled", "itemSize", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "filterValue", "options"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onShow", "onHide", "onClear", "onLazyLoad"] }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i3.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { kind: "directive", type: i3.PatternValidator, selector: "[pattern][formControlName],[pattern][formControl],[pattern][ngModel]", inputs: ["pattern"] }, { kind: "directive", type: i3.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i3.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }] });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: MailTemplateComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-mail-template', template: "<div class=\"modal fade\" id=\"mail-packet\">\r\n  <div class=\"modal-dialog modal-lg border shadow\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-body\">\r\n        <div class=\"messagecont\" [formGroup]=\"mailTempalateForm\">\r\n          <div class=\"p-field p-col mb-0\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacket\" for=\"mailpacket\" class=\"intake-form-labels text-primary\">\r\n                  Page <span class=\"requiredfield text-danger\">*</span>\r\n                </label>\r\n                <div class=\"p-0\">\r\n                  <p-dropdown styleClass=\"w-100\" [options]=\"pageList\" optionLabel=\"activeVersion.pagename\"\r\n                    optionValue=\"id\" formControlName=\"page\" placeholder=\"Select Page\" (onChange)=\"changePage($event)\">\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacketReferral\" for=\"mailpacketReferral\"\r\n                  class=\"intake-form-labels text-primary\">Response id <span\r\n                    class=\"requiredfield text-danger\">*</span></label>\r\n                <div class=\"col p-0\">\r\n                  <div class=\"input-group\">\r\n                    <input id=\"mailpacketReferral\" class=\"form-control\" formControlName=\"responseid\" type=\"text\"\r\n                      maxlength=\"20\" fieldKey=\"DOC_PAC_MAIL_PACKET_REFERRAL_ID\" placeholder=\"Response Id\"\r\n                      (keyup)=\"onKeyUp($event)\" autocomplete=\"off\" pInputText />\r\n                    <ul *ngIf=\"referralAutoSuggestion\" class=\"autosuggest\">\r\n                      <li *ngFor=\"let item of referralAutoList\" (click)=\"selectAddrss(item)\">\r\n                        {{ item?.id }}\r\n                        {{ item?.client ? '-(' + (item?.client.firstName + ', ' + item?.client.lastName) + ')' : '' }}\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                  <small\r\n                    *ngIf=\"mailTempalateFormControl.responseid.invalid && mailTempalateFormControl.responseid.touched\"\r\n                    class=\"p-error block\">Response Id is required</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacketName\" for=\"mailpacketName\"\r\n                  class=\"intake-form-labels text-primary\">Packet Name <span\r\n                    class=\"requiredfield text-danger\">*</span></label>\r\n                <div class=\"col p-0\">\r\n                  <p-dropdown id=\"mailpacketName\" styleClass=\"d-flex\" [options]=\"document_packet_data\"\r\n                    fieldKey=\"DOC_PAC_MAIL_PACKET_SELECT_PACKET_NAME\" optionLabel=\"name\"\r\n                    placeholder=\"Select Packet Name\" formControlName=\"selectPacketName\"\r\n                    (onChange)=\"selectMailId($event.value)\">\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-3\">\r\n                <label aria-labelledby=\"mailpacketEmail\" for=\"mailpacketEmail\" class=\"intake-form-labels\">Email ID <span\r\n                    class=\"requiredfield text-danger\">*</span></label>\r\n                <div class=\"col p-0\">\r\n                  <input id=\"mailpacketEmail\" class=\"form-control\" oninput=\"this.value = this.value.toLowerCase()\"\r\n                    pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\" formControlName=\"email\" type=\"email\"\r\n                    fieldKey=\"DOC_PAC_MAIL_PACKET_EMAIL_ID\" placeholder=\"Enter Email ID\" pInputText />\r\n                  <small *ngIf=\"mailTempalateFormControl.email.invalid && mailTempalateFormControl.email.touched\"\r\n                    class=\"p-error block\">Email ID is required</small>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-md-3 mb-4\">\r\n                <label aria-labelledby=\"mailpacketMailTemp\" for=\"mailpacketMailTemp\" class=\"intake-form-labels\">\r\n                  Mail Template <span class=\"requiredfield text-danger\">*</span>\r\n                </label>\r\n                <div class=\"col p-0\">\r\n                  <p-dropdown id=\"mailpacketMailTemp\" styleClass=\"d-flex\" fieldKey=\"DOC_PAC_MAIL_PACKET_MAIL_TEMPLATE\"\r\n                    [options]=\"emailTemplate\" optionLabel=\"name\" placeholder=\"Select Template\"\r\n                    formControlName=\"selectTemplate\" (onChange)=\"selectedTemp($event.value)\">\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-lg-3\">\r\n                <label class=\"intake-form-labels d-none d-md-none d-lg-block\">&#160;</label>\r\n                <p-checkbox [binary]=\"true\" formControlName=\"convertToZip\" fieldKey=\"DOC_PAC_MAIL_PACKET_CONVERT_TO_ZIP\"\r\n                  inputId=\"convert\"></p-checkbox>\r\n                <label for=\"convert\" class=\"intake-form-labels pl-2 mb-0\"> Convert To Zip </label>\r\n              </div>\r\n\r\n              <div class=\"col-lg-4 col-md-6 col-12 mb-lg-3\">\r\n                <label class=\"intake-form-labels d-none d-md-none d-lg-block\">&#160;</label>\r\n                <p-checkbox [binary]=\"true\" formControlName=\"additionalDocuments\"\r\n                  fieldKey=\"DOC_PAC_MAIL_PACKET_CONVERT_TO_ZIP\" inputId=\"additional\">\r\n                </p-checkbox>\r\n                <label for=\"additional\" class=\"intake-form-labels pl-2 mb-0\"> Additional Documents </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div *ngIf=\"missingCategoryList?.length > 0\">\r\n          <ng-container>\r\n            <div class=\"col-md-12 mt-4\">\r\n              <label for=\"client-name\" class=\"intake-form-labels text-danger\">The below category documents missing for\r\n                this Form, Are sure you want to send a mail</label>\r\n            </div>\r\n            <table aria-describedby=\"Category_Table\" class=\"table table-bordered\">\r\n              <thead>\r\n                <tr>\r\n                  <th scope=\"col\">Category</th>\r\n                  <th scope=\"col\">Sub Category</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <ng-container *ngFor=\"let cat of getCategoryList(); let i = index\">\r\n                  <tr *ngFor=\"let subcat of getSubCategory(cat); let j = index\">\r\n                    <td>{{ cat?.category ? cat?.category : '' }}</td>\r\n                    <td>{{ subcat ? subcat : '' }}</td>\r\n                  </tr>\r\n                </ng-container>\r\n              </tbody>\r\n            </table>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <div class=\"mt-2\">\r\n          <button class=\"pull-right mb-2 btn btn-primary btncommon text-uppercase\" fieldKey=\"DOC_PAC_MAIL_PACKET_SEND\"\r\n            (click)=\"confirmPacketMail()\">\r\n            Send\r\n          </button>\r\n          <button\r\n            class=\"pull-right mb-2 mr-2 btn btn-white border border-1 border-primary text-primary btncancel text-uppercase\"\r\n            fieldKey=\"DOC_PAC_MAIL_PACKET_CANCEL\" (click)=\"closeMailPacket()\">\r\n            Cancel\r\n          </button>\r\n          <br />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".checkmark:before{content:\"L\";font-family:cursive;transform:scaleX(-1) rotate(-35deg);display:inline-block;vertical-align:top;line-height:1em;width:1em;color:green;height:1em;margin-right:.3em;text-align:center;position:absolute;margin-top:10px;margin-left:-20px}.autosuggest{position:absolute;inset:0 auto auto 0;transform:translate3d(0,38px,0);will-change:transform;float:left;min-width:10rem;padding:.5rem;margin:.125rem 0 0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;z-index:9;width:100%;height:200px;overflow:auto}.autosuggest li{cursor:pointer;font-size:13px;line-height:35px;border-bottom:solid 1px #ccc}.autosuggest li:hover{color:#007cc3}.p-field-radiobutton>label{margin-bottom:1px!important}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.MailTemplateService }, { type: i2.AlertService }, { type: i3.UntypedFormBuilder }, { type: i4.AuthService }]; }, propDecorators: { inputData: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbC10ZW1wbGF0ZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9waWNzLWNvcmUvZHluYW1pYy9zcmMvbGliL3BpY3MtZHluYW1pYy9Ac2hhcmVkL21haWwtdGVtcGxhdGUvbWFpbC10ZW1wbGF0ZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9waWNzLWNvcmUvZHluYW1pYy9zcmMvbGliL3BpY3MtZHluYW1pYy9Ac2hhcmVkL21haWwtdGVtcGxhdGUvbWFpbC10ZW1wbGF0ZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQXdDLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2xGLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUlsRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7QUFROUMsTUFBTSxPQUFPLHFCQUFxQjtJQXlCdEI7SUFDQTtJQUNBO0lBQ0Q7SUEzQkEsU0FBUyxDQUFNO0lBQ3hCLEtBQUssR0FBRyxFQUFFLENBQUM7SUFDWCxVQUFVLEdBQUcsRUFBRSxDQUFDO0lBQ2hCLFlBQVksR0FBRyxLQUFLLENBQUM7SUFDckIsbUJBQW1CLEdBQUcsS0FBSyxDQUFDO0lBQzVCLE9BQU8sR0FBRyxLQUFLLENBQUM7SUFDaEIsY0FBYyxHQUFHLEVBQUUsQ0FBQztJQUNwQixRQUFRLEdBQUcsRUFBRSxDQUFDO0lBQ2Qsb0JBQW9CLEdBQVEsRUFBRSxDQUFDO0lBQy9CLGdCQUFnQixHQUFHLEVBQUUsQ0FBQztJQUN0QixhQUFhLEdBQVEsRUFBRSxDQUFDO0lBQ3hCLGNBQWMsR0FBRyxFQUFFLENBQUM7SUFDcEIsb0JBQW9C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LElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN2RSxPQUFPLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0lBQ0QsY0FBYyxDQUFDLE9BQU87UUFDcEIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsS0FBSyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUYsT0FBTyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ3hELENBQUM7d0dBblBVLHFCQUFxQjs0RkFBckIscUJBQXFCLDZGQ2RsQyx3cFBBd0lBOzs0RkQxSGEscUJBQXFCO2tCQUxqQyxTQUFTOytCQUNFLG1CQUFtQjtnTUFLcEIsU0FBUztzQkFBakIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBVbnR5cGVkRm9ybUJ1aWxkZXIsIFVudHlwZWRGb3JtR3JvdXAsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IEFwcENvbnN0YW50cyB9IGZyb20gJy4uLy4uL0Bjb3JlL2VudGl0aWVzL2FwcC1jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBBdXRoU2VydmljZSB9IGZyb20gJy4uLy4uL0Bjb3JlL3NlcnZpY2UvYXV0aC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQWxlcnRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vQGNvcmUvc2VydmljZS9hbGVydC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGRlYm91bmNlVGltZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgTWFpbFRlbXBsYXRlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvbWFpbC10ZW1wbGF0ZS5zZXJ2aWNlJztcclxuZGVjbGFyZSBjb25zdCAkOiBhbnk7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLW1haWwtdGVtcGxhdGUnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9tYWlsLXRlbXBsYXRlLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9tYWlsLXRlbXBsYXRlLmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIE1haWxUZW1wbGF0ZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgQElucHV0KCkgaW5wdXREYXRhOiBhbnk7XHJcbiAgZW1haWwgPSAnJztcclxuICByZWZlcnJhbElkID0gJyc7XHJcbiAgY29udmVydFRvWmlwID0gZmFsc2U7XHJcbiAgYWRkaXRpb25hbERvY3VtZW50cyA9IGZhbHNlO1xyXG4gIGNoZWNrZWQgPSBmYWxzZTtcclxuICBlbWFpbF90ZW1wbGF0ZSA9ICcnO1xyXG4gIHBhY2tldElkID0gJyc7XHJcbiAgZG9jdW1lbnRfcGFja2V0X2RhdGE6IGFueSA9IFtdO1xyXG4gIHNlbGVjdFBhY2tldE5hbWUgPSAnJztcclxuICBlbWFpbFRlbXBsYXRlOiBhbnkgPSBbXTtcclxuICBzZWxlY3RUZW1wbGF0ZSA9ICcnO1xyXG4gIGlzVmFsaWRhdGVSZWZmZXJhbGlkID0gZmFsc2U7XHJcbiAgcmVmZXJyYWxBdXRvU3VnZ2VzdGlvbiA9IGZhbHNlO1xyXG4gIG9yaWdpbmFsUmVmZmVyYWxpZCA9ICcnO1xyXG4gIGFsbEVtYWlsVGVtcGxhdGVDYXRlZ29yaWVzOiBhbnkgPSBbXTtcclxuICBtYWlsVGVtcGFsYXRlRm9ybSE6IFVudHlwZWRGb3JtR3JvdXA7XHJcbiAgcmVmZXJyYWxBdXRvTGlzdDogYW55ID0gW107XHJcbiAgbWFpbGVQYWNrZXRJbnB1dDogYW55O1xyXG4gIG1pc3NpbmdDYXRlZ29yeUxpc3Q6IGFueSA9IFtdO1xyXG4gIG9yZ1N1YnM6IFN1YnNjcmlwdGlvbjtcclxuICBvcmdJZDogYW55O1xyXG4gIHBhZ2VMaXN0OiBhbnkgPSBbXTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgX21haWxUZW1wbGF0ZVNlcnZpY2U6IE1haWxUZW1wbGF0ZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIF9hbGVydFNlcnZpY2U6IEFsZXJ0U2VydmljZSxcclxuICAgIHByaXZhdGUgX2Zvcm1CdWlsZGVyOiBVbnR5cGVkRm9ybUJ1aWxkZXIsXHJcbiAgICBwdWJsaWMgYXV0aDogQXV0aFNlcnZpY2VcclxuICApIHtcclxuICAgIHRoaXMuZ2V0QWxsRW1haWxUZW1wbGF0ZUNhdGVnb3JpZXMoKTtcclxuICAgIHRoaXMuZ2V0RW1haWxUZW1wbGF0ZU5ld0xpc3QoKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5vcmdTdWJzID0gdGhpcy5hdXRoLm9yZ0luZm8uc3Vic2NyaWJlKG8gPT4ge1xyXG4gICAgICB0aGlzLm9yZ0lkID0gbztcclxuICAgICAgY29uc29sZS5sb2codGhpcy5vcmdJZCwgJ21haWwgdGVtcGxhdGUgY29tcG9uZW50Jyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuaW5pdGl0bGl6ZSgpO1xyXG4gICAgdGhpcy5nZXRQYWNrZXRMaXN0aW5nKCk7XHJcbiAgICB0aGlzLmdldEFsbFBhZ2VzKCk7XHJcbiAgfVxyXG5cclxuICBnZXRBbGxQYWdlcygpIHtcclxuICAgIHRoaXMuX21haWxUZW1wbGF0ZVNlcnZpY2UuZ2V0YWxsUGFnZXMoYCR7dGhpcy5vcmdJZH1gLCB7IHBhZ2VUeXBlczogWydBVFBCRE0nLCAnRkZQJ10gfSkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlTGlzdCA9IHJlcy5kYXRhO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZVBhZ2UoX2UpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLm1haWxUZW1wYWxhdGVGb3JtLmdldFJhd1ZhbHVlKCk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLm1haWxUZW1wYWxhdGVGb3JtLmNvbnRyb2xzWydwYWdlJ10udmFsdWUsIGRhdGFbJ3BhZ2UnXSk7XHJcbiAgfVxyXG5cclxuICBpbml0aXRsaXplKCkge1xyXG4gICAgdGhpcy5tYWlsVGVtcGFsYXRlRm9ybSA9IHRoaXMuX2Zvcm1CdWlsZGVyLmdyb3VwKHtcclxuICAgICAgZW1haWw6IFsnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMucGF0dGVybignXlswLTlhLXpBLVouLV0rW0BdWzAtOWEtekEtWi4tXStbLl1bMC05YS16QS1aXXsyLH0kJyldXSxcclxuICAgICAgcGFnZTogWycnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF1dLFxyXG4gICAgICByZXNwb25zZWlkOiBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkXV0sXHJcbiAgICAgIHNlbGVjdFBhY2tldE5hbWU6IFsnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdXSxcclxuICAgICAgc2VsZWN0VGVtcGxhdGU6IFsnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdXSxcclxuICAgICAgY29udmVydFRvWmlwOiBmYWxzZSxcclxuICAgICAgYWRkaXRpb25hbERvY3VtZW50czogZmFsc2VcclxuICAgIH0pO1xyXG4gIH1cclxuICBnZXQgbWFpbFRlbXBhbGF0ZUZvcm1Db250cm9sKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubWFpbFRlbXBhbGF0ZUZvcm0uY29udHJvbHM7XHJcbiAgfVxyXG5cclxuICBnZXRQYWNrZXRMaXN0aW5nKCkge1xyXG4gICAgdGhpcy5fbWFpbFRlbXBsYXRlU2VydmljZS5nZXRQYWNrZXRMaXN0aW5nKCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudF9wYWNrZXRfZGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRfcGFja2V0X2RhdGEgPSByZXMuZGF0YTtcclxuICAgICAgICB0aGlzLm9wZW5NYWlsUGFja2V0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICB2YWxpZGF0ZVBhY2tldCgpIHtcclxuICAgIGNvbnN0IGlucHV0UmVxdWVzdCA9IHtcclxuICAgICAgcmVzcG9uc2VpZDogdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS52YWx1ZS5yZXNwb25zZWlkID8gdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS52YWx1ZS5yZXNwb25zZWlkIDogJycsXHJcbiAgICAgIHBhY2tldElkOiB0aGlzLnBhY2tldElkLFxyXG4gICAgICBwYWdlaWQ6IHRoaXMubWFpbFRlbXBhbGF0ZUZvcm0udmFsdWUucGFnZVxyXG4gICAgfTtcclxuICAgIHRoaXMubWlzc2luZ0NhdGVnb3J5TGlzdCA9IFtdO1xyXG4gICAgdGhpcy5fbWFpbFRlbXBsYXRlU2VydmljZS5tYWlsYXR0YWNobWVudHNWYWxpZGF0aW9uKGlucHV0UmVxdWVzdCkuc3Vic2NyaWJlKFxyXG4gICAgICAocmVzOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRoaXMubWlzc2luZ0NhdGVnb3J5TGlzdCA9IHJlcy5kYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgX2VyciA9PiB7XHJcbiAgICAgICAgdGhpcy5fYWxlcnRTZXJ2aWNlLmVycm9yKEFwcENvbnN0YW50cy5lcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuICBjb25maXJtUGFja2V0TWFpbCgpIHtcclxuICAgIHRoaXMubWFpbGVQYWNrZXRJbnB1dCA9IHtcclxuICAgICAgcmVzcG9uc2VpZDogdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS52YWx1ZS5yZXNwb25zZWlkID8gdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS52YWx1ZS5yZXNwb25zZWlkIDogJycsXHJcbiAgICAgIHBhZ2VpZDogdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS52YWx1ZS5wYWdlLFxyXG4gICAgICBwYWNrZXRJZDogdGhpcy5wYWNrZXRJZCxcclxuICAgICAgZW1haWw6IHRoaXMubWFpbFRlbXBhbGF0ZUZvcm0udmFsdWUuZW1haWwgPyB0aGlzLm1haWxUZW1wYWxhdGVGb3JtLnZhbHVlLmVtYWlsIDogJycsXHJcbiAgICAgIGNvbnZlcnRUb1ppcDogdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS52YWx1ZS5jb252ZXJ0VG9aaXAgPyB0aGlzLm1haWxUZW1wYWxhdGVGb3JtLnZhbHVlLmNvbnZlcnRUb1ppcCA6IGZhbHNlLFxyXG4gICAgICBhZGRpdGlvbmFsRG9jdW1lbnRzOiB0aGlzLm1haWxUZW1wYWxhdGVGb3JtLnZhbHVlLmFkZGl0aW9uYWxEb2N1bWVudHNcclxuICAgICAgICA/IHRoaXMubWFpbFRlbXBhbGF0ZUZvcm0udmFsdWUuYWRkaXRpb25hbERvY3VtZW50c1xyXG4gICAgICAgIDogZmFsc2UsXHJcbiAgICAgIGVtYWlsX3RlbXBsYXRlOiB0aGlzLmVtYWlsX3RlbXBsYXRlXHJcbiAgICB9O1xyXG4gICAgY29uc3QgdmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRpb24oKTtcclxuICAgIGlmICh2YWxpZGF0ZSkge1xyXG4gICAgICB0aGlzLmNsb3NlTWFpbFBhY2tldCgpO1xyXG4gICAgICB0aGlzLl9tYWlsVGVtcGxhdGVTZXJ2aWNlLm1haWxTZW50KHRoaXMubWFpbGVQYWNrZXRJbnB1dCkuc3Vic2NyaWJlKFxyXG4gICAgICAgIChfcmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2FsZXJ0U2VydmljZS5zdWNjZXNzKCdNYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5IScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2VyciA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9hbGVydFNlcnZpY2UuZXJyb3IoQXBwQ29uc3RhbnRzLmVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuICB2YWxpZGF0aW9uKCk6IGFueSB7XHJcbiAgICBpZiAoIXRoaXMuaXNWYWxpZGF0ZVJlZmZlcmFsaWQpIHtcclxuICAgICAgdGhpcy5fYWxlcnRTZXJ2aWNlLndhcm4oJ1BsZWFzZSBTZWFyY2ggQW5kIFNlbGVjdCBSZWZlcnJhbCBJZCcpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wYWNrZXRJZCA9PT0gJycpIHtcclxuICAgICAgdGhpcy5fYWxlcnRTZXJ2aWNlLndhcm4oJ1BsZWFzZSBzZWxlY3QgYSBwYWNrZXQhJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm1haWxUZW1wYWxhdGVGb3JtLnZhbHVlLmVtYWlsID09PSAnJykge1xyXG4gICAgICB0aGlzLl9hbGVydFNlcnZpY2Uud2FybignRW1haWwgc2hvdWxkIG5vdCBiZSBlbXB0eSEnKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW1haWxfdGVtcGxhdGUgPT09ICcnKSB7XHJcbiAgICAgIHRoaXMuX2FsZXJ0U2VydmljZS53YXJuKCdQbGVhc2Ugc2VsZWN0IGEgZW1haWwgdGVtcGxhdGUhJyk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm1haWxUZW1wYWxhdGVGb3JtLmludmFsaWQpIHtcclxuICAgICAgdGhpcy5fYWxlcnRTZXJ2aWNlLndhcm4oJ1BsZWFzZSBlbnRlciBhbGwgcmVxdWlyZWQgZmllbGRzIScpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9hbGVydFNlcnZpY2Uud2FybignTWFpbCB0cmlnZ2VyZWQgc3VjY2Vzc2Z1bGx5LGl0IHdpbGwgdGFrZSB0aW1lIHRvIGRlbGl2ZXJlZCEnKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBjaGVja0NvbmRpdGlvbihkYXRhKTogYW55IHtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiBkYXRhLmxlbmd0aCA+IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNlbGVjdE1haWxJZChkYXRhKSB7XHJcbiAgICB0aGlzLnBhY2tldElkID0gZGF0YS5pZDtcclxuICAgIGlmICghdGhpcy5pc1ZhbGlkYXRlUmVmZmVyYWxpZCkge1xyXG4gICAgICB0aGlzLl9hbGVydFNlcnZpY2Uud2FybignUGxlYXNlIFNlYXJjaCBBbmQgU2VsZWN0IFJlZmVycmFsIElkJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnZhbGlkYXRlUGFja2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG9wZW5NYWlsUGFja2V0KCkge1xyXG4gICAgJCgnI21haWwtcGFja2V0JykubW9kYWwoJ3Nob3cnKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcclxuICAgICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuaGlkZSgpO1xyXG4gICAgfSwgOTAwKTtcclxuICB9XHJcbiAgY2xvc2VNYWlsUGFja2V0KCkge1xyXG4gICAgJCgnI21haWwtcGFja2V0JykubW9kYWwoJ2hpZGUnKTtcclxuICB9XHJcbiAgc2VsZWN0ZWRUZW1wKGRhdGEpIHtcclxuICAgIHRoaXMuZW1haWxfdGVtcGxhdGUgPSBkYXRhLmlkID8gZGF0YS5pZCA6ICcnO1xyXG4gIH1cclxuICBnZXRBbGxFbWFpbFRlbXBsYXRlQ2F0ZWdvcmllcygpIHtcclxuICAgIHRoaXMuX21haWxUZW1wbGF0ZVNlcnZpY2UuZ2V0QWxsRW1haWxUZW1wbGF0ZUNhdGVnb3JpZXMoKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICB0aGlzLmFsbEVtYWlsVGVtcGxhdGVDYXRlZ29yaWVzID0gW107XHJcbiAgICAgICAgdGhpcy5hbGxFbWFpbFRlbXBsYXRlQ2F0ZWdvcmllcyA9IHJlcy5kYXRhO1xyXG4gICAgICAgIHRoaXMuYWxsRW1haWxUZW1wbGF0ZUNhdGVnb3JpZXMgPSB0aGlzLmFsbEVtYWlsVGVtcGxhdGVDYXRlZ29yaWVzLmZpbHRlcih4ID0+IHgua2V5ID09PSAnUkVGRVJSQUwnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldEVtYWlsVGVtcGxhdGVMaXN0KCkge1xyXG4gICAgY29uc3QgaWQgPSB0aGlzLmFsbEVtYWlsVGVtcGxhdGVDYXRlZ29yaWVzLmxlbmd0aCA+IDAgPyB0aGlzLmFsbEVtYWlsVGVtcGxhdGVDYXRlZ29yaWVzWzBdLmlkIDogMTtcclxuICAgIHRoaXMuX21haWxUZW1wbGF0ZVNlcnZpY2UuZ2V0RW1haWxUZW1wbGF0ZUxpc3QoaWQpLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgIHRoaXMuZW1haWxUZW1wbGF0ZSA9IHJlcy5kYXRhO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZ2V0RW1haWxUZW1wbGF0ZU5ld0xpc3QoKSB7XHJcbiAgICB0aGlzLl9tYWlsVGVtcGxhdGVTZXJ2aWNlLmdldEVtYWlsVGVtcGxhdGVOZXdMaXN0KCkuc3Vic2NyaWJlKChfcmVzOiBhbnkpID0+IHtcclxuICAgICAgaWYgKF9yZXMpIHtcclxuICAgICAgICB0aGlzLmVtYWlsVGVtcGxhdGUgPSBfcmVzLmRhdGE7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBjaGFuZ2VSZWZlcnJhbCgpIHtcclxuICAgIHRoaXMuaXNWYWxpZGF0ZVJlZmZlcmFsaWQgPSBmYWxzZTtcclxuICB9XHJcbiAgb25LZXlVcCgkZXZlbnQpIHtcclxuICAgIGlmICgoJGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSkge1xyXG4gICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIHJlc3BvbnNlaWQ6ICgkZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLFxyXG4gICAgICAgIHBhZ2VpZDogdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS52YWx1ZS5wYWdlXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChkYXRhLnJlc3BvbnNlaWQubGVuZ3RoID4gMCAmJiBkYXRhLnBhZ2VpZCkge1xyXG4gICAgICAgIHRoaXMuX21haWxUZW1wbGF0ZVNlcnZpY2VcclxuICAgICAgICAgIC5nZXRSZXNwb25zZVN1Z2dlc3N0aW9ucyhkYXRhKVxyXG4gICAgICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKDIwMDApKVxyXG4gICAgICAgICAgLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZWZlcnJhbEF1dG9MaXN0ID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZWZlcnJhbEF1dG9TdWdnZXN0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB0aGlzLmlzVmFsaWRhdGVSZWZmZXJhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVmZXJyYWxBdXRvU3VnZ2VzdGlvbiA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNlbGVjdEFkZHJzcyhkYXRhKSB7XHJcbiAgICB0aGlzLmlzVmFsaWRhdGVSZWZmZXJhbGlkID0gdHJ1ZTtcclxuICAgIHRoaXMucmVmZXJyYWxBdXRvU3VnZ2VzdGlvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5tYWlsVGVtcGFsYXRlRm9ybS5wYXRjaFZhbHVlKHtcclxuICAgICAgcmVzcG9uc2VpZDogZGF0YS5pZFxyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy5wYWNrZXRJZCAhPT0gJycpIHtcclxuICAgICAgdGhpcy52YWxpZGF0ZVBhY2tldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXRDYXRlZ29yeUxpc3QoKTogYW55IHtcclxuICAgIGNvbnN0IHN1YkNhdCA9IHRoaXMubWlzc2luZ0NhdGVnb3J5TGlzdC5maWx0ZXIoKHg6IGFueSkgPT4geC5jYXRlZ29yeSk7XHJcbiAgICByZXR1cm4gc3ViQ2F0Lmxlbmd0aCA+IDAgPyBzdWJDYXQgOiBbXTtcclxuICB9XHJcbiAgZ2V0U3ViQ2F0ZWdvcnkoc3ViY2F0ZSk6IGFueSB7XHJcbiAgICBjb25zdCBzdWJDYXQgPSB0aGlzLm1pc3NpbmdDYXRlZ29yeUxpc3QuZmlsdGVyKCh4OiBhbnkpID0+IHguY2F0ZWdvcnkgPT09IHN1YmNhdGUuY2F0ZWdvcnkpO1xyXG4gICAgcmV0dXJuIHN1YkNhdC5sZW5ndGggPiAwID8gc3ViQ2F0WzBdLnN1YmNhdGVnb3J5IDogW107XHJcbiAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQ9XCJtYWlsLXBhY2tldFwiPlxyXG4gIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2cgbW9kYWwtbGcgYm9yZGVyIHNoYWRvd1wiPlxyXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZWNvbnRcIiBbZm9ybUdyb3VwXT1cIm1haWxUZW1wYWxhdGVGb3JtXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicC1maWVsZCBwLWNvbCBtYi0wXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTQgY29sLW1kLTYgY29sLTEyIG1iLTNcIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBhcmlhLWxhYmVsbGVkYnk9XCJtYWlscGFja2V0XCIgZm9yPVwibWFpbHBhY2tldFwiIGNsYXNzPVwiaW50YWtlLWZvcm0tbGFiZWxzIHRleHQtcHJpbWFyeVwiPlxyXG4gICAgICAgICAgICAgICAgICBQYWdlIDxzcGFuIGNsYXNzPVwicmVxdWlyZWRmaWVsZCB0ZXh0LWRhbmdlclwiPio8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtMFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cC1kcm9wZG93biBzdHlsZUNsYXNzPVwidy0xMDBcIiBbb3B0aW9uc109XCJwYWdlTGlzdFwiIG9wdGlvbkxhYmVsPVwiYWN0aXZlVmVyc2lvbi5wYWdlbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uVmFsdWU9XCJpZFwiIGZvcm1Db250cm9sTmFtZT1cInBhZ2VcIiBwbGFjZWhvbGRlcj1cIlNlbGVjdCBQYWdlXCIgKG9uQ2hhbmdlKT1cImNoYW5nZVBhZ2UoJGV2ZW50KVwiPlxyXG4gICAgICAgICAgICAgICAgICA8L3AtZHJvcGRvd24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTQgY29sLW1kLTYgY29sLTEyIG1iLTNcIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBhcmlhLWxhYmVsbGVkYnk9XCJtYWlscGFja2V0UmVmZXJyYWxcIiBmb3I9XCJtYWlscGFja2V0UmVmZXJyYWxcIlxyXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImludGFrZS1mb3JtLWxhYmVscyB0ZXh0LXByaW1hcnlcIj5SZXNwb25zZSBpZCA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicmVxdWlyZWRmaWVsZCB0ZXh0LWRhbmdlclwiPio8L3NwYW4+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgcC0wXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cIm1haWxwYWNrZXRSZWZlcnJhbFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgZm9ybUNvbnRyb2xOYW1lPVwicmVzcG9uc2VpZFwiIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aD1cIjIwXCIgZmllbGRLZXk9XCJET0NfUEFDX01BSUxfUEFDS0VUX1JFRkVSUkFMX0lEXCIgcGxhY2Vob2xkZXI9XCJSZXNwb25zZSBJZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAoa2V5dXApPVwib25LZXlVcCgkZXZlbnQpXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgcElucHV0VGV4dCAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDx1bCAqbmdJZj1cInJlZmVycmFsQXV0b1N1Z2dlc3Rpb25cIiBjbGFzcz1cImF1dG9zdWdnZXN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bGkgKm5nRm9yPVwibGV0IGl0ZW0gb2YgcmVmZXJyYWxBdXRvTGlzdFwiIChjbGljayk9XCJzZWxlY3RBZGRyc3MoaXRlbSlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3sgaXRlbT8uaWQgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3sgaXRlbT8uY2xpZW50ID8gJy0oJyArIChpdGVtPy5jbGllbnQuZmlyc3ROYW1lICsgJywgJyArIGl0ZW0/LmNsaWVudC5sYXN0TmFtZSkgKyAnKScgOiAnJyB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPHNtYWxsXHJcbiAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJtYWlsVGVtcGFsYXRlRm9ybUNvbnRyb2wucmVzcG9uc2VpZC5pbnZhbGlkICYmIG1haWxUZW1wYWxhdGVGb3JtQ29udHJvbC5yZXNwb25zZWlkLnRvdWNoZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicC1lcnJvciBibG9ja1wiPlJlc3BvbnNlIElkIGlzIHJlcXVpcmVkPC9zbWFsbD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTQgY29sLW1kLTYgY29sLTEyIG1iLTNcIj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBhcmlhLWxhYmVsbGVkYnk9XCJtYWlscGFja2V0TmFtZVwiIGZvcj1cIm1haWxwYWNrZXROYW1lXCJcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJpbnRha2UtZm9ybS1sYWJlbHMgdGV4dC1wcmltYXJ5XCI+UGFja2V0IE5hbWUgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInJlcXVpcmVkZmllbGQgdGV4dC1kYW5nZXJcIj4qPC9zcGFuPjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sIHAtMFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cC1kcm9wZG93biBpZD1cIm1haWxwYWNrZXROYW1lXCIgc3R5bGVDbGFzcz1cImQtZmxleFwiIFtvcHRpb25zXT1cImRvY3VtZW50X3BhY2tldF9kYXRhXCJcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZEtleT1cIkRPQ19QQUNfTUFJTF9QQUNLRVRfU0VMRUNUX1BBQ0tFVF9OQU1FXCIgb3B0aW9uTGFiZWw9XCJuYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBQYWNrZXQgTmFtZVwiIGZvcm1Db250cm9sTmFtZT1cInNlbGVjdFBhY2tldE5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgIChvbkNoYW5nZSk9XCJzZWxlY3RNYWlsSWQoJGV2ZW50LnZhbHVlKVwiPlxyXG4gICAgICAgICAgICAgICAgICA8L3AtZHJvcGRvd24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy00IGNvbC1tZC02IGNvbC0xMiBtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgYXJpYS1sYWJlbGxlZGJ5PVwibWFpbHBhY2tldEVtYWlsXCIgZm9yPVwibWFpbHBhY2tldEVtYWlsXCIgY2xhc3M9XCJpbnRha2UtZm9ybS1sYWJlbHNcIj5FbWFpbCBJRCA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicmVxdWlyZWRmaWVsZCB0ZXh0LWRhbmdlclwiPio8L3NwYW4+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgcC0wXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cIm1haWxwYWNrZXRFbWFpbFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgb25pbnB1dD1cInRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKClcIlxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm49XCJbYS16MC05Ll8lKy1dK0BbYS16MC05Li1dK1xcLlthLXpdezIsfSRcIiBmb3JtQ29udHJvbE5hbWU9XCJlbWFpbFwiIHR5cGU9XCJlbWFpbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRLZXk9XCJET0NfUEFDX01BSUxfUEFDS0VUX0VNQUlMX0lEXCIgcGxhY2Vob2xkZXI9XCJFbnRlciBFbWFpbCBJRFwiIHBJbnB1dFRleHQgLz5cclxuICAgICAgICAgICAgICAgICAgPHNtYWxsICpuZ0lmPVwibWFpbFRlbXBhbGF0ZUZvcm1Db250cm9sLmVtYWlsLmludmFsaWQgJiYgbWFpbFRlbXBhbGF0ZUZvcm1Db250cm9sLmVtYWlsLnRvdWNoZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicC1lcnJvciBibG9ja1wiPkVtYWlsIElEIGlzIHJlcXVpcmVkPC9zbWFsbD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTQgY29sLW1kLTYgY29sLTEyIG1iLW1kLTMgbWItNFwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGFyaWEtbGFiZWxsZWRieT1cIm1haWxwYWNrZXRNYWlsVGVtcFwiIGZvcj1cIm1haWxwYWNrZXRNYWlsVGVtcFwiIGNsYXNzPVwiaW50YWtlLWZvcm0tbGFiZWxzXCI+XHJcbiAgICAgICAgICAgICAgICAgIE1haWwgVGVtcGxhdGUgPHNwYW4gY2xhc3M9XCJyZXF1aXJlZGZpZWxkIHRleHQtZGFuZ2VyXCI+Kjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sIHAtMFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cC1kcm9wZG93biBpZD1cIm1haWxwYWNrZXRNYWlsVGVtcFwiIHN0eWxlQ2xhc3M9XCJkLWZsZXhcIiBmaWVsZEtleT1cIkRPQ19QQUNfTUFJTF9QQUNLRVRfTUFJTF9URU1QTEFURVwiXHJcbiAgICAgICAgICAgICAgICAgICAgW29wdGlvbnNdPVwiZW1haWxUZW1wbGF0ZVwiIG9wdGlvbkxhYmVsPVwibmFtZVwiIHBsYWNlaG9sZGVyPVwiU2VsZWN0IFRlbXBsYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJzZWxlY3RUZW1wbGF0ZVwiIChvbkNoYW5nZSk9XCJzZWxlY3RlZFRlbXAoJGV2ZW50LnZhbHVlKVwiPlxyXG4gICAgICAgICAgICAgICAgICA8L3AtZHJvcGRvd24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy00IGNvbC1tZC02IGNvbC0xMiBtYi1sZy0zXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJpbnRha2UtZm9ybS1sYWJlbHMgZC1ub25lIGQtbWQtbm9uZSBkLWxnLWJsb2NrXCI+JiMxNjA7PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxwLWNoZWNrYm94IFtiaW5hcnldPVwidHJ1ZVwiIGZvcm1Db250cm9sTmFtZT1cImNvbnZlcnRUb1ppcFwiIGZpZWxkS2V5PVwiRE9DX1BBQ19NQUlMX1BBQ0tFVF9DT05WRVJUX1RPX1pJUFwiXHJcbiAgICAgICAgICAgICAgICAgIGlucHV0SWQ9XCJjb252ZXJ0XCI+PC9wLWNoZWNrYm94PlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNvbnZlcnRcIiBjbGFzcz1cImludGFrZS1mb3JtLWxhYmVscyBwbC0yIG1iLTBcIj4gQ29udmVydCBUbyBaaXAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy00IGNvbC1tZC02IGNvbC0xMiBtYi1sZy0zXCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJpbnRha2UtZm9ybS1sYWJlbHMgZC1ub25lIGQtbWQtbm9uZSBkLWxnLWJsb2NrXCI+JiMxNjA7PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxwLWNoZWNrYm94IFtiaW5hcnldPVwidHJ1ZVwiIGZvcm1Db250cm9sTmFtZT1cImFkZGl0aW9uYWxEb2N1bWVudHNcIlxyXG4gICAgICAgICAgICAgICAgICBmaWVsZEtleT1cIkRPQ19QQUNfTUFJTF9QQUNLRVRfQ09OVkVSVF9UT19aSVBcIiBpbnB1dElkPVwiYWRkaXRpb25hbFwiPlxyXG4gICAgICAgICAgICAgICAgPC9wLWNoZWNrYm94PlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImFkZGl0aW9uYWxcIiBjbGFzcz1cImludGFrZS1mb3JtLWxhYmVscyBwbC0yIG1iLTBcIj4gQWRkaXRpb25hbCBEb2N1bWVudHMgPC9sYWJlbD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ0lmPVwibWlzc2luZ0NhdGVnb3J5TGlzdD8ubGVuZ3RoID4gMFwiPlxyXG4gICAgICAgICAgPG5nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMiBtdC00XCI+XHJcbiAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNsaWVudC1uYW1lXCIgY2xhc3M9XCJpbnRha2UtZm9ybS1sYWJlbHMgdGV4dC1kYW5nZXJcIj5UaGUgYmVsb3cgY2F0ZWdvcnkgZG9jdW1lbnRzIG1pc3NpbmcgZm9yXHJcbiAgICAgICAgICAgICAgICB0aGlzIEZvcm0sIEFyZSBzdXJlIHlvdSB3YW50IHRvIHNlbmQgYSBtYWlsPC9sYWJlbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDx0YWJsZSBhcmlhLWRlc2NyaWJlZGJ5PVwiQ2F0ZWdvcnlfVGFibGVcIiBjbGFzcz1cInRhYmxlIHRhYmxlLWJvcmRlcmVkXCI+XHJcbiAgICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj5DYXRlZ29yeTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPlN1YiBDYXRlZ29yeTwvdGg+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgY2F0IG9mIGdldENhdGVnb3J5TGlzdCgpOyBsZXQgaSA9IGluZGV4XCI+XHJcbiAgICAgICAgICAgICAgICAgIDx0ciAqbmdGb3I9XCJsZXQgc3ViY2F0IG9mIGdldFN1YkNhdGVnb3J5KGNhdCk7IGxldCBqID0gaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+e3sgY2F0Py5jYXRlZ29yeSA/IGNhdD8uY2F0ZWdvcnkgOiAnJyB9fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPnt7IHN1YmNhdCA/IHN1YmNhdCA6ICcnIH19PC90ZD5cclxuICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibXQtMlwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInB1bGwtcmlnaHQgbWItMiBidG4gYnRuLXByaW1hcnkgYnRuY29tbW9uIHRleHQtdXBwZXJjYXNlXCIgZmllbGRLZXk9XCJET0NfUEFDX01BSUxfUEFDS0VUX1NFTkRcIlxyXG4gICAgICAgICAgICAoY2xpY2spPVwiY29uZmlybVBhY2tldE1haWwoKVwiPlxyXG4gICAgICAgICAgICBTZW5kXHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgY2xhc3M9XCJwdWxsLXJpZ2h0IG1iLTIgbXItMiBidG4gYnRuLXdoaXRlIGJvcmRlciBib3JkZXItMSBib3JkZXItcHJpbWFyeSB0ZXh0LXByaW1hcnkgYnRuY2FuY2VsIHRleHQtdXBwZXJjYXNlXCJcclxuICAgICAgICAgICAgZmllbGRLZXk9XCJET0NfUEFDX01BSUxfUEFDS0VUX0NBTkNFTFwiIChjbGljayk9XCJjbG9zZU1haWxQYWNrZXQoKVwiPlxyXG4gICAgICAgICAgICBDYW5jZWxcclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICA8YnIgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcbiJdfQ==
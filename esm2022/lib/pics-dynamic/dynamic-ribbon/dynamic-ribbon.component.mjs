import { Component, Input } from '@angular/core';
import { LocalService } from '../@core/service/local.service';
import { DynamicsearchService } from '../@core/service/dynamicsearch.service';
import { DataStoreService } from '../@core/service/data-store.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "../@core/service/dynamic-tab-page-service";
import * as i3 from "../@core/local-storage/local-storage.service";
import * as i4 from "../@core/service/dynamic-ribbon-data.service";
import * as i5 from "../@core/service/data-store.service";
import * as i6 from "../@core/service/shared.service";
import * as i7 from "@angular/common";
import * as i8 from "primeng/api";
import * as i9 from "primeng/tabmenu";
import * as i10 from "@angular/forms";
import * as i11 from "./dynamic-ribbon-page/dynamic-ribbon-page.component";
import * as i12 from "../@core/pipe/tab-filter.pipe";
export class DynamicRibbonComponent {
    route;
    router;
    dynamicTabPageService;
    storageService;
    data;
    _storeservice;
    sharedService;
    item;
    tabPageId;
    tabList = [];
    originalTabList = [];
    navigateData;
    currentRouterLink;
    toggleMobileSidebar;
    selectedIndex = 0;
    parentGridPage;
    localstorage;
    tabpageData;
    dynamicSearchService;
    dynamicRibbonData = {};
    ribbonPageData;
    activeItem;
    settingInfo;
    dataStoreService;
    searchTerm = '';
    selectedSubTabIndex = -1;
    selectedTabName = '';
    selectedSubTabName = '';
    ribbonConfig;
    sourceKey;
    sourceValue;
    sourceType;
    selectedPageId;
    pageIdSubscription;
    tabIndexCounter = 0;
    tabSubIndexCounter = 0;
    lastPageID = null;
    tabactionName = '';
    selectedTab;
    selectedSubTab;
    constructor(injector, route, router, dynamicTabPageService, storageService, data, _storeservice, sharedService) {
        this.route = route;
        this.router = router;
        this.dynamicTabPageService = dynamicTabPageService;
        this.storageService = storageService;
        this.data = data;
        this._storeservice = _storeservice;
        this.sharedService = sharedService;
        this.tabPageId = this.route.snapshot.paramMap.get('tabId');
        this.sourceKey = this.route.snapshot.paramMap.get('sourceKey');
        this.sourceValue = this.route.snapshot.paramMap.get('sourceValue');
        this.sourceType = this.route.snapshot.paramMap.get('sourceType');
        this.localstorage = injector.get(LocalService);
        this.navigateData = this.router?.getCurrentNavigation()?.extras?.state;
        this.dynamicSearchService = injector.get(DynamicsearchService);
        this.dataStoreService = injector.get(DataStoreService);
        this.sharedService.currentMessage.subscribe((_message) => {
            if (this.localstorage.getItem('compositeTitle')) {
                this.tabactionName = `<small class="pipe-style">|</small> ${this.localstorage.getItem('setTabAction')} ${this.localstorage.getItem('compositeTitle')}`;
            }
            else if (this.localstorage.getItem('setTabAction')) {
                this.tabactionName = `<small class="pipe-style">|</small> ${this.localstorage.getItem('setTabAction')} ${this.selectedSubTabName}`;
            }
            else {
                this.tabactionName = '';
            }
        });
    }
    ngOnInit() {
        this.getDynamicTab();
        // this._storeservice.currentStore.subscribe((res: any) => {
        //   if (res) {
        //     this.sharedService = res['SHAREDSERVICE']
        //   }
        // })
        const REGISTRATION = this.storageService.getItem('REGISTRATION');
        if (REGISTRATION) {
            this.settingInfo = JSON.parse(REGISTRATION);
        }
        this.pageIdSubscription = this.data.currentPageId.subscribe(pageId => {
            if (pageId) {
                this.dynamicRibbonActive(pageId);
                return this.selectedPageId = pageId;
            }
        });
    }
    ngDoCheck() {
        const pageID = this.route.snapshot.queryParams['pageID'];
        if (pageID && pageID !== this.lastPageID) {
            this.lastPageID = pageID;
            this.activateTabByPageID(pageID);
        }
        else if (this.tabList &&
            this.tabList.length &&
            this.tabList[0]?.routerLink &&
            this.tabList[0]?.routerLink !== '' &&
            this.currentRouterLink !== this.tabList[0]?.routerLink) {
            const currentpage = this.localstorage.getItem('pagename');
            this.parentGridPage = currentpage ? currentpage : '';
            this.localstorage.setItem('navigationState', JSON.stringify(this.navigateData));
            this.activeItem = this.tabList[0];
            //this.selectedTabName = this.tabList[0].label;
            if (this.tabList[0].items.length > 0 && this.tabList[0].items[0].routerLink !== ''
                && this.currentRouterLink !== this.tabList[0].items[0].routerLink
                && this.tabpageData.taborientation === 'V') {
                this.onTabItemClick(this.tabList[0], this.tabList[0].items[0]);
                this.currentRouterLink = this.tabList[0].items[0].routerLink;
            }
            else if (this.tabList[0].items.length === 0) {
                this.onTabItemClick(this.tabList[0], 0);
                this.currentRouterLink = this.tabList[0]?.routerLink;
            }
        }
    }
    activateTabByPageID(pageID) {
        for (let tab of this.tabList) {
            if (tab.id == pageID) {
                this.currentRouterLink = tab.routerLink;
                this.activeItem = tab;
                this.selectedIndex = tab.tabindex;
                this.selectedTabName = tab.label;
                return;
            }
            if (tab.items && tab.items.length) {
                for (let subTab of tab.items) {
                    if (subTab.id == pageID) {
                        this.currentRouterLink = subTab.routerLink;
                        this.activeItem = tab;
                        this.selectedIndex = tab.tabindex;
                        this.selectedSubTabIndex = subTab.tabindex;
                        this.selectedTabName = tab.label;
                        this.selectedSubTabName = subTab.label;
                        return;
                    }
                }
            }
        }
    }
    async getDynamicTab() {
        this.dynamicTabPageService.getActivePage(this.tabPageId, true).subscribe(value => {
            this.tabpageData = value['data'];
            const tabConfig = this.checkParams(value['data']['tabconfig']);
            if (tabConfig[0].type === 'ATPBDM') {
                this.dataStoreService.setData('gridAction', 'edit');
            }
            this.getRibbonPage(this.tabpageData.ribbonid);
            // Map tab configurations and set router links
            this.tabList = tabConfig.map(page => this.mapTab(page));
            this.originalTabList = this.tabList;
            const pageID = this.route.snapshot.queryParams['pageID'];
            if (pageID) {
                this.activateTabByPageID(pageID);
            }
            else {
                if (this.tabList[0].items.length > 0 && this.tabpageData.taborientation === 'V') {
                    this.onTabItemClick(this.tabList[0], this.tabList[0].items[0]);
                }
                else if (this.tabList[0].items.length === 0) {
                    this.onTabItemClick(this.tabList[0], 0);
                }
            }
        });
    }
    mapTab(page) {
        // Process childTabs if available
        const childTabs = this.mapChildTabs(page.tabs);
        return {
            id: page.id,
            label: page.name,
            /* Add routerLink if needed */
            routerLink: '',
            icon: page?.icon ? page.icon : '',
            items: childTabs,
            tabindex: `${this.tabIndexCounter++}`
        };
    }
    mapChildTabs(childTabs) {
        if (!childTabs || !Array.isArray(childTabs)) {
            return [];
        }
        return childTabs.map(childTab => {
            return {
                id: childTab.id,
                label: childTab.name,
                // Add routerLink if needed
                routerLink: '',
                icon: childTab?.icon ? childTab.icon : '',
                items: childTab.tabs ? childTab.tabs : [],
                tabindex: `${this.tabSubIndexCounter++}`
            };
        });
    }
    checkParams(element) {
        return typeof element === 'string' ? JSON.parse(element) : element;
    }
    getRibbonPage(ribbonid) {
        this.dynamicTabPageService.getDynamicPage(ribbonid).subscribe(result => {
            if (result) {
                const page = result['data'][0].activeVersion;
                this.ribbonPageData = this.checkParams(page.tableschemaconfig);
                this.ribbonConfig = this.checkParams(page.ribbonconfig);
                let queryData;
                if (this.sourceKey && this.sourceValue && this.sourceType) {
                    queryData = { data: {} };
                    queryData.data[this.sourceKey] = (this.sourceType === 'number') ? Number(this.sourceValue) : this.sourceValue;
                }
                const data = {
                    queryData: queryData,
                    pagedata: [page],
                    requireTotalCount: true,
                    roleId: sessionStorage.getItem('role_id')
                };
                data.pagedata[0].filterId = null;
                const gridUrl = '/solution/dynamicsearch/searchinput/';
                this.dynamicSearchService.exportData(data, gridUrl).subscribe(value => {
                    this.dynamicRibbonData = value['data']['result'][0].row;
                });
            }
        });
    }
    setActiveVersionsAndRoutes(page, level) {
        return this.dynamicTabPageService.getDynamicPage(page.id).toPromise()
            .then((response) => {
            const rows = response['data'];
            // Set routing based on page type
            let routerLink;
            if (rows[0].pagetype === 'BGP') {
                routerLink = `dynamic-search/search/${rows[0].activeVersion.id}`;
            }
            else if (rows[0].pagetype === 'MV') {
                routerLink = `master-view/${page.id}`;
            }
            else if (rows[0].pagetype === 'COMP') {
                routerLink = `composite-page/${page.id}`;
            }
            else if (rows[0].pagetype === 'CP') {
                const config = this.checkParams(rows[0].activeVersion.tabconfig);
                routerLink = `${config[0].pathname}/${rows[0].activeVersion.id}`;
            }
            else {
                routerLink = `page/${page.id}`;
            }
            const items = this.getItemsAtLevel(level);
            this.setRouterLink(items, page.id, routerLink);
            // Process childTabs if available
            if (page.tabs && Array.isArray(page.tabs)) {
                const promises = page.tabs.map(childTab => this.setActiveVersionsAndRoutes(childTab, level + 1));
                return Promise.all(promises).then(responses => {
                    responses.forEach((response, index) => {
                        if (Array.isArray(response)) {
                            // Handle array response
                            console.log(`Response for childTab at index ${index}:`, response);
                        }
                        else {
                            // Handle void response
                            console.log(`No response for childTab at index ${index}`);
                        }
                    });
                }).catch(error => {
                    // Handle errors if any of the promises fail
                    console.error('Error:', error);
                    /* Resolve promises and return void */
                });
            }
            else {
                return Promise.resolve();
            }
        });
    }
    getItemsAtLevel(level) {
        let items = this.tabList;
        for (let i = 0; i < level; i++) {
            items = items.reduce((acc, item) => acc.concat(item.items || []), []);
        }
        return items;
    }
    setRouterLink(items, pageId, routerLink) {
        items.forEach(item => {
            if (item.routerLink === '') {
                item.routerLink = item.id === pageId ? routerLink : '';
            }
        });
    }
    onTabItemClick(tab, subTab = null) {
        this.selectedIndex = tab.tabindex;
        this.selectedSubTabIndex = subTab ? subTab.tabindex : -1;
        this.selectedTabName = tab.label;
        this.selectedSubTabName = subTab ? subTab.label : '';
        this.localstorage.removeItem('setTabAction');
        this.localstorage.removeItem('compositeTitle');
        this.tabactionName = '';
        this.selectedTab = tab;
        this.selectedSubTab = subTab;
        const targetPage = subTab ? subTab : tab;
        this.setActiveVersionsAndRoutes(targetPage, subTab ? 1 : 0).then(() => {
            this.tabRoutingLink(targetPage);
        }).catch(error => {
            console.error('Error setting active versions and routes:', error);
        });
    }
    tabRoutingLink(tab) {
        if (!tab.routerLink.includes('dynamic-search')) {
            this.dataStoreService.setData('gridAction', 'edit');
            this.localstorage.setItem('parentGridPage', '');
            this.localstorage.setItem('AddAction', false);
        }
        this.router.navigate([`${tab.routerLink}`], { relativeTo: this.route, state: this.navigateData });
    }
    onVerticalTabItemClick(tab, index) {
        this.selectedIndex = index;
        this.activeItem = this.tabList[index];
        this.selectedTabName = tab.activeItem.label;
        this.router.navigate([`${tab.activeItem.routerLink}`], { relativeTo: this.route, state: this.navigateData });
    }
    redirect() {
        const id = this.localstorage.getItem('version-id');
        this.router.navigate([`pages/page-design/versions/${id}`]);
        const parentGridPageInfo = JSON.parse(this.localstorage.getItem('backToGridPage'));
        if (parentGridPageInfo && parentGridPageInfo.id) {
            this.router.navigate([`/pages/dynamic-search/search/${parentGridPageInfo.id}`], { relativeTo: this.route });
        }
        else {
            this.router.navigate([`/pages/${parentGridPageInfo.name}`], { relativeTo: this.route });
        }
    }
    backToMain() {
        if (this.tabactionName) {
            this.onTabItemClick(this.selectedTab, this.selectedSubTab);
        }
    }
    ngOnDestroy() {
        this.localstorage.removeItem('navigationState');
        this.pageIdSubscription.unsubscribe();
    }
    getDateFormat(value) {
        if (this.settingInfo) {
            if (value === 'date') {
                return this.settingInfo['datetimeformat'].split(' ')[0];
            }
            return this.settingInfo['datetimeformat'];
        }
        return 'MM/dd/yyyy';
    }
    clearSearch() {
        this.searchTerm = '';
    }
    dynamicRibbonActive(pageId) {
        const tabList = this.tabList;
        let i = 0;
        for (const tabListElement of tabList) {
            if (tabListElement.routerLink === pageId) {
                this.selectedIndex = i;
                this.selectedSubTabIndex = -1;
                this.selectedTabName = tabListElement.label;
                this.selectedSubTabName = '';
                break;
            }
            else {
                const subTabList = tabListElement.items;
                let j = 0;
                for (const subTabListElement of subTabList) {
                    if (subTabListElement.routerLink === pageId) {
                        this.selectedIndex = i;
                        this.selectedSubTabIndex = j;
                        this.selectedTabName = tabListElement.label;
                        this.selectedSubTabName = subTabListElement.label;
                        break;
                    }
                    j += 1;
                }
            }
            i += 1;
        }
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DynamicRibbonComponent, deps: [{ token: i0.Injector }, { token: i1.ActivatedRoute }, { token: i1.Router }, { token: i2.DynamicTabPageService }, { token: i3.LocalStorageService }, { token: i4.DataService }, { token: i5.DataStoreService }, { token: i6.SharedService }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: DynamicRibbonComponent, selector: "app-dynamic-ribbon", inputs: { tabPageId: "tabPageId" }, ngImport: i0, template: "<div class=\"dynamic-ribbon-tabs\">\r\n  <div class=\"col-sm-12 mb-2\">\r\n    <!-- <button type=\"button\" class=\"btn btn-cancel\" (click)=\"redirect()\">\r\n      Back {{ parentGridPage && 'to ' + parentGridPage }}\r\n    </button> -->\r\n  </div>\r\n\r\n  <div class=\"row\">\r\n    <div class=\"left-menu-card\">\r\n      <div class=\"p-3\" id=\"sidebar\" *ngIf=\"tabpageData?.taborientation === 'V'\">\r\n        <div class=\"sidebar-search position-relative mb-3\">\r\n          <input class=\"form-control\" type=\"text\" placeholder=\"Search Tab\" aria-label=\"compose\"\r\n            [(ngModel)]=\"searchTerm\" />\r\n            <span role=\"button\" class=\"close-btn material-symbols-outlined mr-2\" *ngIf=\"!searchTerm\">search</span>\r\n\r\n          <span role=\"button\" class=\"close-btn material-symbols-outlined mr-2\" *ngIf=\"searchTerm\"\r\n            (click)=\"clearSearch()\">close</span>\r\n        </div>\r\n        <div class=\"sidebar-menu\">\r\n          <div class=\"unstyled list-group border-0 text-center text-md-left\" [ngClass]=\"tab.icon? 'icon-enabled':''\"\r\n            *ngFor=\"let tab of tabList | tabfilter: searchTerm: originalTabList\">\r\n            <a *ngIf=\"tab.items.length === 0\" href=\"javascript:void(0)\"\r\n              class=\"list-group-item border-0 d-flex align-items-center text-left\"\r\n              [class.active]=\"selectedTabIndex === tab.tabindex\" (click)=\"onTabItemClick(tab)\">\r\n              <!-- <span class=\"material-symbols-outlined youth-icon mr-2\">{{ tab.icon }}</span> -->\r\n              <span class=\"submenu-name\">{{ tab.label }}</span>\r\n            </a>\r\n            <a *ngIf=\"tab.items.length > 0\" href=\"#tab{{tab.tabindex}}\" data-toggle=\"collapse\"\r\n              class=\"list-group-item border-0 d-flex align-items-center text-left level1\"\r\n              [class.collapsed]=\"selectedIndex !== tab.tabindex\"\r\n              [class.active]=\"selectedIndex === tab.tabindex\"\r\n              [attr.aria-expanded]=\"selectedIndex === tab.tabindex ? 'true' : 'false'\">\r\n              <!-- <span class=\"material-symbols-outlined youth-icon mr-2\">{{ tab.icon }}</span> -->\r\n              <span class=\"menu-name\">{{ tab.label}}</span>\r\n            </a>\r\n            <div class=\"collapse position-relative\" id=\"tab{{tab.tabindex}}\" [class.show]=\"selectedIndex === tab.tabindex\"\r\n              data-parent=\"#sidebar\">\r\n              <div *ngFor=\"let subItem of tab.items\">\r\n                <a href=\"javascript:void(0)\" class=\"list-group-item border-0 d-flex align-items-center text-left\"\r\n                  [class.active]=\"selectedSubTabIndex === subItem.tabindex\"\r\n                  (click)=\"onTabItemClick(tab, subItem)\">\r\n                  <!-- <span class=\"material-symbols-outlined youth-icon mr-2\">{{ subItem.icon }}</span> -->\r\n                  <span class=\"submenu-name\">{{ subItem.label }}</span>\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <ul class=\"nav nav-pills flex-column border shadow\" id=\"myTab\" role=\"tablist\"\r\n        *ngIf=\"tabpageData?.taborientation === 'H'\">\r\n        <ng-container *ngFor=\"let field of ribbonPageData?.fieldmapping\">\r\n          <li class=\"nav-item-btn nav-item border-bottom p-3 youth-image text-center\"\r\n            *ngIf=\"field.field.indexOf('_pic') !== -1\">\r\n            <img [src]=\"dynamicRibbonData && dynamicRibbonData[field.field] || 'assets/images/user-empty.png'\"\r\n              width=\"64\" alt=\"youth image\" />\r\n          </li>\r\n        </ng-container>\r\n        <ng-container *ngFor=\"let field of ribbonPageData?.fieldmapping\">\r\n          <li class=\"nav-item-btn nav-item border-bottom p-3 youth-image text-center\"\r\n            *ngIf=\"field.field.indexOf('_pic') === -1\">\r\n            <p class=\"mb-0\">{{ field.label }}</p>\r\n            <p class=\"mb-0 font-weight-bold\" *ngIf=\"field.datatype === 'date' || field.datatype === 'datetime'\">{{\r\n              dynamicRibbonData && dynamicRibbonData[field.columnDef] | date : getDateFormat(field.datatype) }}</p>\r\n            <p class=\"mb-0 font-weight-bold\" *ngIf=\"field.datatype !== 'date' && field.datatype !== 'datetime'\">{{\r\n              dynamicRibbonData && dynamicRibbonData[field.columnDef] }}</p>\r\n          </li>\r\n        </ng-container>\r\n      </ul>\r\n    </div>\r\n    <div class=\"right-section mb-3 pl-3\">\r\n      <app-dynamic-ribbon-page [tabOrientation]=\"tabpageData?.taborientation\" [ribbonData]=\"ribbonPageData\"\r\n        [dynamicRibbonData]=\"dynamicRibbonData\" [selectedTabName]=\"selectedTabName\" [ribbonConfig]=\"ribbonConfig\"\r\n        [selectedSubTabIndex]=\"selectedSubTabIndex\" [settingInfo]=\"settingInfo\"></app-dynamic-ribbon-page>\r\n      <div class=\"tab-content\">\r\n        <div *ngIf=\"tabpageData?.taborientation === 'H'\">\r\n          <p-tabMenu [model]=\"tabList\" #tab [activeItem]=\"activeItem\" [scrollable]=\"true\">\r\n            <ng-template pTemplate=\"item\" let-item let-i=\"index\">\r\n              <div class=\"d-flex align-items-center\" (click)=\"onVerticalTabItemClick(tab, i)\">\r\n                <span class=\"material-symbols-outlined mr-2\">{{ item.icon }}</span>\r\n                <span class=\"lable-name\">{{ item.label }}</span>\r\n              </div>\r\n            </ng-template>\r\n          </p-tabMenu>\r\n        </div>\r\n        <header *ngIf=\"selectedSubTabName || selectedTabName\" class=\"ribbon\" title=\"{{ selectedTabName }}\">\r\n          <button (click)=\"backToMain()\" [ngClass]=\"{'active-tab': tabactionName}\">\r\n            {{ selectedSubTabName ? selectedSubTabName : selectedTabName }}\r\n          </button>\r\n          <span [innerHTML]=\"tabactionName\" class=\"subPages\">{{tabactionName}}</span>\r\n        </header>\r\n        <router-outlet></router-outlet>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>", styles: [".nav-item button{width:100%}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{background:var(--primary)}.left-menu-card ul{background:var(--bg-light)}.youth-submenu{border-radius:3px}.youth-submenu li:first-child button{border-top-left-radius:3px;border-top-right-radius:3px}.youth-submenu li:last-child button{border-bottom-left-radius:3px;border-bottom-right-radius:3px}.youth-submenu li button{border-radius:0}.youth-submenu li button span.material-icons{width:0;padding-right:30px}.ribbon{background-color:#afd462;display:inline-block;margin-top:0;position:relative;color:#1f1f1f;height:35px;text-transform:capitalize;padding-left:15px;padding-right:15px;line-height:35px;margin-bottom:20px}.ribbon:after{content:\"\";position:absolute;top:0;right:-34px;border-bottom:35px solid #afd462;border-right:35px solid transparent}.ribbon button{background:transparent;border:none;cursor:default;font-weight:600}.ribbon button.active-tab{cursor:pointer;font-weight:400}.ribbon button.active-tab:hover{text-decoration:underline;font-weight:600}.ribbon .subPages{color:var(--text-dark);font-weight:600;padding-left:5px}.ribbon .subPages .pipe-style{font-weight:400}:host ::ng-deep .p-tabmenu-nav li a .material-icons{padding-right:10px}:host ::ng-deep .p-tabmenu-nav li a .lable-name{font-size:var(--font-14)}.ribbon-img{display:flex;align-items:center;justify-content:center;height:100%}.bg-white{background-color:#fff}.ribbon-info{padding:12px}.ribbon-info table{width:100%}.ribbon-info table th{font-weight:400!important}.ribbon-info table td{padding:5px 0 0}#sidebar{background-color:#f4fcff;z-index:3}#sidebar .sidebar-search input{padding-right:40px}#sidebar .sidebar-search .close-btn{position:absolute;top:6px;right:5px;opacity:.5;font-size:21px}#sidebar .list-group .list-group-item{padding-left:10px;color:var(--text-dark);font-size:var(--font-14)}#sidebar .list-group .list-group-item[aria-expanded=false]:after{font-family:Material Icons,monospace;content:\"\\e5cf\";display:block;position:absolute;left:auto;right:15px;width:17px;height:24px;top:50%;transform:translateY(-50%);font-size:24px;margin-top:-5px}#sidebar .list-group .list-group-item[aria-expanded=true]:after{font-family:Material Icons,monospace;content:\"\\e5ce\";display:block;position:absolute;left:auto;right:15px;width:17px;height:24px;top:50%;transform:translateY(-50%);font-size:24px;margin-top:-5px}#sidebar .list-group .list-group-item.level1{font-weight:400}#sidebar .list-group .list-group-item.level1.active{background:#e5f6fe!important;color:#081319;border-left:3px solid #1258a7!important;box-shadow:0 0 10px #c7c8c9;font-size:14px}#sidebar .list-group .list-group-item .menu-name,#sidebar .list-group .list-group-item .submenu-name{width:calc(100% - 15px)}#sidebar .list-group .list-group-item .youth-icon{width:24px}#sidebar .list-group .list-group-item.active{background:var(--menu-highlight);border-radius:0}#sidebar .list-group .collapse{transition:transform .2s ease-out;padding-left:10px;background:var(--bg-light)}#sidebar .list-group .collapse .list-group-item{padding-left:10px}#sidebar .list-group .collapse .list-group-item.active{font-weight:600;color:#0d3178}#sidebar .list-group .collapse .collapse{transition:transform .2s ease-out;padding-left:10px;background:var(--bg-light)}#sidebar .list-group .collapse .collapse .list-group-item{padding-left:20px}#sidebar .list-group .collapse .collapse .list-group-item.active{font-weight:600;color:#0d3178}#sidebar .list-group .collapse.show{transition:transform .2s ease-out}#sidebar .list-group .collapse.show .list-group-item:before{content:\"\";display:inline-block;border-left:1px solid #e5f6ff;position:absolute;width:2px;height:100%;left:0;top:0}#sidebar .list-group .collapse.show .list-group-item.active:before,#sidebar .list-group .collapse.show .list-group-item:hover:before{border-left:2px solid #0084d1}#sidebar .list-group .collapse.show .list-group-item.active{background:var(--bg-light);color:#0d3178}@media screen and (min-width: 991px){#sidebar{overflow:hidden;height:calc(100vh - 120px)}#sidebar .sidebar-menu{overflow:auto;max-height:calc(100% - 50px)}}@media screen and (min-width: 768px){.left-menu-card{width:240px}.right-section{width:calc(100% - 255px)}}@media screen and (min-width: 768px) and (max-width: 990px){#sidebar{overflow:hidden;height:calc(100vh - 145px)}#sidebar .sidebar-menu{overflow:auto;max-height:100%}}@media screen and (max-width: 767px){#sidebar .sidebar-menu{overflow:auto;max-height:425px}.left-menu-card,.right-section{width:100%}}@media screen and (max-width: 520px){.pl-ys{padding:0 15px!important}}\n"], dependencies: [{ kind: "directive", type: i7.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i7.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i7.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i8.PrimeTemplate, selector: "[pTemplate]", inputs: ["type", "pTemplate"] }, { kind: "component", type: i9.TabMenu, selector: "p-tabMenu", inputs: ["model", "activeItem", "scrollable", "popup", "style", "styleClass", "ariaLabel", "ariaLabelledBy"], outputs: ["activeItemChange"] }, { kind: "directive", type: i1.RouterOutlet, selector: "router-outlet", inputs: ["name"], outputs: ["activate", "deactivate", "attach", "detach"], exportAs: ["outlet"] }, { kind: "directive", type: i10.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i10.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i10.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i11.DynamicRibbonPageComponent, selector: "app-dynamic-ribbon-page", inputs: ["tabOrientation", "dynamicRibbonData", "ribbonData", "selectedTabName", "selectedSubTabIndex", "settingInfo", "ribbonConfig"] }, { kind: "pipe", type: i7.DatePipe, name: "date" }, { kind: "pipe", type: i12.TabFilterPipe, name: "tabfilter" }] });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DynamicRibbonComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-dynamic-ribbon', template: "<div class=\"dynamic-ribbon-tabs\">\r\n  <div class=\"col-sm-12 mb-2\">\r\n    <!-- <button type=\"button\" class=\"btn btn-cancel\" (click)=\"redirect()\">\r\n      Back {{ parentGridPage && 'to ' + parentGridPage }}\r\n    </button> -->\r\n  </div>\r\n\r\n  <div class=\"row\">\r\n    <div class=\"left-menu-card\">\r\n      <div class=\"p-3\" id=\"sidebar\" *ngIf=\"tabpageData?.taborientation === 'V'\">\r\n        <div class=\"sidebar-search position-relative mb-3\">\r\n          <input class=\"form-control\" type=\"text\" placeholder=\"Search Tab\" aria-label=\"compose\"\r\n            [(ngModel)]=\"searchTerm\" />\r\n            <span role=\"button\" class=\"close-btn material-symbols-outlined mr-2\" *ngIf=\"!searchTerm\">search</span>\r\n\r\n          <span role=\"button\" class=\"close-btn material-symbols-outlined mr-2\" *ngIf=\"searchTerm\"\r\n            (click)=\"clearSearch()\">close</span>\r\n        </div>\r\n        <div class=\"sidebar-menu\">\r\n          <div class=\"unstyled list-group border-0 text-center text-md-left\" [ngClass]=\"tab.icon? 'icon-enabled':''\"\r\n            *ngFor=\"let tab of tabList | tabfilter: searchTerm: originalTabList\">\r\n            <a *ngIf=\"tab.items.length === 0\" href=\"javascript:void(0)\"\r\n              class=\"list-group-item border-0 d-flex align-items-center text-left\"\r\n              [class.active]=\"selectedTabIndex === tab.tabindex\" (click)=\"onTabItemClick(tab)\">\r\n              <!-- <span class=\"material-symbols-outlined youth-icon mr-2\">{{ tab.icon }}</span> -->\r\n              <span class=\"submenu-name\">{{ tab.label }}</span>\r\n            </a>\r\n            <a *ngIf=\"tab.items.length > 0\" href=\"#tab{{tab.tabindex}}\" data-toggle=\"collapse\"\r\n              class=\"list-group-item border-0 d-flex align-items-center text-left level1\"\r\n              [class.collapsed]=\"selectedIndex !== tab.tabindex\"\r\n              [class.active]=\"selectedIndex === tab.tabindex\"\r\n              [attr.aria-expanded]=\"selectedIndex === tab.tabindex ? 'true' : 'false'\">\r\n              <!-- <span class=\"material-symbols-outlined youth-icon mr-2\">{{ tab.icon }}</span> -->\r\n              <span class=\"menu-name\">{{ tab.label}}</span>\r\n            </a>\r\n            <div class=\"collapse position-relative\" id=\"tab{{tab.tabindex}}\" [class.show]=\"selectedIndex === tab.tabindex\"\r\n              data-parent=\"#sidebar\">\r\n              <div *ngFor=\"let subItem of tab.items\">\r\n                <a href=\"javascript:void(0)\" class=\"list-group-item border-0 d-flex align-items-center text-left\"\r\n                  [class.active]=\"selectedSubTabIndex === subItem.tabindex\"\r\n                  (click)=\"onTabItemClick(tab, subItem)\">\r\n                  <!-- <span class=\"material-symbols-outlined youth-icon mr-2\">{{ subItem.icon }}</span> -->\r\n                  <span class=\"submenu-name\">{{ subItem.label }}</span>\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <ul class=\"nav nav-pills flex-column border shadow\" id=\"myTab\" role=\"tablist\"\r\n        *ngIf=\"tabpageData?.taborientation === 'H'\">\r\n        <ng-container *ngFor=\"let field of ribbonPageData?.fieldmapping\">\r\n          <li class=\"nav-item-btn nav-item border-bottom p-3 youth-image text-center\"\r\n            *ngIf=\"field.field.indexOf('_pic') !== -1\">\r\n            <img [src]=\"dynamicRibbonData && dynamicRibbonData[field.field] || 'assets/images/user-empty.png'\"\r\n              width=\"64\" alt=\"youth image\" />\r\n          </li>\r\n        </ng-container>\r\n        <ng-container *ngFor=\"let field of ribbonPageData?.fieldmapping\">\r\n          <li class=\"nav-item-btn nav-item border-bottom p-3 youth-image text-center\"\r\n            *ngIf=\"field.field.indexOf('_pic') === -1\">\r\n            <p class=\"mb-0\">{{ field.label }}</p>\r\n            <p class=\"mb-0 font-weight-bold\" *ngIf=\"field.datatype === 'date' || field.datatype === 'datetime'\">{{\r\n              dynamicRibbonData && dynamicRibbonData[field.columnDef] | date : getDateFormat(field.datatype) }}</p>\r\n            <p class=\"mb-0 font-weight-bold\" *ngIf=\"field.datatype !== 'date' && field.datatype !== 'datetime'\">{{\r\n              dynamicRibbonData && dynamicRibbonData[field.columnDef] }}</p>\r\n          </li>\r\n        </ng-container>\r\n      </ul>\r\n    </div>\r\n    <div class=\"right-section mb-3 pl-3\">\r\n      <app-dynamic-ribbon-page [tabOrientation]=\"tabpageData?.taborientation\" [ribbonData]=\"ribbonPageData\"\r\n        [dynamicRibbonData]=\"dynamicRibbonData\" [selectedTabName]=\"selectedTabName\" [ribbonConfig]=\"ribbonConfig\"\r\n        [selectedSubTabIndex]=\"selectedSubTabIndex\" [settingInfo]=\"settingInfo\"></app-dynamic-ribbon-page>\r\n      <div class=\"tab-content\">\r\n        <div *ngIf=\"tabpageData?.taborientation === 'H'\">\r\n          <p-tabMenu [model]=\"tabList\" #tab [activeItem]=\"activeItem\" [scrollable]=\"true\">\r\n            <ng-template pTemplate=\"item\" let-item let-i=\"index\">\r\n              <div class=\"d-flex align-items-center\" (click)=\"onVerticalTabItemClick(tab, i)\">\r\n                <span class=\"material-symbols-outlined mr-2\">{{ item.icon }}</span>\r\n                <span class=\"lable-name\">{{ item.label }}</span>\r\n              </div>\r\n            </ng-template>\r\n          </p-tabMenu>\r\n        </div>\r\n        <header *ngIf=\"selectedSubTabName || selectedTabName\" class=\"ribbon\" title=\"{{ selectedTabName }}\">\r\n          <button (click)=\"backToMain()\" [ngClass]=\"{'active-tab': tabactionName}\">\r\n            {{ selectedSubTabName ? selectedSubTabName : selectedTabName }}\r\n          </button>\r\n          <span [innerHTML]=\"tabactionName\" class=\"subPages\">{{tabactionName}}</span>\r\n        </header>\r\n        <router-outlet></router-outlet>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>", styles: [".nav-item button{width:100%}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{background:var(--primary)}.left-menu-card ul{background:var(--bg-light)}.youth-submenu{border-radius:3px}.youth-submenu li:first-child button{border-top-left-radius:3px;border-top-right-radius:3px}.youth-submenu li:last-child button{border-bottom-left-radius:3px;border-bottom-right-radius:3px}.youth-submenu li button{border-radius:0}.youth-submenu li button span.material-icons{width:0;padding-right:30px}.ribbon{background-color:#afd462;display:inline-block;margin-top:0;position:relative;color:#1f1f1f;height:35px;text-transform:capitalize;padding-left:15px;padding-right:15px;line-height:35px;margin-bottom:20px}.ribbon:after{content:\"\";position:absolute;top:0;right:-34px;border-bottom:35px solid #afd462;border-right:35px solid transparent}.ribbon button{background:transparent;border:none;cursor:default;font-weight:600}.ribbon button.active-tab{cursor:pointer;font-weight:400}.ribbon button.active-tab:hover{text-decoration:underline;font-weight:600}.ribbon .subPages{color:var(--text-dark);font-weight:600;padding-left:5px}.ribbon .subPages .pipe-style{font-weight:400}:host ::ng-deep .p-tabmenu-nav li a .material-icons{padding-right:10px}:host ::ng-deep .p-tabmenu-nav li a .lable-name{font-size:var(--font-14)}.ribbon-img{display:flex;align-items:center;justify-content:center;height:100%}.bg-white{background-color:#fff}.ribbon-info{padding:12px}.ribbon-info table{width:100%}.ribbon-info table th{font-weight:400!important}.ribbon-info table td{padding:5px 0 0}#sidebar{background-color:#f4fcff;z-index:3}#sidebar .sidebar-search input{padding-right:40px}#sidebar .sidebar-search .close-btn{position:absolute;top:6px;right:5px;opacity:.5;font-size:21px}#sidebar .list-group .list-group-item{padding-left:10px;color:var(--text-dark);font-size:var(--font-14)}#sidebar .list-group .list-group-item[aria-expanded=false]:after{font-family:Material Icons,monospace;content:\"\\e5cf\";display:block;position:absolute;left:auto;right:15px;width:17px;height:24px;top:50%;transform:translateY(-50%);font-size:24px;margin-top:-5px}#sidebar .list-group .list-group-item[aria-expanded=true]:after{font-family:Material Icons,monospace;content:\"\\e5ce\";display:block;position:absolute;left:auto;right:15px;width:17px;height:24px;top:50%;transform:translateY(-50%);font-size:24px;margin-top:-5px}#sidebar .list-group .list-group-item.level1{font-weight:400}#sidebar .list-group .list-group-item.level1.active{background:#e5f6fe!important;color:#081319;border-left:3px solid #1258a7!important;box-shadow:0 0 10px #c7c8c9;font-size:14px}#sidebar .list-group .list-group-item .menu-name,#sidebar .list-group .list-group-item .submenu-name{width:calc(100% - 15px)}#sidebar .list-group .list-group-item .youth-icon{width:24px}#sidebar .list-group .list-group-item.active{background:var(--menu-highlight);border-radius:0}#sidebar .list-group .collapse{transition:transform .2s ease-out;padding-left:10px;background:var(--bg-light)}#sidebar .list-group .collapse .list-group-item{padding-left:10px}#sidebar .list-group .collapse .list-group-item.active{font-weight:600;color:#0d3178}#sidebar .list-group .collapse .collapse{transition:transform .2s ease-out;padding-left:10px;background:var(--bg-light)}#sidebar .list-group .collapse .collapse .list-group-item{padding-left:20px}#sidebar .list-group .collapse .collapse .list-group-item.active{font-weight:600;color:#0d3178}#sidebar .list-group .collapse.show{transition:transform .2s ease-out}#sidebar .list-group .collapse.show .list-group-item:before{content:\"\";display:inline-block;border-left:1px solid #e5f6ff;position:absolute;width:2px;height:100%;left:0;top:0}#sidebar .list-group .collapse.show .list-group-item.active:before,#sidebar .list-group .collapse.show .list-group-item:hover:before{border-left:2px solid #0084d1}#sidebar .list-group .collapse.show .list-group-item.active{background:var(--bg-light);color:#0d3178}@media screen and (min-width: 991px){#sidebar{overflow:hidden;height:calc(100vh - 120px)}#sidebar .sidebar-menu{overflow:auto;max-height:calc(100% - 50px)}}@media screen and (min-width: 768px){.left-menu-card{width:240px}.right-section{width:calc(100% - 255px)}}@media screen and (min-width: 768px) and (max-width: 990px){#sidebar{overflow:hidden;height:calc(100vh - 145px)}#sidebar .sidebar-menu{overflow:auto;max-height:100%}}@media screen and (max-width: 767px){#sidebar .sidebar-menu{overflow:auto;max-height:425px}.left-menu-card,.right-section{width:100%}}@media screen and (max-width: 520px){.pl-ys{padding:0 15px!important}}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: i1.ActivatedRoute }, { type: i1.Router }, { type: i2.DynamicTabPageService }, { type: i3.LocalStorageService }, { type: i4.DataService }, { type: i5.DataStoreService }, { type: i6.SharedService }]; }, propDecorators: { tabPageId: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy1yaWJib24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGljcy1jb3JlL2R5bmFtaWMvc3JjL2xpYi9waWNzLWR5bmFtaWMvZHluYW1pYy1yaWJib24vZHluYW1pYy1yaWJib24uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGljcy1jb3JlL2R5bmFtaWMvc3JjL2xpYi9waWNzLWR5bmFtaWMvZHluYW1pYy1yaWJib24vZHluYW1pYy1yaWJib24uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBNkIsS0FBSyxFQUFxQixNQUFNLGVBQWUsQ0FBQztBQUkvRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDOUQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFFOUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUNBQXFDLENBQUM7Ozs7Ozs7Ozs7Ozs7O0FBU3ZFLE1BQU0sT0FBTyxzQkFBc0I7SUFxQ3ZCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBMUNWLElBQUksQ0FBTTtJQUNELFNBQVMsQ0FBTTtJQUN4QixPQUFPLEdBQWUsRUFBRSxDQUFDO0lBQ3pCLGVBQWUsR0FBZSxFQUFFLENBQUM7SUFDakMsWUFBWSxDQUFNO0lBQ2xCLGlCQUFpQixDQUFTO0lBQzFCLG1CQUFtQixDQUFNO0lBQ3pCLGFBQWEsR0FBUSxDQUFDLENBQUM7SUFDdkIsY0FBYyxDQUFNO0lBQ3BCLFlBQVksQ0FBZTtJQUMzQixXQUFXLENBQU07SUFDakIsb0JBQW9CLENBQXVCO0lBQzNDLGlCQUFpQixHQUFRLEVBQUUsQ0FBQztJQUM1QixjQUFjLENBQU07SUFDcEIsVUFBVSxDQUFZO0lBQ3RCLFdBQVcsQ0FBTTtJQUNqQixn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TUFBTTthQUNQO2lCQUFNO2dCQUNMLE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUM7Z0JBQ3hDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDVixLQUFLLE1BQU0saUJBQWlCLElBQUksVUFBVSxFQUFFO29CQUMxQyxJQUFJLGlCQUFpQixDQUFDLFVBQVUsS0FBSyxNQUFNLEVBQUU7d0JBQzNDLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDO3dCQUN2QixJQUFJLENBQUMsbUJBQW1CLEdBQUcsQ0FBQyxDQUFDO3dCQUM3QixJQUFJLENBQUMsZUFBZSxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUM7d0JBQzVDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxpQkFBaUIsQ0FBQyxLQUFLLENBQUM7d0JBQ2xELE1BQU07cUJBQ1A7b0JBQ0QsQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDUjthQUNGO1lBQ0QsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNSO0lBQ0gsQ0FBQzt3R0ExWVUsc0JBQXNCOzRGQUF0QixzQkFBc0IsOEZDaEJuQywwNUxBaUdNOzs0RkRqRk8sc0JBQXNCO2tCQUxsQyxTQUFTOytCQUNFLG9CQUFvQjs0U0FNckIsU0FBUztzQkFBakIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRG9DaGVjaywgaW5qZWN0LCBJbmplY3RvciwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlLCBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQgeyBEeW5hbWljVGFiUGFnZVNlcnZpY2UgfSBmcm9tICcuLi9AY29yZS9zZXJ2aWNlL2R5bmFtaWMtdGFiLXBhZ2Utc2VydmljZSc7XHJcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAncHJpbWVuZy9hcGknO1xyXG5pbXBvcnQgeyBMb2NhbFNlcnZpY2UgfSBmcm9tICcuLi9AY29yZS9zZXJ2aWNlL2xvY2FsLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBEeW5hbWljc2VhcmNoU2VydmljZSB9IGZyb20gJy4uL0Bjb3JlL3NlcnZpY2UvZHluYW1pY3NlYXJjaC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTG9jYWxTdG9yYWdlU2VydmljZSB9IGZyb20gJy4uL0Bjb3JlL2xvY2FsLXN0b3JhZ2UvbG9jYWwtc3RvcmFnZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YVN0b3JlU2VydmljZSB9IGZyb20gJy4uL0Bjb3JlL3NlcnZpY2UvZGF0YS1zdG9yZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vQGNvcmUvc2VydmljZS9keW5hbWljLXJpYmJvbi1kYXRhLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTaGFyZWRTZXJ2aWNlIH0gZnJvbSAnLi4vQGNvcmUvc2VydmljZS9zaGFyZWQuc2VydmljZSc7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLWR5bmFtaWMtcmliYm9uJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vZHluYW1pYy1yaWJib24uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2R5bmFtaWMtcmliYm9uLmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIER5bmFtaWNSaWJib25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIERvQ2hlY2ssIE9uRGVzdHJveSB7XHJcbiAgaXRlbTogYW55O1xyXG4gIEBJbnB1dCgpIHRhYlBhZ2VJZDogYW55O1xyXG4gIHRhYkxpc3Q6IE1lbnVJdGVtW10gPSBbXTtcclxuICBvcmlnaW5hbFRhYkxpc3Q6IE1lbnVJdGVtW10gPSBbXTtcclxuICBuYXZpZ2F0ZURhdGE6IGFueTtcclxuICBjdXJyZW50Um91dGVyTGluazogc3RyaW5nO1xyXG4gIHRvZ2dsZU1vYmlsZVNpZGViYXI6IGFueTtcclxuICBzZWxlY3RlZEluZGV4OiBhbnkgPSAwO1xyXG4gIHBhcmVudEdyaWRQYWdlOiBhbnk7XHJcbiAgbG9jYWxzdG9yYWdlOiBMb2NhbFNlcnZpY2U7XHJcbiAgdGFicGFnZURhdGE6IGFueTtcclxuICBkeW5hbWljU2VhcmNoU2VydmljZTogRHluYW1pY3NlYXJjaFNlcnZpY2U7XHJcbiAgZHluYW1pY1JpYmJvbkRhdGE6IGFueSA9IHt9O1xyXG4gIHJpYmJvblBhZ2VEYXRhOiBhbnk7XHJcbiAgYWN0aXZlSXRlbSE6IE1lbnVJdGVtO1xyXG4gIHNldHRpbmdJbmZvOiBhbnk7XHJcbiAgZGF0YVN0b3JlU2VydmljZTogRGF0YVN0b3JlU2VydmljZTtcclxuICBzZWFyY2hUZXJtID0gJyc7XHJcbiAgc2VsZWN0ZWRTdWJUYWJJbmRleDogYW55ID0gLTE7XHJcbiAgc2VsZWN0ZWRUYWJOYW1lID0gJyc7XHJcbiAgc2VsZWN0ZWRTdWJUYWJOYW1lID0gJyc7XHJcbiAgcmliYm9uQ29uZmlnOiBhbnk7XHJcbiAgc291cmNlS2V5OiBzdHJpbmc7XHJcbiAgc291cmNlVmFsdWU6IHN0cmluZztcclxuICBzb3VyY2VUeXBlOiBzdHJpbmc7XHJcbiAgc2VsZWN0ZWRQYWdlSWQ6IHN0cmluZztcclxuICBwYWdlSWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICBwcml2YXRlIHRhYkluZGV4Q291bnRlcjogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIHRhYlN1YkluZGV4Q291bnRlcjogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIGxhc3RQYWdlSUQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG4gIHRhYmFjdGlvbk5hbWU6IHN0cmluZyA9ICcnO1xyXG4gIHNlbGVjdGVkVGFiOiBhbnk7XHJcbiAgc2VsZWN0ZWRTdWJUYWI6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcclxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXHJcbiAgICBwcml2YXRlIGR5bmFtaWNUYWJQYWdlU2VydmljZTogRHluYW1pY1RhYlBhZ2VTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBzdG9yYWdlU2VydmljZTogTG9jYWxTdG9yYWdlU2VydmljZSxcclxuICAgIHByaXZhdGUgZGF0YTogRGF0YVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIF9zdG9yZXNlcnZpY2U6IERhdGFTdG9yZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHNoYXJlZFNlcnZpY2U6IFNoYXJlZFNlcnZpY2UsXHJcbiAgKSB7XHJcbiAgICB0aGlzLnRhYlBhZ2VJZCA9IHRoaXMucm91dGUuc25hcHNob3QucGFyYW1NYXAuZ2V0KCd0YWJJZCcpO1xyXG4gICAgdGhpcy5zb3VyY2VLZXkgPSB0aGlzLnJvdXRlLnNuYXBzaG90LnBhcmFtTWFwLmdldCgnc291cmNlS2V5Jyk7XHJcbiAgICB0aGlzLnNvdXJjZVZhbHVlID0gdGhpcy5yb3V0ZS5zbmFwc2hvdC5wYXJhbU1hcC5nZXQoJ3NvdXJjZVZhbHVlJyk7XHJcbiAgICB0aGlzLnNvdXJjZVR5cGUgPSB0aGlzLnJvdXRlLnNuYXBzaG90LnBhcmFtTWFwLmdldCgnc291cmNlVHlwZScpO1xyXG4gICAgdGhpcy5sb2NhbHN0b3JhZ2UgPSBpbmplY3Rvci5nZXQ8TG9jYWxTZXJ2aWNlPihMb2NhbFNlcnZpY2UpO1xyXG4gICAgdGhpcy5uYXZpZ2F0ZURhdGEgPSB0aGlzLnJvdXRlcj8uZ2V0Q3VycmVudE5hdmlnYXRpb24oKT8uZXh0cmFzPy5zdGF0ZTtcclxuICAgIHRoaXMuZHluYW1pY1NlYXJjaFNlcnZpY2UgPSBpbmplY3Rvci5nZXQ8RHluYW1pY3NlYXJjaFNlcnZpY2U+KER5bmFtaWNzZWFyY2hTZXJ2aWNlKTtcclxuICAgIHRoaXMuZGF0YVN0b3JlU2VydmljZSA9IGluamVjdG9yLmdldDxEYXRhU3RvcmVTZXJ2aWNlPihEYXRhU3RvcmVTZXJ2aWNlKTtcclxuXHJcbiAgICB0aGlzLnNoYXJlZFNlcnZpY2UuY3VycmVudE1lc3NhZ2Uuc3Vic2NyaWJlKChfbWVzc2FnZTogYW55KSA9PiB7XHJcbiAgICAgIGlmKHRoaXMubG9jYWxzdG9yYWdlLmdldEl0ZW0oJ2NvbXBvc2l0ZVRpdGxlJykpIHtcclxuICAgICAgICB0aGlzLnRhYmFjdGlvbk5hbWUgPSBgPHNtYWxsIGNsYXNzPVwicGlwZS1zdHlsZVwiPnw8L3NtYWxsPiAke3RoaXMubG9jYWxzdG9yYWdlLmdldEl0ZW0oJ3NldFRhYkFjdGlvbicpfSAke3RoaXMubG9jYWxzdG9yYWdlLmdldEl0ZW0oJ2NvbXBvc2l0ZVRpdGxlJyl9YDtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmxvY2Fsc3RvcmFnZS5nZXRJdGVtKCdzZXRUYWJBY3Rpb24nKSkge1xyXG4gICAgICAgIHRoaXMudGFiYWN0aW9uTmFtZSA9IGA8c21hbGwgY2xhc3M9XCJwaXBlLXN0eWxlXCI+fDwvc21hbGw+ICR7dGhpcy5sb2NhbHN0b3JhZ2UuZ2V0SXRlbSgnc2V0VGFiQWN0aW9uJyl9ICR7dGhpcy5zZWxlY3RlZFN1YlRhYk5hbWV9YDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnRhYmFjdGlvbk5hbWUgPScnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5nZXREeW5hbWljVGFiKCk7XHJcbiAgICAvLyB0aGlzLl9zdG9yZXNlcnZpY2UuY3VycmVudFN0b3JlLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgIC8vICAgaWYgKHJlcykge1xyXG4gICAgLy8gICAgIHRoaXMuc2hhcmVkU2VydmljZSA9IHJlc1snU0hBUkVEU0VSVklDRSddXHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH0pXHJcbiAgICBjb25zdCBSRUdJU1RSQVRJT04gPSB0aGlzLnN0b3JhZ2VTZXJ2aWNlLmdldEl0ZW0oJ1JFR0lTVFJBVElPTicpO1xyXG4gICAgaWYgKFJFR0lTVFJBVElPTikge1xyXG4gICAgICB0aGlzLnNldHRpbmdJbmZvID0gSlNPTi5wYXJzZShSRUdJU1RSQVRJT04pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wYWdlSWRTdWJzY3JpcHRpb24gPSB0aGlzLmRhdGEuY3VycmVudFBhZ2VJZC5zdWJzY3JpYmUocGFnZUlkID0+IHtcclxuICAgICAgaWYgKHBhZ2VJZCkge1xyXG4gICAgICAgIHRoaXMuZHluYW1pY1JpYmJvbkFjdGl2ZShwYWdlSWQpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRQYWdlSWQgPSBwYWdlSWRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG5nRG9DaGVjaygpIHtcclxuICAgIGNvbnN0IHBhZ2VJRCA9IHRoaXMucm91dGUuc25hcHNob3QucXVlcnlQYXJhbXNbJ3BhZ2VJRCddO1xyXG5cclxuICAgIGlmIChwYWdlSUQgJiYgcGFnZUlEICE9PSB0aGlzLmxhc3RQYWdlSUQpIHtcclxuICAgICAgdGhpcy5sYXN0UGFnZUlEID0gcGFnZUlEO1xyXG4gICAgICB0aGlzLmFjdGl2YXRlVGFiQnlQYWdlSUQocGFnZUlEKTtcclxuICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgIHRoaXMudGFiTGlzdCAmJlxyXG4gICAgICB0aGlzLnRhYkxpc3QubGVuZ3RoICYmXHJcbiAgICAgIHRoaXMudGFiTGlzdFswXT8ucm91dGVyTGluayAmJlxyXG4gICAgICB0aGlzLnRhYkxpc3RbMF0/LnJvdXRlckxpbmsgIT09ICcnICYmXHJcbiAgICAgIHRoaXMuY3VycmVudFJvdXRlckxpbmsgIT09IHRoaXMudGFiTGlzdFswXT8ucm91dGVyTGlua1xyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRwYWdlID0gdGhpcy5sb2NhbHN0b3JhZ2UuZ2V0SXRlbSgncGFnZW5hbWUnKTtcclxuICAgICAgdGhpcy5wYXJlbnRHcmlkUGFnZSA9IGN1cnJlbnRwYWdlID8gY3VycmVudHBhZ2UgOiAnJztcclxuICAgICAgdGhpcy5sb2NhbHN0b3JhZ2Uuc2V0SXRlbSgnbmF2aWdhdGlvblN0YXRlJywgSlNPTi5zdHJpbmdpZnkodGhpcy5uYXZpZ2F0ZURhdGEpKTtcclxuICAgICAgdGhpcy5hY3RpdmVJdGVtID0gdGhpcy50YWJMaXN0WzBdO1xyXG4gICAgICAvL3RoaXMuc2VsZWN0ZWRUYWJOYW1lID0gdGhpcy50YWJMaXN0WzBdLmxhYmVsO1xyXG4gICAgICBpZiAodGhpcy50YWJMaXN0WzBdLml0ZW1zLmxlbmd0aCA+IDAgJiYgdGhpcy50YWJMaXN0WzBdLml0ZW1zWzBdLnJvdXRlckxpbmsgIT09ICcnXHJcbiAgICAgICAgJiYgdGhpcy5jdXJyZW50Um91dGVyTGluayAhPT0gdGhpcy50YWJMaXN0WzBdLml0ZW1zWzBdLnJvdXRlckxpbmtcclxuICAgICAgICAmJiB0aGlzLnRhYnBhZ2VEYXRhLnRhYm9yaWVudGF0aW9uID09PSAnVicpIHtcclxuICAgICAgICB0aGlzLm9uVGFiSXRlbUNsaWNrKHRoaXMudGFiTGlzdFswXSwgdGhpcy50YWJMaXN0WzBdLml0ZW1zWzBdKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZXJMaW5rID0gdGhpcy50YWJMaXN0WzBdLml0ZW1zWzBdLnJvdXRlckxpbms7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50YWJMaXN0WzBdLml0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMub25UYWJJdGVtQ2xpY2sodGhpcy50YWJMaXN0WzBdLCAwKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZXJMaW5rID0gdGhpcy50YWJMaXN0WzBdPy5yb3V0ZXJMaW5rO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZVRhYkJ5UGFnZUlEKHBhZ2VJRDogc3RyaW5nKSB7XHJcbiAgICBmb3IgKGxldCB0YWIgb2YgdGhpcy50YWJMaXN0KSB7XHJcbiAgICAgIGlmICh0YWIuaWQgPT0gcGFnZUlEKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Um91dGVyTGluayA9IHRhYi5yb3V0ZXJMaW5rO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbSA9IHRhYjtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSB0YWIudGFiaW5kZXg7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFRhYk5hbWUgPSB0YWIubGFiZWw7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGFiLml0ZW1zICYmIHRhYi5pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICBmb3IgKGxldCBzdWJUYWIgb2YgdGFiLml0ZW1zKSB7XHJcbiAgICAgICAgICBpZiAoc3ViVGFiLmlkID09IHBhZ2VJRCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZXJMaW5rID0gc3ViVGFiLnJvdXRlckxpbms7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbSA9IHRhYjtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGFiLnRhYmluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU3ViVGFiSW5kZXggPSBzdWJUYWIudGFiaW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWJOYW1lID0gdGFiLmxhYmVsO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU3ViVGFiTmFtZSA9IHN1YlRhYi5sYWJlbDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0RHluYW1pY1RhYigpIHtcclxuICAgIHRoaXMuZHluYW1pY1RhYlBhZ2VTZXJ2aWNlLmdldEFjdGl2ZVBhZ2UodGhpcy50YWJQYWdlSWQsIHRydWUpLnN1YnNjcmliZSh2YWx1ZSA9PiB7XHJcbiAgICAgIHRoaXMudGFicGFnZURhdGEgPSB2YWx1ZVsnZGF0YSddO1xyXG4gICAgICBjb25zdCB0YWJDb25maWcgPSAgdGhpcy5jaGVja1BhcmFtcyh2YWx1ZVsnZGF0YSddWyd0YWJjb25maWcnXSlcclxuICAgICAgaWYgKCB0YWJDb25maWdbMF0udHlwZSA9PT0gJ0FUUEJETScpIHtcclxuICAgICAgICB0aGlzLmRhdGFTdG9yZVNlcnZpY2Uuc2V0RGF0YSgnZ3JpZEFjdGlvbicsICdlZGl0Jyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5nZXRSaWJib25QYWdlKHRoaXMudGFicGFnZURhdGEucmliYm9uaWQpO1xyXG5cclxuICAgICAgLy8gTWFwIHRhYiBjb25maWd1cmF0aW9ucyBhbmQgc2V0IHJvdXRlciBsaW5rc1xyXG4gICAgICB0aGlzLnRhYkxpc3QgPSB0YWJDb25maWcubWFwKHBhZ2UgPT4gdGhpcy5tYXBUYWIocGFnZSkpO1xyXG4gICAgICB0aGlzLm9yaWdpbmFsVGFiTGlzdCA9IHRoaXMudGFiTGlzdDtcclxuXHJcbiAgICAgIGNvbnN0IHBhZ2VJRCA9IHRoaXMucm91dGUuc25hcHNob3QucXVlcnlQYXJhbXNbJ3BhZ2VJRCddO1xyXG4gICAgICBpZiAocGFnZUlEKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVRhYkJ5UGFnZUlEKHBhZ2VJRCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFiTGlzdFswXS5pdGVtcy5sZW5ndGggPiAwICYmIHRoaXMudGFicGFnZURhdGEudGFib3JpZW50YXRpb24gPT09ICdWJykge1xyXG4gICAgICAgICAgdGhpcy5vblRhYkl0ZW1DbGljayh0aGlzLnRhYkxpc3RbMF0sIHRoaXMudGFiTGlzdFswXS5pdGVtc1swXSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYkxpc3RbMF0uaXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLm9uVGFiSXRlbUNsaWNrKHRoaXMudGFiTGlzdFswXSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG1hcFRhYihwYWdlOiBhbnkpOiBNZW51SXRlbSB7XHJcbiAgICAvLyBQcm9jZXNzIGNoaWxkVGFicyBpZiBhdmFpbGFibGVcclxuICAgIGNvbnN0IGNoaWxkVGFicyA9IHRoaXMubWFwQ2hpbGRUYWJzKHBhZ2UudGFicyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogcGFnZS5pZCxcclxuICAgICAgbGFiZWw6IHBhZ2UubmFtZSxcclxuXHJcbiAgICAgIC8qIEFkZCByb3V0ZXJMaW5rIGlmIG5lZWRlZCAqL1xyXG4gICAgICByb3V0ZXJMaW5rOiAnJyxcclxuICAgICAgaWNvbjogcGFnZT8uaWNvbiA/IHBhZ2UuaWNvbiA6ICcnLFxyXG4gICAgICBpdGVtczogY2hpbGRUYWJzLFxyXG4gICAgICB0YWJpbmRleDogYCR7dGhpcy50YWJJbmRleENvdW50ZXIrK31gXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgbWFwQ2hpbGRUYWJzKGNoaWxkVGFiczogYW55W10pOiBNZW51SXRlbVtdIHtcclxuICAgIGlmICghY2hpbGRUYWJzIHx8ICFBcnJheS5pc0FycmF5KGNoaWxkVGFicykpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjaGlsZFRhYnMubWFwKGNoaWxkVGFiID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpZDogY2hpbGRUYWIuaWQsXHJcbiAgICAgICAgbGFiZWw6IGNoaWxkVGFiLm5hbWUsXHJcblxyXG4gICAgICAgIC8vIEFkZCByb3V0ZXJMaW5rIGlmIG5lZWRlZFxyXG4gICAgICAgIHJvdXRlckxpbms6ICcnLFxyXG4gICAgICAgIGljb246IGNoaWxkVGFiPy5pY29uID8gY2hpbGRUYWIuaWNvbiA6ICcnLFxyXG4gICAgICAgIGl0ZW1zOiBjaGlsZFRhYi50YWJzID8gY2hpbGRUYWIudGFicyA6IFtdLFxyXG4gICAgICAgIHRhYmluZGV4OiBgJHt0aGlzLnRhYlN1YkluZGV4Q291bnRlcisrfWBcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tQYXJhbXMoZWxlbWVudDphbnkpe1xyXG4gICAgcmV0dXJuIHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoZWxlbWVudCkgOiBlbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0UmliYm9uUGFnZShyaWJib25pZDogYW55KSB7XHJcbiAgICB0aGlzLmR5bmFtaWNUYWJQYWdlU2VydmljZS5nZXREeW5hbWljUGFnZShyaWJib25pZCkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XHJcbiAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICBjb25zdCBwYWdlID0gcmVzdWx0WydkYXRhJ11bMF0uYWN0aXZlVmVyc2lvbjtcclxuICAgICAgICB0aGlzLnJpYmJvblBhZ2VEYXRhID0gdGhpcy5jaGVja1BhcmFtcyhwYWdlLnRhYmxlc2NoZW1hY29uZmlnKTtcclxuICAgICAgICB0aGlzLnJpYmJvbkNvbmZpZyA9IHRoaXMuY2hlY2tQYXJhbXMocGFnZS5yaWJib25jb25maWcpO1xyXG4gICAgICAgIGxldCBxdWVyeURhdGE6IGFueTtcclxuICAgICAgICBpZiAodGhpcy5zb3VyY2VLZXkgJiYgdGhpcy5zb3VyY2VWYWx1ZSAmJiB0aGlzLnNvdXJjZVR5cGUpIHtcclxuICAgICAgICAgIHF1ZXJ5RGF0YSA9IHsgZGF0YToge30gfTtcclxuICAgICAgICAgIHF1ZXJ5RGF0YS5kYXRhW3RoaXMuc291cmNlS2V5XSA9ICh0aGlzLnNvdXJjZVR5cGUgPT09ICdudW1iZXInKSA/IE51bWJlcih0aGlzLnNvdXJjZVZhbHVlKSA6IHRoaXMuc291cmNlVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICBxdWVyeURhdGE6IHF1ZXJ5RGF0YSxcclxuICAgICAgICAgIHBhZ2VkYXRhOiBbcGFnZV0sXHJcbiAgICAgICAgICByZXF1aXJlVG90YWxDb3VudDogdHJ1ZSxcclxuICAgICAgICAgIHJvbGVJZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncm9sZV9pZCcpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBkYXRhLnBhZ2VkYXRhWzBdLmZpbHRlcklkID0gbnVsbDtcclxuICAgICAgICBjb25zdCBncmlkVXJsID0gJy9zb2x1dGlvbi9keW5hbWljc2VhcmNoL3NlYXJjaGlucHV0Lyc7XHJcbiAgICAgICAgdGhpcy5keW5hbWljU2VhcmNoU2VydmljZS5leHBvcnREYXRhKGRhdGEsIGdyaWRVcmwpLnN1YnNjcmliZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmR5bmFtaWNSaWJib25EYXRhID0gdmFsdWVbJ2RhdGEnXVsncmVzdWx0J11bMF0ucm93O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEFjdGl2ZVZlcnNpb25zQW5kUm91dGVzKHBhZ2U6IGFueSwgbGV2ZWw6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZHluYW1pY1RhYlBhZ2VTZXJ2aWNlLmdldER5bmFtaWNQYWdlKHBhZ2UuaWQpLnRvUHJvbWlzZSgpXHJcbiAgICAgIC50aGVuKChyZXNwb25zZTogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IHJlc3BvbnNlWydkYXRhJ107XHJcblxyXG4gICAgICAgIC8vIFNldCByb3V0aW5nIGJhc2VkIG9uIHBhZ2UgdHlwZVxyXG4gICAgICAgICAgbGV0IHJvdXRlckxpbms7XHJcbiAgICAgICAgICBpZiAocm93c1swXS5wYWdldHlwZSA9PT0gJ0JHUCcpIHtcclxuICAgICAgICAgICAgcm91dGVyTGluayA9IGBkeW5hbWljLXNlYXJjaC9zZWFyY2gvJHtyb3dzWzBdLmFjdGl2ZVZlcnNpb24uaWR9YFxyXG4gICAgICAgICAgfSBlbHNlIGlmIChyb3dzWzBdLnBhZ2V0eXBlID09PSAnTVYnKSB7XHJcbiAgICAgICAgICAgIHJvdXRlckxpbmsgPSBgbWFzdGVyLXZpZXcvJHtwYWdlLmlkfWBcclxuICAgICAgICAgIH0gIGVsc2UgaWYgKHJvd3NbMF0ucGFnZXR5cGUgPT09ICdDT01QJykge1xyXG4gICAgICAgICAgICByb3V0ZXJMaW5rID0gYGNvbXBvc2l0ZS1wYWdlLyR7cGFnZS5pZH1gXHJcbiAgICAgICAgICB9ZWxzZSBpZiAocm93c1swXS5wYWdldHlwZSA9PT0gJ0NQJykge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNoZWNrUGFyYW1zKHJvd3NbMF0uYWN0aXZlVmVyc2lvbi50YWJjb25maWcpXHJcbiAgICAgICAgICAgIHJvdXRlckxpbmsgPSBgJHtjb25maWdbMF0ucGF0aG5hbWV9LyR7cm93c1swXS5hY3RpdmVWZXJzaW9uLmlkfWBcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJvdXRlckxpbmsgPSBgcGFnZS8ke3BhZ2UuaWR9YFxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0SXRlbXNBdExldmVsKGxldmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRSb3V0ZXJMaW5rKGl0ZW1zLCBwYWdlLmlkLCByb3V0ZXJMaW5rKTtcclxuXHJcbiAgICAgICAgLy8gUHJvY2VzcyBjaGlsZFRhYnMgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKHBhZ2UudGFicyAmJiBBcnJheS5pc0FycmF5KHBhZ2UudGFicykpIHtcclxuICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gcGFnZS50YWJzLm1hcChjaGlsZFRhYiA9PiB0aGlzLnNldEFjdGl2ZVZlcnNpb25zQW5kUm91dGVzKGNoaWxkVGFiLCBsZXZlbCArIDEpKTtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihyZXNwb25zZXMgPT4ge1xyXG4gICAgICAgICAgICByZXNwb25zZXMuZm9yRWFjaCgocmVzcG9uc2UsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgYXJyYXkgcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXNwb25zZSBmb3IgY2hpbGRUYWIgYXQgaW5kZXggJHtpbmRleH06YCwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgdm9pZCByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYE5vIHJlc3BvbnNlIGZvciBjaGlsZFRhYiBhdCBpbmRleCAke2luZGV4fWApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBlcnJvcnMgaWYgYW55IG9mIHRoZSBwcm9taXNlcyBmYWlsXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcclxuXHJcbiAgICAgICAgICAgIC8qIFJlc29sdmUgcHJvbWlzZXMgYW5kIHJldHVybiB2b2lkICovXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJdGVtc0F0TGV2ZWwobGV2ZWw6IG51bWJlcik6IE1lbnVJdGVtW10ge1xyXG4gICAgbGV0IGl0ZW1zID0gdGhpcy50YWJMaXN0O1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZXZlbDsgaSsrKSB7XHJcbiAgICAgIGl0ZW1zID0gaXRlbXMucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYy5jb25jYXQoaXRlbS5pdGVtcyB8fCBbXSksIFtdIGFzIE1lbnVJdGVtW10pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGl0ZW1zO1xyXG4gIH1cclxuXHJcbiAgc2V0Um91dGVyTGluayhpdGVtczogTWVudUl0ZW1bXSwgcGFnZUlkOiBhbnksIHJvdXRlckxpbms6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgaWYgKGl0ZW0ucm91dGVyTGluayA9PT0gJycpIHtcclxuICAgICAgICBpdGVtLnJvdXRlckxpbmsgPSBpdGVtLmlkID09PSBwYWdlSWQgPyByb3V0ZXJMaW5rIDogJyc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25UYWJJdGVtQ2xpY2sodGFiOiBhbnksIHN1YlRhYjogYW55ID0gbnVsbCkge1xyXG4gICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGFiLnRhYmluZGV4O1xyXG4gICAgdGhpcy5zZWxlY3RlZFN1YlRhYkluZGV4ID0gc3ViVGFiID8gc3ViVGFiLnRhYmluZGV4IDogLTE7XHJcbiAgICB0aGlzLnNlbGVjdGVkVGFiTmFtZSA9IHRhYi5sYWJlbDtcclxuICAgIHRoaXMuc2VsZWN0ZWRTdWJUYWJOYW1lID0gc3ViVGFiID8gc3ViVGFiLmxhYmVsIDogJyc7XHJcbiAgICB0aGlzLmxvY2Fsc3RvcmFnZS5yZW1vdmVJdGVtKCdzZXRUYWJBY3Rpb24nKTtcclxuICAgIHRoaXMubG9jYWxzdG9yYWdlLnJlbW92ZUl0ZW0oJ2NvbXBvc2l0ZVRpdGxlJyk7XHJcbiAgICB0aGlzLnRhYmFjdGlvbk5hbWUgPSAnJztcclxuICAgIHRoaXMuc2VsZWN0ZWRUYWIgPSB0YWI7XHJcbiAgICB0aGlzLnNlbGVjdGVkU3ViVGFiID0gc3ViVGFiO1xyXG4gICAgY29uc3QgdGFyZ2V0UGFnZSA9IHN1YlRhYiA/IHN1YlRhYiA6IHRhYjtcclxuICAgIHRoaXMuc2V0QWN0aXZlVmVyc2lvbnNBbmRSb3V0ZXModGFyZ2V0UGFnZSwgc3ViVGFiID8gMSA6IDApLnRoZW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLnRhYlJvdXRpbmdMaW5rKHRhcmdldFBhZ2UpO1xyXG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIGFjdGl2ZSB2ZXJzaW9ucyBhbmQgcm91dGVzOicsIGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdGFiUm91dGluZ0xpbmsodGFiOiBhbnkpIHtcclxuICAgIGlmICghdGFiLnJvdXRlckxpbmsuaW5jbHVkZXMoJ2R5bmFtaWMtc2VhcmNoJykpIHtcclxuICAgICAgdGhpcy5kYXRhU3RvcmVTZXJ2aWNlLnNldERhdGEoJ2dyaWRBY3Rpb24nLCAnZWRpdCcpO1xyXG4gICAgICB0aGlzLmxvY2Fsc3RvcmFnZS5zZXRJdGVtKCdwYXJlbnRHcmlkUGFnZScsICcnKTtcclxuICAgICAgdGhpcy5sb2NhbHN0b3JhZ2Uuc2V0SXRlbSgnQWRkQWN0aW9uJywgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2Ake3RhYi5yb3V0ZXJMaW5rfWBdLCB7IHJlbGF0aXZlVG86IHRoaXMucm91dGUsIHN0YXRlOiB0aGlzLm5hdmlnYXRlRGF0YSB9KTtcclxuICB9XHJcblxyXG4gIG9uVmVydGljYWxUYWJJdGVtQ2xpY2sodGFiOiBhbnksIGluZGV4OiBhbnkpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5hY3RpdmVJdGVtID0gdGhpcy50YWJMaXN0W2luZGV4XTtcclxuICAgIHRoaXMuc2VsZWN0ZWRUYWJOYW1lID0gdGFiLmFjdGl2ZUl0ZW0ubGFiZWw7XHJcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYCR7dGFiLmFjdGl2ZUl0ZW0ucm91dGVyTGlua31gXSwgeyByZWxhdGl2ZVRvOiB0aGlzLnJvdXRlLCBzdGF0ZTogdGhpcy5uYXZpZ2F0ZURhdGEgfSk7XHJcbiAgfVxyXG5cclxuICByZWRpcmVjdCgpIHtcclxuICAgIGNvbnN0IGlkID0gdGhpcy5sb2NhbHN0b3JhZ2UuZ2V0SXRlbSgndmVyc2lvbi1pZCcpO1xyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2BwYWdlcy9wYWdlLWRlc2lnbi92ZXJzaW9ucy8ke2lkfWBdKTtcclxuICAgIGNvbnN0IHBhcmVudEdyaWRQYWdlSW5mbyA9IEpTT04ucGFyc2UodGhpcy5sb2NhbHN0b3JhZ2UuZ2V0SXRlbSgnYmFja1RvR3JpZFBhZ2UnKSk7XHJcbiAgICBpZiAocGFyZW50R3JpZFBhZ2VJbmZvICYmIHBhcmVudEdyaWRQYWdlSW5mby5pZCkge1xyXG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYC9wYWdlcy9keW5hbWljLXNlYXJjaC9zZWFyY2gvJHtwYXJlbnRHcmlkUGFnZUluZm8uaWR9YF0sIHsgcmVsYXRpdmVUbzogdGhpcy5yb3V0ZSB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYC9wYWdlcy8ke3BhcmVudEdyaWRQYWdlSW5mby5uYW1lfWBdLCB7IHJlbGF0aXZlVG86IHRoaXMucm91dGUgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgYmFja1RvTWFpbigpe1xyXG4gICAgaWYodGhpcy50YWJhY3Rpb25OYW1lKSB7XHJcbiAgICAgIHRoaXMub25UYWJJdGVtQ2xpY2sodGhpcy5zZWxlY3RlZFRhYiwgdGhpcy5zZWxlY3RlZFN1YlRhYik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMubG9jYWxzdG9yYWdlLnJlbW92ZUl0ZW0oJ25hdmlnYXRpb25TdGF0ZScpO1xyXG4gICAgdGhpcy5wYWdlSWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIGdldERhdGVGb3JtYXQodmFsdWU6IGFueSkge1xyXG4gICAgaWYgKHRoaXMuc2V0dGluZ0luZm8pIHtcclxuICAgICAgaWYgKHZhbHVlID09PSAnZGF0ZScpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nSW5mb1snZGF0ZXRpbWVmb3JtYXQnXS5zcGxpdCgnICcpWzBdO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLnNldHRpbmdJbmZvWydkYXRldGltZWZvcm1hdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICdNTS9kZC95eXl5JztcclxuICB9XHJcblxyXG4gIGNsZWFyU2VhcmNoKCkge1xyXG4gICAgdGhpcy5zZWFyY2hUZXJtID0gJyc7XHJcbiAgfVxyXG5cclxuICBkeW5hbWljUmliYm9uQWN0aXZlKHBhZ2VJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB0YWJMaXN0ID0gdGhpcy50YWJMaXN0O1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgZm9yIChjb25zdCB0YWJMaXN0RWxlbWVudCBvZiB0YWJMaXN0KSB7XHJcbiAgICAgIGlmICh0YWJMaXN0RWxlbWVudC5yb3V0ZXJMaW5rID09PSBwYWdlSWQpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTdWJUYWJJbmRleCA9IC0xO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUYWJOYW1lID0gdGFiTGlzdEVsZW1lbnQubGFiZWw7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFN1YlRhYk5hbWUgPSAnJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBzdWJUYWJMaXN0ID0gdGFiTGlzdEVsZW1lbnQuaXRlbXM7XHJcbiAgICAgICAgbGV0IGogPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc3ViVGFiTGlzdEVsZW1lbnQgb2Ygc3ViVGFiTGlzdCkge1xyXG4gICAgICAgICAgaWYgKHN1YlRhYkxpc3RFbGVtZW50LnJvdXRlckxpbmsgPT09IHBhZ2VJZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU3ViVGFiSW5kZXggPSBqO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFiTmFtZSA9IHRhYkxpc3RFbGVtZW50LmxhYmVsO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU3ViVGFiTmFtZSA9IHN1YlRhYkxpc3RFbGVtZW50LmxhYmVsO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGogKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaSArPSAxO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwiZHluYW1pYy1yaWJib24tdGFic1wiPlxyXG4gIDxkaXYgY2xhc3M9XCJjb2wtc20tMTIgbWItMlwiPlxyXG4gICAgPCEtLSA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tY2FuY2VsXCIgKGNsaWNrKT1cInJlZGlyZWN0KClcIj5cclxuICAgICAgQmFjayB7eyBwYXJlbnRHcmlkUGFnZSAmJiAndG8gJyArIHBhcmVudEdyaWRQYWdlIH19XHJcbiAgICA8L2J1dHRvbj4gLS0+XHJcbiAgPC9kaXY+XHJcblxyXG4gIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJsZWZ0LW1lbnUtY2FyZFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwicC0zXCIgaWQ9XCJzaWRlYmFyXCIgKm5nSWY9XCJ0YWJwYWdlRGF0YT8udGFib3JpZW50YXRpb24gPT09ICdWJ1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXNlYXJjaCBwb3NpdGlvbi1yZWxhdGl2ZSBtYi0zXCI+XHJcbiAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIFRhYlwiIGFyaWEtbGFiZWw9XCJjb21wb3NlXCJcclxuICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJzZWFyY2hUZXJtXCIgLz5cclxuICAgICAgICAgICAgPHNwYW4gcm9sZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2UtYnRuIG1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgbXItMlwiICpuZ0lmPVwiIXNlYXJjaFRlcm1cIj5zZWFyY2g8L3NwYW4+XHJcblxyXG4gICAgICAgICAgPHNwYW4gcm9sZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2UtYnRuIG1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgbXItMlwiICpuZ0lmPVwic2VhcmNoVGVybVwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJjbGVhclNlYXJjaCgpXCI+Y2xvc2U8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNpZGViYXItbWVudVwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInVuc3R5bGVkIGxpc3QtZ3JvdXAgYm9yZGVyLTAgdGV4dC1jZW50ZXIgdGV4dC1tZC1sZWZ0XCIgW25nQ2xhc3NdPVwidGFiLmljb24/ICdpY29uLWVuYWJsZWQnOicnXCJcclxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IHRhYiBvZiB0YWJMaXN0IHwgdGFiZmlsdGVyOiBzZWFyY2hUZXJtOiBvcmlnaW5hbFRhYkxpc3RcIj5cclxuICAgICAgICAgICAgPGEgKm5nSWY9XCJ0YWIuaXRlbXMubGVuZ3RoID09PSAwXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiXHJcbiAgICAgICAgICAgICAgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gYm9yZGVyLTAgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciB0ZXh0LWxlZnRcIlxyXG4gICAgICAgICAgICAgIFtjbGFzcy5hY3RpdmVdPVwic2VsZWN0ZWRUYWJJbmRleCA9PT0gdGFiLnRhYmluZGV4XCIgKGNsaWNrKT1cIm9uVGFiSXRlbUNsaWNrKHRhYilcIj5cclxuICAgICAgICAgICAgICA8IS0tIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCB5b3V0aC1pY29uIG1yLTJcIj57eyB0YWIuaWNvbiB9fTwvc3Bhbj4gLS0+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdWJtZW51LW5hbWVcIj57eyB0YWIubGFiZWwgfX08L3NwYW4+XHJcbiAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPGEgKm5nSWY9XCJ0YWIuaXRlbXMubGVuZ3RoID4gMFwiIGhyZWY9XCIjdGFie3t0YWIudGFiaW5kZXh9fVwiIGRhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIlxyXG4gICAgICAgICAgICAgIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGJvcmRlci0wIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgdGV4dC1sZWZ0IGxldmVsMVwiXHJcbiAgICAgICAgICAgICAgW2NsYXNzLmNvbGxhcHNlZF09XCJzZWxlY3RlZEluZGV4ICE9PSB0YWIudGFiaW5kZXhcIlxyXG4gICAgICAgICAgICAgIFtjbGFzcy5hY3RpdmVdPVwic2VsZWN0ZWRJbmRleCA9PT0gdGFiLnRhYmluZGV4XCJcclxuICAgICAgICAgICAgICBbYXR0ci5hcmlhLWV4cGFuZGVkXT1cInNlbGVjdGVkSW5kZXggPT09IHRhYi50YWJpbmRleCA/ICd0cnVlJyA6ICdmYWxzZSdcIj5cclxuICAgICAgICAgICAgICA8IS0tIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCB5b3V0aC1pY29uIG1yLTJcIj57eyB0YWIuaWNvbiB9fTwvc3Bhbj4gLS0+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZW51LW5hbWVcIj57eyB0YWIubGFiZWx9fTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sbGFwc2UgcG9zaXRpb24tcmVsYXRpdmVcIiBpZD1cInRhYnt7dGFiLnRhYmluZGV4fX1cIiBbY2xhc3Muc2hvd109XCJzZWxlY3RlZEluZGV4ID09PSB0YWIudGFiaW5kZXhcIlxyXG4gICAgICAgICAgICAgIGRhdGEtcGFyZW50PVwiI3NpZGViYXJcIj5cclxuICAgICAgICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCBzdWJJdGVtIG9mIHRhYi5pdGVtc1wiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGJvcmRlci0wIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgdGV4dC1sZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJzZWxlY3RlZFN1YlRhYkluZGV4ID09PSBzdWJJdGVtLnRhYmluZGV4XCJcclxuICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cIm9uVGFiSXRlbUNsaWNrKHRhYiwgc3ViSXRlbSlcIj5cclxuICAgICAgICAgICAgICAgICAgPCEtLSA8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgeW91dGgtaWNvbiBtci0yXCI+e3sgc3ViSXRlbS5pY29uIH19PC9zcGFuPiAtLT5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdWJtZW51LW5hbWVcIj57eyBzdWJJdGVtLmxhYmVsIH19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDx1bCBjbGFzcz1cIm5hdiBuYXYtcGlsbHMgZmxleC1jb2x1bW4gYm9yZGVyIHNoYWRvd1wiIGlkPVwibXlUYWJcIiByb2xlPVwidGFibGlzdFwiXHJcbiAgICAgICAgKm5nSWY9XCJ0YWJwYWdlRGF0YT8udGFib3JpZW50YXRpb24gPT09ICdIJ1wiPlxyXG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGZpZWxkIG9mIHJpYmJvblBhZ2VEYXRhPy5maWVsZG1hcHBpbmdcIj5cclxuICAgICAgICAgIDxsaSBjbGFzcz1cIm5hdi1pdGVtLWJ0biBuYXYtaXRlbSBib3JkZXItYm90dG9tIHAtMyB5b3V0aC1pbWFnZSB0ZXh0LWNlbnRlclwiXHJcbiAgICAgICAgICAgICpuZ0lmPVwiZmllbGQuZmllbGQuaW5kZXhPZignX3BpYycpICE9PSAtMVwiPlxyXG4gICAgICAgICAgICA8aW1nIFtzcmNdPVwiZHluYW1pY1JpYmJvbkRhdGEgJiYgZHluYW1pY1JpYmJvbkRhdGFbZmllbGQuZmllbGRdIHx8ICdhc3NldHMvaW1hZ2VzL3VzZXItZW1wdHkucG5nJ1wiXHJcbiAgICAgICAgICAgICAgd2lkdGg9XCI2NFwiIGFsdD1cInlvdXRoIGltYWdlXCIgLz5cclxuICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgZmllbGQgb2YgcmliYm9uUGFnZURhdGE/LmZpZWxkbWFwcGluZ1wiPlxyXG4gICAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW0tYnRuIG5hdi1pdGVtIGJvcmRlci1ib3R0b20gcC0zIHlvdXRoLWltYWdlIHRleHQtY2VudGVyXCJcclxuICAgICAgICAgICAgKm5nSWY9XCJmaWVsZC5maWVsZC5pbmRleE9mKCdfcGljJykgPT09IC0xXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPVwibWItMFwiPnt7IGZpZWxkLmxhYmVsIH19PC9wPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz1cIm1iLTAgZm9udC13ZWlnaHQtYm9sZFwiICpuZ0lmPVwiZmllbGQuZGF0YXR5cGUgPT09ICdkYXRlJyB8fCBmaWVsZC5kYXRhdHlwZSA9PT0gJ2RhdGV0aW1lJ1wiPnt7XHJcbiAgICAgICAgICAgICAgZHluYW1pY1JpYmJvbkRhdGEgJiYgZHluYW1pY1JpYmJvbkRhdGFbZmllbGQuY29sdW1uRGVmXSB8IGRhdGUgOiBnZXREYXRlRm9ybWF0KGZpZWxkLmRhdGF0eXBlKSB9fTwvcD5cclxuICAgICAgICAgICAgPHAgY2xhc3M9XCJtYi0wIGZvbnQtd2VpZ2h0LWJvbGRcIiAqbmdJZj1cImZpZWxkLmRhdGF0eXBlICE9PSAnZGF0ZScgJiYgZmllbGQuZGF0YXR5cGUgIT09ICdkYXRldGltZSdcIj57e1xyXG4gICAgICAgICAgICAgIGR5bmFtaWNSaWJib25EYXRhICYmIGR5bmFtaWNSaWJib25EYXRhW2ZpZWxkLmNvbHVtbkRlZl0gfX08L3A+XHJcbiAgICAgICAgICA8L2xpPlxyXG4gICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICA8L3VsPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwicmlnaHQtc2VjdGlvbiBtYi0zIHBsLTNcIj5cclxuICAgICAgPGFwcC1keW5hbWljLXJpYmJvbi1wYWdlIFt0YWJPcmllbnRhdGlvbl09XCJ0YWJwYWdlRGF0YT8udGFib3JpZW50YXRpb25cIiBbcmliYm9uRGF0YV09XCJyaWJib25QYWdlRGF0YVwiXHJcbiAgICAgICAgW2R5bmFtaWNSaWJib25EYXRhXT1cImR5bmFtaWNSaWJib25EYXRhXCIgW3NlbGVjdGVkVGFiTmFtZV09XCJzZWxlY3RlZFRhYk5hbWVcIiBbcmliYm9uQ29uZmlnXT1cInJpYmJvbkNvbmZpZ1wiXHJcbiAgICAgICAgW3NlbGVjdGVkU3ViVGFiSW5kZXhdPVwic2VsZWN0ZWRTdWJUYWJJbmRleFwiIFtzZXR0aW5nSW5mb109XCJzZXR0aW5nSW5mb1wiPjwvYXBwLWR5bmFtaWMtcmliYm9uLXBhZ2U+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0YWItY29udGVudFwiPlxyXG4gICAgICAgIDxkaXYgKm5nSWY9XCJ0YWJwYWdlRGF0YT8udGFib3JpZW50YXRpb24gPT09ICdIJ1wiPlxyXG4gICAgICAgICAgPHAtdGFiTWVudSBbbW9kZWxdPVwidGFiTGlzdFwiICN0YWIgW2FjdGl2ZUl0ZW1dPVwiYWN0aXZlSXRlbVwiIFtzY3JvbGxhYmxlXT1cInRydWVcIj5cclxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlIHBUZW1wbGF0ZT1cIml0ZW1cIiBsZXQtaXRlbSBsZXQtaT1cImluZGV4XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIiAoY2xpY2spPVwib25WZXJ0aWNhbFRhYkl0ZW1DbGljayh0YWIsIGkpXCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgbXItMlwiPnt7IGl0ZW0uaWNvbiB9fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFibGUtbmFtZVwiPnt7IGl0ZW0ubGFiZWwgfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgICA8L3AtdGFiTWVudT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8aGVhZGVyICpuZ0lmPVwic2VsZWN0ZWRTdWJUYWJOYW1lIHx8IHNlbGVjdGVkVGFiTmFtZVwiIGNsYXNzPVwicmliYm9uXCIgdGl0bGU9XCJ7eyBzZWxlY3RlZFRhYk5hbWUgfX1cIj5cclxuICAgICAgICAgIDxidXR0b24gKGNsaWNrKT1cImJhY2tUb01haW4oKVwiIFtuZ0NsYXNzXT1cInsnYWN0aXZlLXRhYic6IHRhYmFjdGlvbk5hbWV9XCI+XHJcbiAgICAgICAgICAgIHt7IHNlbGVjdGVkU3ViVGFiTmFtZSA/IHNlbGVjdGVkU3ViVGFiTmFtZSA6IHNlbGVjdGVkVGFiTmFtZSB9fVxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8c3BhbiBbaW5uZXJIVE1MXT1cInRhYmFjdGlvbk5hbWVcIiBjbGFzcz1cInN1YlBhZ2VzXCI+e3t0YWJhY3Rpb25OYW1lfX08L3NwYW4+XHJcbiAgICAgICAgPC9oZWFkZXI+XHJcbiAgICAgICAgPHJvdXRlci1vdXRsZXQ+PC9yb3V0ZXItb3V0bGV0PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuICA8L2Rpdj5cclxuPC9kaXY+Il19